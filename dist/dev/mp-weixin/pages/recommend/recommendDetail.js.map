{"version":3,"file":"recommendDetail.js","sources":["../../../../../src/pages/recommend/recommendDetail.vue","../../../../../uniPage:/cGFnZXMvcmVjb21tZW5kL3JlY29tbWVuZERldGFpbC52dWU"],"sourcesContent":["<template>\n  <div>\n    <!--pages/posts/post-detail/post-detail.wxml-->\n    <view class=\"container\">\n      <view class=\"author-date\">\n        <image class=\"avatar\" :src=\"details.avatar\"></image>\n        <view class=\"author-view\">\n          <text class=\"author\">{{ details.nickName }}</text>\n          <text class=\"const-text\">推荐于</text>\n          <text class=\"date\">{{ details.createTime }}</text>\n        </view>\n      </view>\n\n      <view class=\"activityD\">\n        <text class=\"title\">{{ details.theme }}</text>\n        <text class=\"date\">主讲人：{{ details.lecturerName }}</text>\n      </view>\n\n      <view class=\"tool\">\n        <text>{{ details.content }}</text>\n      </view>\n      <view class=\"wrapper\">\n        <view class=\"TLC\">\n          <view>\n            <uni-icons v-if=\"details.status == 1\" type=\"email-filled\" size=\"20\"></uni-icons>\n            <uni-icons v-if=\"details.status == 2\" type=\"auth\" size=\"20\"></uni-icons>\n            <uni-icons v-else-if=\"details.status == 3\" type=\"vip-filled\" size=\"20\"></uni-icons>\n\n            <text v-if=\"details.status == 1\">已推荐</text>\n            <text v-if=\"details.status == 2\">已采纳</text>\n            <text v-else-if=\"details.status == 3\">有效推荐</text>\n          </view>\n\n          <view class=\"dianzannum\" @click=\"iLike(details.id, details.tblLike)\">\n            <uni-icons v-if=\"details.tblLike == null\" type=\"heart\" size=\"20\"></uni-icons>\n            <uni-icons v-else type=\"heart-filled\" color=\"red\" size=\"20\"></uni-icons>\n            <view>{{ details.likeCount }}</view>\n          </view>\n\n          <view>\n            <view @tap=\"showInputBox(details.id)\">\n              <uni-icons type=\"chat\" size=\"20\"></uni-icons>\n              <text>评论</text>\n            </view>\n          </view>\n        </view>\n\n        <view class=\"zan-name-view\" v-if=\"details.likes.length !== 0\">\n          <uni-icons type=\"heart-filled\" size=\"20\"></uni-icons>\n          <template v-for=\"(item2, index2) in details.likes\" :key=\"index2\">\n            <text bindtap=\"TouchZanUser\" :data-name=\"item2.nickName\" class=\"zan-user\">{{\n              item2.nickName\n            }}</text>\n            <text class=\"zan-user\" v-if=\"index2 !== details.likes.length - 1\">,</text>\n          </template>\n        </view>\n\n        <view class=\"discuss-view\">\n          <view\n            class=\"discuss\"\n            v-for=\"(item3, index3) in details.tblRecommendCommnets\"\n            :key=\"index3\"\n          >\n            <label bindtap=\"TouchZanUser\" :data-name=\"item3.nickName\" class=\"discuss-user\"\n              >{{ item3.nickName }}：</label\n            >\n            <label class=\"content\">{{ item3.comment }}</label>\n            <view class=\"date\">{{ item3.createTime }}</view>\n          </view>\n        </view>\n      </view>\n    </view>\n    <view class=\"input-view\" v-if=\"showInput\">\n      <input\n        class=\"inputstyle\"\n        v-model=\"comment\"\n        type=\"text\"\n        :focus=\"isInputFocused\"\n        placeholder=\"请输入评论\"\n        @blur=\"hideInput\"\n      />\n      <button class=\"btn-view\" :disabled=\"comment === ''\" @click=\"sendcomment\">发送</button>\n    </view>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { ref, reactive } from 'vue'\nimport { onLaunch, onLoad } from '@dcloudio/uni-app'\nimport { getRecommedDetail, sendLike, deletLike, sendcommen } from '@/services/recommed'\nconst props = defineProps<{\n  id: number\n}>()\nconst details = ref({})\nconst getD = async (id) => {\n  const res = await getRecommedDetail(id)\n  console.log(res)\n  details.value = res.data\n}\nonLoad(() => {\n  getD(props.id)\n})\n\n//点赞\nconst sendLikeTo = async (id) => {\n  const res = await sendLike(id)\n  console.log(res)\n  if (res.code == 200) {\n    getD(props.id)\n  }\n}\nconst delLike = async (id) => {\n  const res = await deletLike(id)\n  console.log(res)\n  if (res.code == 200) {\n    getD(props.id)\n  }\n}\nconst iLike = (id, tblLike) => {\n  if (uni.getStorageSync('token')) {\n    if (tblLike) {\n      console.log('取消点赞！')\n      delLike(id)\n    } else {\n      console.log('点赞')\n      sendLikeTo(id)\n    }\n  } else {\n    wx.showToast({\n      title: '您尚未登录，请先登录',\n      icon: 'none',\n      duration: 1000,\n      complete: () => {\n        setTimeout(() => {\n          uni.navigateTo({\n            url: '/pages/login/login',\n          })\n        }, 1000)\n      },\n    })\n  }\n}\n\n//评论\nconst showInput = ref(false)\nconst comment = ref('')\nconst currentItemId = ref<number>()\n// 自动弹出键盘\nconst isInputFocused = ref(true)\nconst showInputBox = (itemId) => {\n  if (uni.getStorageSync('token')) {\n    console.log('评论')\n    console.log(itemId)\n    showInput.value = true\n    currentItemId.value = itemId\n  } else {\n    wx.showToast({\n      title: '您尚未登录，请先登录',\n      icon: 'none',\n      duration: 1000,\n      complete: () => {\n        setTimeout(() => {\n          uni.navigateTo({\n            url: '/pages/login/login',\n          })\n        }, 1000)\n      },\n    })\n  }\n}\nconst sendC = async () => {\n  const res = await sendcommen({\n    comment: comment.value,\n    recommendId: currentItemId.value,\n  })\n  console.log(res)\n  if (res.code == 200) {\n    showInput.value = false\n    // 发送评论后隐藏输入框\n    showInput.value = false\n    // 清空评论内容\n    comment.value = ''\n    getD(props.id)\n  }\n}\nconst sendcomment = () => {\n  console.log('点击了发送')\n  console.log(currentItemId.value)\n  sendC()\n}\nconst hideInput = () => {\n  showInput.value = false\n  // 发送评论后隐藏输入框\n  showInput.value = false\n}\n</script>\n<style scoped>\n/* pages/posts/post-detail/post-detail.wxss */\n.container {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n.head-container {\n  width: 100%;\n  height: 460rpx;\n  position: relative;\n}\n.head-image {\n  width: 100%;\n  height: 460rpx;\n}\n.audio {\n  width: 102rpx;\n  height: 110rpx;\n  position: absolute;\n  top: 50%;\n  margin-top: -55rpx;\n  left: 50%;\n  margin-left: -51rpx;\n  opacity: 0.6;\n}\n.author-date {\n  display: flex;\n  flex-direction: row;\n  margin: 3vh auto 0;\n  width: 100%;\n}\n.author-view {\n  display: flex;\n  flex-direction: column;\n  width: 75%;\n  margin-left: 5%;\n}\n.avatar {\n  /* height:100%; */\n  width: 100rpx;\n  height: 100rpx;\n  overflow: hidden;\n  vertical-align: middle;\n  margin-left: 20rpx;\n  border-radius: 15%;\n}\n.author {\n  font-size: 30rpx;\n  font-weight: 300;\n  vertical-align: middle;\n  color: #666;\n}\n.const-text {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.date {\n  margin-top: 2rpx;\n  font-size: 24rpx;\n  vertical-align: middle;\n  color: #999;\n}\n.title {\n  font-size: 36rpx;\n  font-weight: 700;\n  letter-spacing: 2px;\n  margin-bottom: 5rpx;\n  color: #4b556c;\n}\n.tool {\n  width: 90%;\n  line-height: 65rpx;\n  margin: 3vh auto 0;\n  font-size: 34rpx;\n  word-break: break-all;\n  overflow: hidden;\n}\n.circle-img {\n  float: right;\n  margin-right: 40rpx;\n  vertical-align: middle;\n}\n\n/* .circle-img image{\n  width: 90rpx;\n  height: 90rpx;\n}\n.share-img{\n  margin-left: 30rpx;\n} */\n.activityD {\n  display: flex;\n  flex-direction: column;\n  width: 90%;\n  margin: 3vh auto 0;\n  /* margin:10px 0; */\n}\n.horizon {\n  width: 660rpx;\n  height: 1px;\n  background-color: #e5e5e5;\n  vertical-align: middle;\n  position: relative;\n  top: 46rpx;\n  margin: 0 auto;\n  z-index: -99;\n}\n\n.detail {\n  color: #666;\n  margin-left: 30rpx;\n  margin-top: 20rpx;\n  margin-right: 30rpx;\n  line-height: 44rpx;\n  letter-spacing: 2px;\n}\n\n/* 评论 */\n.discuss-view {\n  background: rgb(241, 241, 241);\n  width: 100%;\n  margin-top: 10rpx;\n  border-top: 1px solid rgb(213, 213, 213);\n  min-height: 20rpx;\n  border-bottom-left-radius: 10rpx;\n  border-bottom-right-radius: 10rpx;\n}\n\n.discuss {\n  background: rgb(241, 241, 241);\n  width: 90%;\n  margin: 0 auto;\n  padding-top: 10rpx;\n  padding-bottom: 8rpx;\n  word-break: break-all;\n  white-space: normal;\n  overflow: hidden;\n}\n\n.discuss label {\n  font-size: 30rpx;\n}\n\n.discuss-user {\n  color: rgb(88, 103, 138);\n}\n\n.content {\n  margin-left: 10rpx;\n}\n.wrapper {\n  border-radius: 10rpx;\n  width: 90%;\n  margin: 3vh auto;\n  background-color: rgb(241, 241, 241);\n}\n.TLC {\n  font-size: 29rpx;\n  width: 90%;\n  margin: 0 auto;\n  padding-bottom: 10rpx;\n  /* border-bottom: 1px solid rgb(213, 213, 213); */\n  height: 70rpx;\n  line-height: 70rpx;\n  display: flex;\n  flex-wrap: row;\n  align-items: center;\n  justify-content: space-between;\n  /* background-color: rgb(241, 241, 241); */\n  /* */\n}\n.TlC > view {\n  display: flex;\n  align-items: center;\n}\n.dianzannum {\n  display: flex;\n  flex-wrap: row;\n}\n.zan-name-view {\n  background-color: rgb(241, 241, 241);\n  width: 90%;\n  margin: 0 auto;\n  padding-bottom: 10rpx;\n  margin-bottom: 10rpx;\n  overflow-wrap: break-word;\n}\n.zan-user {\n  font-size: 24rpx;\n  line-height: 40rpx;\n  height: 40rpx;\n  color: rgb(88, 103, 138);\n}\n.input-view {\n  display: flex;\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n\n  background-color: white;\n}\n.inputstyle {\n  width: 80%;\n  height: 40px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n\n  padding-left: 5px;\n}\n.btn-view {\n  height: 40px;\n  font-size: medium;\n  border: 1px solid #ccc;\n}\n</style>\n","import MiniProgramPage from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/recommend/recommendDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getRecommedDetail","onLoad","sendLike","deletLike","uni","wx","sendcommen"],"mappings":";;;;;;;;;;;;;;;;;;;;;AA4FM,UAAA,UAAUA,kBAAI,CAAA,CAAE;AAChB,UAAA,OAAO,OAAO,OAAO;AACnB,YAAA,MAAM,MAAMC,oCAAkB,EAAE;AACtC,cAAQ,IAAI,GAAG;AACf,cAAQ,QAAQ,IAAI;AAAA,IAAA;AAEtBC,kBAAAA,OAAO,MAAM;AACX,WAAK,MAAM,EAAE;AAAA,IAAA,CACd;AAGK,UAAA,aAAa,OAAO,OAAO;AACzB,YAAA,MAAM,MAAMC,2BAAS,EAAE;AAC7B,cAAQ,IAAI,GAAG;AACX,UAAA,IAAI,QAAQ,KAAK;AACnB,aAAK,MAAM,EAAE;AAAA,MACf;AAAA,IAAA;AAEI,UAAA,UAAU,OAAO,OAAO;AACtB,YAAA,MAAM,MAAMC,4BAAU,EAAE;AAC9B,cAAQ,IAAI,GAAG;AACX,UAAA,IAAI,QAAQ,KAAK;AACnB,aAAK,MAAM,EAAE;AAAA,MACf;AAAA,IAAA;AAEI,UAAA,QAAQ,CAAC,IAAI,YAAY;AACzB,UAAAC,cAAA,MAAI,eAAe,OAAO,GAAG;AAC/B,YAAI,SAAS;AACX,kBAAQ,IAAI,OAAO;AACnB,kBAAQ,EAAE;AAAA,QAAA,OACL;AACL,kBAAQ,IAAI,IAAI;AAChB,qBAAW,EAAE;AAAA,QACf;AAAA,MAAA,OACK;AACLC,sBAAAA,KAAG,UAAU;AAAA,UACX,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU,MAAM;AACd,uBAAW,MAAM;AACfD,4BAAAA,MAAI,WAAW;AAAA,gBACb,KAAK;AAAA,cAAA,CACN;AAAA,eACA,GAAI;AAAA,UACT;AAAA,QAAA,CACD;AAAA,MACH;AAAA,IAAA;AAII,UAAA,YAAYL,kBAAI,KAAK;AACrB,UAAA,UAAUA,kBAAI,EAAE;AACtB,UAAM,gBAAgBA,cAAAA;AAEhB,UAAA,iBAAiBA,kBAAI,IAAI;AACzB,UAAA,eAAe,CAAC,WAAW;AAC3B,UAAAK,cAAA,MAAI,eAAe,OAAO,GAAG;AAC/B,gBAAQ,IAAI,IAAI;AAChB,gBAAQ,IAAI,MAAM;AAClB,kBAAU,QAAQ;AAClB,sBAAc,QAAQ;AAAA,MAAA,OACjB;AACLC,sBAAAA,KAAG,UAAU;AAAA,UACX,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU,MAAM;AACd,uBAAW,MAAM;AACfD,4BAAAA,MAAI,WAAW;AAAA,gBACb,KAAK;AAAA,cAAA,CACN;AAAA,eACA,GAAI;AAAA,UACT;AAAA,QAAA,CACD;AAAA,MACH;AAAA,IAAA;AAEF,UAAM,QAAQ,YAAY;AAClB,YAAA,MAAM,MAAME,6BAAW;AAAA,QAC3B,SAAS,QAAQ;AAAA,QACjB,aAAa,cAAc;AAAA,MAAA,CAC5B;AACD,cAAQ,IAAI,GAAG;AACX,UAAA,IAAI,QAAQ,KAAK;AACnB,kBAAU,QAAQ;AAElB,kBAAU,QAAQ;AAElB,gBAAQ,QAAQ;AAChB,aAAK,MAAM,EAAE;AAAA,MACf;AAAA,IAAA;AAEF,UAAM,cAAc,MAAM;AACxB,cAAQ,IAAI,OAAO;AACX,cAAA,IAAI,cAAc,KAAK;AACzB;IAAA;AAER,UAAM,YAAY,MAAM;AACtB,gBAAU,QAAQ;AAElB,gBAAU,QAAQ;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/LpB,GAAG,WAAW,eAAe;"}