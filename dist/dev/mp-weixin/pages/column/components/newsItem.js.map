{"version":3,"file":"newsItem.js","sources":["../../../../../../src/pages/column/components/newsItem.vue","../../../../../../uniComponent:/L1VzZXJzL3doaGJiYi9Eb2N1bWVudHMvUHJvamVjdC1zdG9yYWdlL3hzd2NfZ2FtZS9zcmMvcGFnZXMvY29sdW1uL2NvbXBvbmVudHMvbmV3c0l0ZW0udnVl"],"sourcesContent":["<template>\n  <PageSkeleton v-if=\"showSkeleton\"></PageSkeleton>\n  <navigator\n    v-else-if=\"!showSkeleton && columnContents.length > 0\"\n    :url=\"`/pages/column/components/article?kind=${item.kind}&id=${item.id}`\"\n    class=\"post-container\"\n    hover-class=\"none\"\n    v-for=\"(item, index) in columnContents\"\n    :key=\"item.id\"\n  >\n    <!--  -->\n    <image class=\"post-image\" :src=\"item.img\" mode=\"scaleToFill\"></image>\n    <view class=\"post-right\">\n      <text class=\"post-title\">{{ item.title }}</text>\n      <!-- <text class=\"post-content\">{{ item.summary }}</text> -->\n      <view class=\"post-like\">\n        <view class=\"time\">\n          <text>{{ item.createTime }}</text>\n        </view>\n      </view>\n      <view class=\"hit\">\n        <view class=\"hit-inner\">\n          <image class=\"post-like-image\" src=\"../../../static/column/eyes.png\"></image>\n          <text class=\"post-like-font\">{{ item.viewsNums }}</text>\n        </view>\n        <view class=\"hit-inner\">\n          <image\n            v-if=\"!item.tblLike\"\n            class=\"post-like-image\"\n            @tap.stop=\"likeUp(item.id, item.tblLike)\"\n            src=\"../../../static/column/heart.png\"\n          ></image>\n          <image\n            v-else\n            class=\"post-like-image\"\n            @tap.stop=\"likeUp(item.id, item.tblLike)\"\n            src=\"../../../static/column/heart-active.png\"\n          ></image>\n          <text class=\"post-like-font\">{{ item.likeCount }}</text>\n        </view>\n      </view>\n    </view>\n    <view class=\"icon\">\n      <uni-icons type=\"right\" size=\"20\"></uni-icons>\n    </view>\n  </navigator>\n  <view v-else>\n    <view class=\"no-content\">\n      <!-- <uni-icons type=\"notice\" size=\"40\"></uni-icons>\n      <text>暂无数据</text> -->\n    </view>\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch, onMounted } from 'vue'\nimport { getColumnsAPI, likeUpAPI, likeDownAPI } from '@/services/column'\nimport { onShow } from '@dcloudio/uni-app'\nimport PageSkeleton from '@/pages/column/PageSkeleton.vue'\ntype columnItem = {\n  // 精彩专栏编号\n  id: number\n  // 精彩专栏标题\n  title: string\n  // 精彩专栏种类\n  kind?: string\n  // 简介\n  summary?: string\n  // 内容\n  content: string\n  // 点赞数\n  likeCount: number\n  // 浏览数\n  viewsNums: number\n  // 创建时间\n  createTime: string\n  // 图片\n  img: string\n  // 点赞状态\n  tblLike?: object\n}\nconst props = defineProps({\n  kind: {\n    type: Number,\n    default: 1,\n  },\n})\n// 判断是否显示骨架屏\nconst showSkeleton = ref(true)\nconst columnContents = ref<columnItem[]>([])\n// 点赞或取消点赞\nconst likeUp = (id: number, tblLike: object) => {\n  // 判断是否有token\n  if (uni.getStorageSync('token')) {\n    if (tblLike) {\n      console.log('取消点赞' + props.kind)\n      likeDownAPI(id).then((res) => {\n        console.log(res)\n        if (res.code === 200) {\n          getColumns(props.kind)\n          console.log('取消点赞成功')\n        }\n      })\n    } else {\n      console.log('点赞' + props.kind)\n      likeUpAPI(id).then((res) => {\n        console.log(res)\n        if (res.code === 200) {\n          getColumns(props.kind)\n          console.log('点赞成功')\n        }\n      })\n    }\n  } else {\n    wx.showToast({\n      title: '您尚未登录，请先登录',\n      icon: 'none',\n      duration: 1000,\n      complete: () => {\n        setTimeout(() => {\n          uni.navigateTo({\n            url: '/pages/login/login',\n          })\n        }, 1000)\n      },\n    })\n  }\n}\n// 获取数据\nconst getColumns = async (kind: Number) => {\n  const res = await getColumnsAPI({ kind: kind })\n  console.log(res)\n  if (res.code === 200) {\n    columnContents.value = res.rows\n    showSkeleton.value = false\n  } else {\n    uni.showToast({\n      title: '获取数据失败',\n      icon: 'none',\n    })\n  }\n}\nonMounted(() => {\n  console.log(props.kind)\n  getColumns(props.kind)\n})\nonShow(() => {\n  getColumns(props.kind)\n})\n</script>\n\n<style lang=\"scss\">\n.post-container {\n  display: flex;\n  width: 90%;\n  margin: 0 auto;\n  margin-top: 20rpx;\n  // margin-bottom: 40rpx;\n  background-color: #fff;\n  border-bottom: 1px solid #d9d9d9;\n  padding-bottom: 20rpx;\n  .icon{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 5%;\n  }\n}\n\n.post-image {\n  width: 40%;\n  height: 180rpx;\n  margin: 0 auto;\n  border-radius: 10rpx;\n  margin: 10rpx 10rpx 10rpx 0;\n}\n.post-right{\n  margin: 15rpx 0 15rpx 0;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  .post-title {\n    width: 45vw;\n    white-space: nowrap; /* 禁止换行 */\n    overflow: hidden; /* 超出部分隐藏 */\n    text-overflow: ellipsis; /* 显示省略号 */\n    font-size: 32rpx;\n    font-weight: 600;\n    color: #333;\n    padding-left: 10rpx;\n  }\n}\n\n.post-content {\n  color: #666;\n  font-size: 28rpx;\n  margin-bottom: 20rpx;\n  line-height: 40rpx;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.post-like {\n  display: flex;\n  font-size: 13px;\n  line-height: 16px;\n}\n\n.hit {\n  flex: 1;\n  display: flex;\n  align-items: flex-end;\n  width: 100px;\n  padding-left: 12rpx;\n  .hit-inner{\n    width: 90rpx;\n    display: flex;\n    align-items: center;\n    margin-right: 30rpx;\n  }\n}\n\n.time {\n  color: #7a7a7a;\n  font-size: 25rpx;\n  padding-left: 10rpx;\n}\n\n.post-like-image {\n  font-size: 15rpx;\n  width: 30rpx;\n  height: 30rpx;\n  margin-right: 10rpx;\n}\n\n.post-like-font {\n  font-size: 28rpx;\n}\n</style>\n","import Component from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/column/components/newsItem.vue'\nwx.createComponent(Component)"],"names":["ref","uni","likeDownAPI","likeUpAPI","wx","getColumnsAPI","onMounted","onShow"],"mappings":";;;;;;;;;;;;;;AA0DA,MAAA,eAAyB,MAAA;;;;;;;;;;;AA8BnB,UAAA,eAAeA,kBAAI,IAAI;AACvB,UAAA,iBAAiBA,kBAAkB,CAAA,CAAE;AAErC,UAAA,SAAS,CAAC,IAAY,YAAoB;AAE1C,UAAAC,cAAA,MAAI,eAAe,OAAO,GAAG;AAC/B,YAAI,SAAS;AACH,kBAAA,IAAI,SAAS,MAAM,IAAI;AAC/BC,0BAAAA,YAAY,EAAE,EAAE,KAAK,CAAC,QAAQ;AAC5B,oBAAQ,IAAI,GAAG;AACX,gBAAA,IAAI,SAAS,KAAK;AACpB,yBAAW,MAAM,IAAI;AACrB,sBAAQ,IAAI,QAAQ;AAAA,YACtB;AAAA,UAAA,CACD;AAAA,QAAA,OACI;AACG,kBAAA,IAAI,OAAO,MAAM,IAAI;AAC7BC,0BAAAA,UAAU,EAAE,EAAE,KAAK,CAAC,QAAQ;AAC1B,oBAAQ,IAAI,GAAG;AACX,gBAAA,IAAI,SAAS,KAAK;AACpB,yBAAW,MAAM,IAAI;AACrB,sBAAQ,IAAI,MAAM;AAAA,YACpB;AAAA,UAAA,CACD;AAAA,QACH;AAAA,MAAA,OACK;AACLC,sBAAAA,KAAG,UAAU;AAAA,UACX,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU,MAAM;AACd,uBAAW,MAAM;AACfH,4BAAAA,MAAI,WAAW;AAAA,gBACb,KAAK;AAAA,cAAA,CACN;AAAA,eACA,GAAI;AAAA,UACT;AAAA,QAAA,CACD;AAAA,MACH;AAAA,IAAA;AAGI,UAAA,aAAa,OAAO,SAAiB;AACzC,YAAM,MAAM,MAAMI,gBAAAA,cAAc,EAAE,KAAY,CAAA;AAC9C,cAAQ,IAAI,GAAG;AACX,UAAA,IAAI,SAAS,KAAK;AACpB,uBAAe,QAAQ,IAAI;AAC3B,qBAAa,QAAQ;AAAA,MAAA,OAChB;AACLJ,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AAAA,MACH;AAAA,IAAA;AAEFK,kBAAAA,UAAU,MAAM;AACN,cAAA,IAAI,MAAM,IAAI;AACtB,iBAAW,MAAM,IAAI;AAAA,IAAA,CACtB;AACDC,kBAAAA,OAAO,MAAM;AACX,iBAAW,MAAM,IAAI;AAAA,IAAA,CACtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnJD,GAAG,gBAAgB,SAAS;"}