{"version":3,"file":"editPassword.js","sources":["../../../../../../src/pages/my/components/editPassword.vue","../../../../../../uniPage:/cGFnZXMvbXkvY29tcG9uZW50cy9lZGl0UGFzc3dvcmQudnVl"],"sourcesContent":["<template>\n  <view class=\"viewport\">\n    <view class=\"logo\">\n      <image src=\"../../static/log.png\"></image>\n    </view>\n    <view class=\"login-content\">\n      <uni-easyinput class=\"input\" v-model=\"usedPassword\" type=\"password\" placeholder=\"旧密码\" />\n      <uni-easyinput class=\"input\" v-model=\"newPassword\" type=\"password\" placeholder=\"新密码\" />\n    </view>\n    <view class=\"login\">\n      <button class=\"button phone\" @tap=\"edit\">\n        <text class=\"icon icon-phone\"></text>\n        修改\n      </button>\n    </view>\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive } from 'vue'\nimport { changePassword } from '@/services/personalInf'\n\nconst usedPassword = ref('')\nconst newPassword = ref('')\n\nconst editPassword = async () => {\n  const res = await changePassword({\n    oldpassword: usedPassword.value,\n    password: newPassword.value,\n  })\n  if (res.code === 200 && res.msg !== '密码错误') {\n    uni.showToast({\n      title: '修改成功',\n      icon: 'success',\n      duration: 1000,\n    })\n    setTimeout(() => {\n      uni.switchTab({\n        url: '/pages/index/index',\n      })\n    }, 1000)\n    wx.removeStorage({key:'userPass_password'})\n  } else if (res.msg === '密码错误') {\n    uni.showToast({\n      title: '原密码错误',\n      icon: 'error',\n      duration: 1000,\n    })\n  } else {\n    uni.showToast({\n      title: '修改失败',\n      icon: 'error',\n      duration: 1000,\n    })\n  }\n}\n\nconst edit = () => {\n  if (usedPassword.value === '') {\n    uni.showToast({\n      title: '请输入旧密码',\n      icon: 'error',\n    })\n    return\n  } else if (newPassword.value === '') {\n    uni.showToast({\n      title: '请输入新密码',\n      icon: 'error',\n    })\n    return\n  } else if (newPassword.value === usedPassword.value) {\n    uni.showToast({\n      title: '新旧密码相同',\n      icon: 'error',\n    })\n    return\n  } else {\n    editPassword()\n  }\n}\n</script>\n<style scoped lang=\"scss\">\npage {\n  height: 100%;\n}\n\n.viewport {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  padding: 20rpx 40rpx;\n\n  .login-content {\n    width: 80%;\n    height: 300rpx;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    margin-top: 20rpx;\n\n    .input {\n      width: 100%;\n    }\n  }\n}\n\n.logo {\n  flex: 1;\n  text-align: center;\n  margin-bottom: 60rpx;\n\n  image {\n    width: 220rpx;\n    height: 220rpx;\n    margin-top: 10vh;\n  }\n}\n\n.login {\n  width: 90%;\n  display: flex;\n  flex-direction: column;\n  height: 60vh;\n  padding: 40rpx 20rpx 20rpx;\n\n  .button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 80rpx;\n    font-size: 28rpx;\n    border-radius: 72rpx;\n    color: #fff;\n\n    .icon {\n      font-size: 40rpx;\n      margin-right: 6rpx;\n    }\n  }\n\n  .phone {\n    background-color: #06afe3;\n  }\n\n  .wechat {\n    background-color: #06c05f;\n\n    .options {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      margin-top: 70rpx;\n\n      button {\n        padding: 0;\n        background-color: transparent;\n      }\n    }\n\n    .icon {\n      font-size: 24rpx;\n      color: #444;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n\n      &::before {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 80rpx;\n        height: 80rpx;\n        margin-bottom: 6rpx;\n        font-size: 40rpx;\n        border: 1rpx solid #444;\n        border-radius: 50%;\n      }\n    }\n\n    .icon-weixin::before {\n      border-color: #06c05f;\n      color: #06c05f;\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/my/components/editPassword.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","changePassword","uni","wx"],"mappings":";;;;;;;;;;;;;;;;;AAsBM,UAAA,eAAeA,kBAAI,EAAE;AACrB,UAAA,cAAcA,kBAAI,EAAE;AAE1B,UAAM,eAAe,YAAY;AACzB,YAAA,MAAM,MAAMC,oCAAe;AAAA,QAC/B,aAAa,aAAa;AAAA,QAC1B,UAAU,YAAY;AAAA,MAAA,CACvB;AACD,UAAI,IAAI,SAAS,OAAO,IAAI,QAAQ,QAAQ;AAC1CC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AACD,mBAAW,MAAM;AACfA,wBAAAA,MAAI,UAAU;AAAA,YACZ,KAAK;AAAA,UAAA,CACN;AAAA,WACA,GAAI;AACPC,sBAAAA,KAAG,cAAc,EAAC,KAAI,oBAAoB,CAAA;AAAA,MAAA,WACjC,IAAI,QAAQ,QAAQ;AAC7BD,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AAAA,MAAA,OACI;AACLA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AAAA,MACH;AAAA,IAAA;AAGF,UAAM,OAAO,MAAM;AACb,UAAA,aAAa,UAAU,IAAI;AAC7BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MAAA,WACS,YAAY,UAAU,IAAI;AACnCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MACS,WAAA,YAAY,UAAU,aAAa,OAAO;AACnDA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MAAA,OACK;AACQ;MACf;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;AC7EF,GAAG,WAAW,eAAe;"}