{"version":3,"file":"giftCenter.js","sources":["../../../../../src/pages/gift/giftCenter.vue","../../../../../uniPage:/cGFnZXMvZ2lmdC9naWZ0Q2VudGVyLnZ1ZQ"],"sourcesContent":["<template>\n  <PageSkeleton v-if=\"showSkeleton\" />\n  <view v-else class=\"container\">\n    <!-- tab导航栏 -->\n    <view class=\"nav\">\n      <navigator class=\"nav-item\" url=\"/pages/gift/components/orderList\" open-type=\"navigate\" hover-class=\"none\">\n        <view class=\"change\">\n          兑换记录\n        </view>\n      </navigator>\n      <navigator class=\"credit\" :url=\"`/pages/my/components/history?creditNum=${credit}`\">\n        <image class=\"credit-img\" src=\"../../static//gifts/blue-score.png\" mode=\"scaleToFill\" />\n        <view class=\"credit-num\">\n          {{ credit }}\n          <!-- 10000 -->\n        </view>\n        <view class=\"credit-right\">\n          <image class=\"credit-right-img\" src=\"../../static/my/blue-arrow-right.png\" mode=\"heightFix\" />\n        </view>\n      </navigator>\n    </view>\n    <view>\n      <view class=\"content\">\n        <view class=\"left\">\n          <template v-for=\"(item, index) in list\" :key=\"index\">\n            <view @click=\"goToGoodsDetail(item.id)\" class=\"item\" v-if=\"index % 2 === 0\">\n              <image class=\"item-img\" :src=\"item.coverPicture\" mode=\"widthFix\"></image>\n              <view class=\"item-title-box\">\n                <view class=\"item-title goodsname\">{{ item.name }}</view>\n              </view>\n              <view class=\"item-title-box\">\n                <view class=\"item-title\">{{ item.introduce }}</view>\n              </view>\n              <view class=\"name\">\n                <image class=\"item-ava\" src=\"../../static/gifts/R-C.jpg\"></image>\n                <text class=\"name-title\">{{ item.price }}</text>\n                <view class=\"heart\">\n                  <text></text>\n                </view>\n              </view>\n            </view>\n          </template>\n        </view>\n        <view class=\"right\">\n          <template v-for=\"(item, index) in list\" :key=\"index\">\n            <view @click=\"goToGoodsDetail(item.id)\" class=\"item\" v-if=\"index % 2 === 1\">\n              <image class=\"item-img\" :src=\"item.coverPicture\" mode=\"widthFix\"></image>\n              <view class=\"item-title-box\">\n                <view class=\"item-title goodsname\">{{ item.name }}</view>\n              </view>\n              <view class=\"item-title-box\">\n                <view class=\"item-title\">{{ item.introduce }}</view>\n              </view>\n              <view class=\"name\">\n                <image class=\"item-ava\" src=\"../../static/gifts/R-C.jpg\"></image>\n                <text class=\"name-title\">{{ item.price }}</text>\n                <view class=\"heart\">\n                  <text></text>\n                </view>\n              </view>\n            </view>\n          </template>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport PageSkeleton from './PageSkeleton.vue'\nimport { ref, reactive, computed } from 'vue'\nimport { getGiftList } from '@/services/gift'\nimport { onLoad, onShow } from '@dcloudio/uni-app'\nimport { getPersonalInf } from '@/services/personalInf'\n\n//过审\n// 获取当前时间点\n// const currentTime = ref(new Date())\n\n// 计算2023年11月17号的时间点\n// const targetDate = new Date('2023-11-23')\n\n// 判断当前时间是否已经过了2023年11月18号\n// import { getAudit } from '@/services/Audit'\n// const isPastTargetDate = ref<boolean>(true)\n// const getA = async () => {\n//   const res = await getAudit()\n//   console.log(res)\n//   isPastTargetDate.value = res.data\n//   if (!isPastTargetDate.value) {\n//     uni.showToast({\n//       title: '推荐礼品功能尚未实现，敬请期待~',\n//       icon: 'none',\n//       duration: 2000,\n//       complete: function () {\n//         setTimeout(function () {\n//           uni.switchTab({\n//             url: '/pages/index/index',\n//           })\n//         }, 2000) // 在弹窗关闭后，延迟2秒执行页面跳转\n//       },\n//     })\n//   } else {\n//     getGiftLists()\n//   }\n// }\nconst credit = ref()\nconst list = ref([])\n// 是否显示骨架屏\nconst showSkeleton = ref(true)\n\nconst getPersonal = async () => {\n  const res = await getPersonalInf()\n  console.log(res)\n  credit.value = res.data.credit\n}\nonShow(() => {\n  // getA()\n  getGiftLists()\n  getPersonal()\n})\n\nconst getGiftLists = async () => {\n  const res = await getGiftList()\n  showSkeleton.value = false\n  console.log(res.rows)\n  list.value = res.rows\n}\nconst goToGoodsDetail = (id) => {\n  // if (uni.getStorageSync('token')) {\n  //   console.log(id)\n  //   console.log('去商品详情页')\n  uni.navigateTo({\n    url: '/pages/gift/gift?id=' + id,\n  })\n  // } else {\n  //   uni.showToast({\n  //     title: '您尚未登录，请先登录',\n  //     icon: 'none',\n  //     duration: 1000,\n  //     complete: () => {\n  //       setTimeout(() => {\n  //         uni.navigateTo({\n  //           url: '/pages/login/login',\n  //         })\n  //       }, 1000)\n  //     },\n  //   })\n  // }\n}\n</script>\n\n<style scoped lang=\"scss\">\n/**index.wxss**/\npage {\n  width: 100%;\n  height: 100%;\n}\n\n.container {\n  width: 90%;\n  margin: 0 auto;\n  height: 100vh;\n  padding-top: 40rpx;\n}\n\n.nav {\n  /* 设置tab-nav宽高度 */\n  width: 100%;\n  height: 105rpx;\n  padding: 20rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  .nav-item {\n    flex: 1;\n    display: flex;\n    justify-content: flex-start;\n    .change{\n      text-align: center;\n      width: 160rpx;\n      padding: 16rpx;\n      border-radius: 15rpx;\n      background-color: rgb(214, 244, 251);\n      font-size: 30rpx;\n      color: #0077b6;\n      box-shadow: 0 0 20px #e5e4e4;\n    }\n  }\n\n  .credit {\n    display: flex;\n    justify-content: end;\n    padding: 40rpx;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: rgb(214, 244, 251);\n    border-radius: 20rpx;\n    box-shadow: 0 0 20px #e5e4e4;\n\n    .credit-img {\n      width: 30rpx;\n      height: 30rpx;\n      margin-right: 8rpx;\n    }\n\n    .credit-num {\n      font-size: 35rpx;\n      color: #0077b6;\n    }\n\n    .credit-right {\n      display: flex;\n      align-items: center;\n      margin-left: 18rpx;\n\n      .credit-right-img {\n        height: 25rpx;\n      }\n    }\n  }\n}\n\n.tab-box {\n  background: rgb(31, 201, 96);\n  /* 这里设置成nav的高度 */\n  padding-top: 80rpx;\n  height: 100%;\n  box-sizing: border-box;\n}\n\n.tab-content {\n  /* 裁剪 div 元素中内容的左/右边缘 - 如果溢出元素的内容区域的话： */\n  overflow-y: scroll;\n}\n\n\n.item {\n  background-color: #fff;\n  margin-bottom: 20rpx;\n  display: inline-block;\n  width: 96%;\n  border-radius: 20rpx;\n  overflow: hidden;\n  box-shadow: 0 0 20px #e5e4e4;\n}\n\n.item-ava {\n  width: 40rpx;\n  height: 40rpx;\n  border-radius: 20rpx;\n}\n\n.heart {\n  width: 30rpx;\n  height: 26rpx;\n  margin-right: 8rpx;\n}\n\n.heart {\n  display: flex;\n  align-items: center;\n}\n\n.item-img {\n  width: 100%;\n}\n\n.item-title {\n  font-size: 24rpx;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n  font-family: 'PingFang SC-Medium';\n  color: #1e1e1e;\n  margin: 15rpx;\n  line-height: 27rpx;\n}\n\n.goodsname {\n  font-size: 30rpx;\n  line-height: 35rpx;\n}\n\n.item .name {\n  display: flex;\n  padding: 0 15rpx;\n  margin-top: 20rpx;\n  padding-bottom: 10rpx;\n  align-items: center;\n  font-size: 22rpx;\n  color: #1e1e1e;\n  font-family: 'PingFang SC-Medium';\n}\n\n.name image {\n  flex: 0 0 auto;\n}\n\n.item-title-box {\n  display: flex;\n  position: relative;\n}\n\n.name-title {\n  flex: 1;\n  margin-left: 18rpx;\n  margin-right: 20rpx;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n\n.name text:last-child {\n  color: #c4c4c4;\n  text-decoration: underline;\n  line-height: 10rpx;\n}\n\n.content {\n  display: flex;\n  justify-content: space-between;\n\n  .left,\n  .right {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 50%;\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/gift/giftCenter.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getPersonalInf","onShow","getGiftList","uni"],"mappings":";;;;;;;;;;AAqEA,MAAA,eAAyB,MAAA;;;;AAqCzB,UAAM,SAASA,cAAAA;AACT,UAAA,OAAOA,kBAAI,CAAA,CAAE;AAEb,UAAA,eAAeA,kBAAI,IAAI;AAE7B,UAAM,cAAc,YAAY;AACxB,YAAA,MAAM,MAAMC,qBAAAA;AAClB,cAAQ,IAAI,GAAG;AACR,aAAA,QAAQ,IAAI,KAAK;AAAA,IAAA;AAE1BC,kBAAAA,OAAO,MAAM;AAEE;AACD;IAAA,CACb;AAED,UAAM,eAAe,YAAY;AACzB,YAAA,MAAM,MAAMC,cAAAA;AAClB,mBAAa,QAAQ;AACb,cAAA,IAAI,IAAI,IAAI;AACpB,WAAK,QAAQ,IAAI;AAAA,IAAA;AAEb,UAAA,kBAAkB,CAAC,OAAO;AAI9BC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,yBAAyB;AAAA,MAAA,CAC/B;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrIH,GAAG,WAAW,eAAe;"}