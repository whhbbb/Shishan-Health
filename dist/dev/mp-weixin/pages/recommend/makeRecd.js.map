{"version":3,"file":"makeRecd.js","sources":["../../../../../src/pages/recommend/makeRecd.vue","../../../../../uniPage:/cGFnZXMvcmVjb21tZW5kL21ha2VSZWNkLnZ1ZQ"],"sourcesContent":["<template>\n  <!-- <view v-if=\"isPastTargetDate\" class=\"container\">\n    <view class=\"text-view\">请输入活动主题</view>\n    <textarea\n      auto-focus=\"true\"\n      auto-height=\"true\"\n      class=\"title\"\n      placeholder=\"活动主题\"\n      @input=\"getTInput\"\n    />\n    <view class=\"text-view\">请输入活动主讲人</view>\n\n    <textarea auto-height=\"true\" class=\"person\" placeholder=\"活动主讲人\" @input=\"getPInput\" />\n    <view class=\"text-view\">请输入推荐内容</view>\n\n    <textarea\n      maxlength=\"-1\"\n      auto-height=\"true\"\n      class=\"desc\"\n      placeholder=\"推荐内容\"\n      @input=\"getInput\"\n    />\n    <view class=\"b-view\" :style=\"{ bottom: safeAreaInsets?.bottom!+ 30 + 'px' }\">\n      <button type=\"primary\" @click=\"publish\">发布推荐</button>\n    </view>\n  </view> -->\n  <view class=\"wrapper\">\n    <view class=\"theme\">\n      <textarea\n        auto-focus=\"true\"\n        auto-height=\"true\"\n        class=\"title\"\n        placeholder=\"输入活动主题\"\n        @input=\"getTInput\"\n      ></textarea>\n    </view>\n    <view class=\"line\"></view>\n    <view class=\"detail\">\n      <textarea\n        maxlength=\"-1\"\n        auto-height=\"true\"\n        class=\"desc\"\n        placeholder=\"分享你的想法...\"\n        @input=\"getInput\"\n      ></textarea>\n    </view>\n    <view class=\"recommend\">\n      <view @tap=\"publish\" class=\"btn\">发布推荐</view>\n    </view>\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { newRecommend } from '@/services/recommed'\nimport { onLoad, onShow } from '@dcloudio/uni-app'\n//过审\n// 获取当前时间点\nconst currentTime = ref(new Date())\n\n// 计算2023年11月17号的时间点\nconst targetDate = new Date('2023-11-25')\n\n// 判断当前时间是否已经过了2023年11月18号\nimport { getAudit } from '@/services/Audit'\nconst isPastTargetDate = ref<boolean>(false)\nconst getA = async () => {\n  const res = await getAudit()\n  isPastTargetDate.value = res.data\n}\nonLoad(() => {\n  getA()\n})\n// 获取屏幕边界到安全区域距离\nconst { safeAreaInsets } = uni.getSystemInfoSync()\n\nconst title = ref('')\nconst person = ref('')\nconst desc = ref('')\n\nconst getTInput = (e) => {\n  title.value = e.detail.value\n}\nconst getPInput = (e) => {\n  person.value = e.detail.value\n}\nconst getInput = (e) => {\n  desc.value = e.detail.value\n}\nconst sendC = async () => {\n  const res = await newRecommend({\n    id: null,\n    content: desc.value,\n    lecturerName: person.value,\n    theme: title.value,\n  })\n  if (res.code == 200) {\n    uni.showToast({\n      title: '提交成功',\n      icon: 'success',\n      duration: 1000,\n      complete: () => {\n        setTimeout(() => {\n          uni.reLaunch({ url: '/pages/recommend/recommend' })\n          title.value = ''\n          person.value = ''\n          desc.value = ''\n        }, 1000)\n      },\n    })\n  } else {\n    uni.showToast({\n      title: '提交失败！',\n      icon: 'error',\n      duration: 1000,\n    })\n  }\n}\nconst publish = () => {\n  if (title.value === '') {\n    uni.showToast({\n      title: '请填写活动主题！',\n      icon: 'none',\n    })\n    return\n  } else if (desc.value === '') {\n    uni.showToast({\n      title: '请填写推荐理由',\n      icon: 'none',\n    })\n  } else {\n    sendC()\n  }\n}\n</script>\n<style lang=\"scss\">\npage{\n  width: 100%;\n  height: 100%;\n}\n.wrapper{\n  width: 100%;\n  padding: 25rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  .theme{\n    font-size: large;\n    width: 88%;\n  }\n  .line{\n    width: 100%;\n    height: 1px;\n    background-color: #e5e5e5;\n    margin: 25rpx auto;\n  }\n  .detail{\n    height: 72vh;\n    overflow: scroll;\n    width: 88%;\n    .desc{\n      width: 100%;\n    }\n  }\n  .recommend{\n    margin-top: 20rpx;\n    display: flex;\n    justify-content: center;\n    z-index: 1000;\n    width: 88%;\n    .btn{\n      width: 50%;\n      height: 100rpx;\n      background-color: rgb(214, 243, 251);\n      color: #0077b6;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      border-radius: 50rpx;\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/recommend/makeRecd.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getAudit","onLoad","uni","newRecommend"],"mappings":";;;;;;;;;;AA0DoBA,kBAAA,IAAQ,oBAAA,MAAM;AAO5B,UAAA,mBAAmBA,kBAAa,KAAK;AAC3C,UAAM,OAAO,YAAY;AACjB,YAAA,MAAM,MAAMC,eAAAA;AAClB,uBAAiB,QAAQ,IAAI;AAAA,IAAA;AAE/BC,kBAAAA,OAAO,MAAM;AACN;IAAA,CACN;AAE0BC,kBAAAA,MAAI,kBAAkB;AAE3C,UAAA,QAAQH,kBAAI,EAAE;AACd,UAAA,SAASA,kBAAI,EAAE;AACf,UAAA,OAAOA,kBAAI,EAAE;AAEb,UAAA,YAAY,CAAC,MAAM;AACjB,YAAA,QAAQ,EAAE,OAAO;AAAA,IAAA;AAKnB,UAAA,WAAW,CAAC,MAAM;AACjB,WAAA,QAAQ,EAAE,OAAO;AAAA,IAAA;AAExB,UAAM,QAAQ,YAAY;AAClB,YAAA,MAAM,MAAMI,+BAAa;AAAA,QAC7B,IAAI;AAAA,QACJ,SAAS,KAAK;AAAA,QACd,cAAc,OAAO;AAAA,QACrB,OAAO,MAAM;AAAA,MAAA,CACd;AACG,UAAA,IAAI,QAAQ,KAAK;AACnBD,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU,MAAM;AACd,uBAAW,MAAM;AACfA,4BAAAA,MAAI,SAAS,EAAE,KAAK,6BAA8B,CAAA;AAClD,oBAAM,QAAQ;AACd,qBAAO,QAAQ;AACf,mBAAK,QAAQ;AAAA,eACZ,GAAI;AAAA,UACT;AAAA,QAAA,CACD;AAAA,MAAA,OACI;AACLA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AAAA,MACH;AAAA,IAAA;AAEF,UAAM,UAAU,MAAM;AAChB,UAAA,MAAM,UAAU,IAAI;AACtBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MAAA,WACS,KAAK,UAAU,IAAI;AAC5BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AAAA,MAAA,OACI;AACC;MACR;AAAA,IAAA;;;;;;;;;;;ACnIF,GAAG,WAAW,eAAe;"}