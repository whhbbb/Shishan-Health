{"version":3,"file":"orderList.js","sources":["../../../../../../src/pages/gift/components/orderList.vue","../../../../../../uniComponent:/L1VzZXJzL3doaGJiYi9Eb2N1bWVudHMvUHJvamVjdC1zdG9yYWdlL3hzd2NfZ2FtZS9zcmMvcGFnZXMvZ2lmdC9jb21wb25lbnRzL29yZGVyTGlzdC52dWU"],"sourcesContent":["<template>\n  <view v-if=\"isLogin\" class=\"order-list\">\n    <view v-if=\"orders.length !== 0\" v-for=\"order in orders\" :key=\"order.id\" class=\"order-item\">\n      <image :src=\"order.coverPicture\" class=\"order-image\" />\n      <view class=\"order-details\">\n        <text class=\"order-name\">{{ order.name }}</text>\n        <text class=\"order-time\">兑换时间：{{ order.createTime }}</text>\n        <text class=\"order-time\">兑换个数：{{ order.nums }}</text>\n        <text v-if=\"order.state == 1\" class=\"order-status\">礼品状态:未领取</text>\n        <text v-else class=\"order-status\">礼品状态:已领取</text>\n        <text class=\"order-amount\">花费积分：{{ order.total }}</text>\n      </view>\n    </view>\n    <view class=\"noLogin\" v-else>\n      <uni-icons type=\"wallet\" size=\"90\"></uni-icons>\n      <view>兑换记录为空</view>\n    </view>\n  </view>\n  <view class=\"noLogin\" v-else>\n    <uni-icons type=\"person\" size=\"90\"></uni-icons>\n    <view @click=\"goLogin\">尚未登陆 , 点击登录</view>\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport { getGiftHistory } from '@/services/gift'\nimport { onLoad, onShow } from '@dcloudio/uni-app'\nimport { ref } from 'vue'\nonLoad(() => {\n  console.log('onload??')\n  if (uni.getStorageSync('token')) {\n    getHistory()\n  } else {\n    isLogin.value = false\n  }\n})\nonShow(() => {\n  if (uni.getStorageSync('token')) {\n    getHistory()\n  }\n})\nconst isLogin = ref<boolean>(true)\nconst goLogin = () => {\n  uni.navigateTo({\n    url: '/pages/login/login',\n  })\n}\nconst getHistory = async () => {\n  const res = await getGiftHistory()\n  console.log(res)\n  orders.value = res.rows\n}\nconst orders = ref([])\n</script>\n\n<style>\n.order-list {\n  width: 100vw;\n  padding: 2.5vw;\n}\n\n.order-item {\n  width: 95vw;\n  min-height: 17vh;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  display: flex;\n  align-items: center;\n  padding: 10rpx;\n  margin-bottom: 2vh;\n}\n\n.order-image {\n  width: 200rpx;\n  height: 200rpx;\n  margin-right: 5%;\n}\n\n.order-details {\n  max-width: 65%;\n  height: 200rpx;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  text-overflow: ellipsis;\n  word-break: break-all;\n}\n\n.order-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n  white-space: nowrap;\n  display: block;\n  line-height: 32rpx;\n  font-size: 32rpx;\n  font-weight: bold;\n}\n\n.order-time {\n  color: gray;\n  font-size: 26rpx;\n}\n\n.order-status {\n  font-size: 24rpx;\n}\n\n.order-amount {\n  font-weight: bold;\n  font-size: 24rpx;\n}\n.noLogin {\n  padding: 40px;\n  text-align: center;\n}\n</style>\n","import Component from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/gift/components/orderList.vue'\nwx.createComponent(Component)"],"names":["onLoad","uni","onShow","ref","getGiftHistory"],"mappings":";;;;;;;;;;;;;;;;;AA4BAA,kBAAAA,OAAO,MAAM;AACX,cAAQ,IAAI,UAAU;AAClB,UAAAC,cAAA,MAAI,eAAe,OAAO,GAAG;AACpB;MAAA,OACN;AACL,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IAAA,CACD;AACDC,kBAAAA,OAAO,MAAM;AACP,UAAAD,cAAA,MAAI,eAAe,OAAO,GAAG;AACpB;MACb;AAAA,IAAA,CACD;AACK,UAAA,UAAUE,kBAAa,IAAI;AACjC,UAAM,UAAU,MAAM;AACpBF,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MAAA,CACN;AAAA,IAAA;AAEH,UAAM,aAAa,YAAY;AACvB,YAAA,MAAM,MAAMG,cAAAA;AAClB,cAAQ,IAAI,GAAG;AACf,aAAO,QAAQ,IAAI;AAAA,IAAA;AAEf,UAAA,SAASD,kBAAI,CAAA,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnDrB,GAAG,gBAAgB,SAAS;"}