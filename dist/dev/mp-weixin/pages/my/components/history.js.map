{"version":3,"file":"history.js","sources":["../../../../../../src/pages/my/components/history.vue","../../../../../../uniPage:/cGFnZXMvbXkvY29tcG9uZW50cy9oaXN0b3J5LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"noHistory\" v-if=\"history.length == 0\">\r\n    <view class=\"noH\">暂无记录……</view>\r\n  </view>\r\n  <view v-else>\r\n    <uni-list v-for=\"(item, index) in history\" :key=\"index\">\r\n      <uni-list-item\r\n        :title=\"item.creditNum > 0 ? '+' + item.creditNum : item.creditNum\"\r\n        :note=\"item.createTime\"\r\n        :rightText=\"CType(item.creditType)\"\r\n        style=\"padding: 2vh 0\"\r\n      >\r\n        <template v-slot:header>\r\n          <uni-icons\r\n            v-if=\"item.creditType == 2\"\r\n            style=\"margin-right: 2vw\"\r\n            class=\"icons\"\r\n            type=\"flag-filled\"\r\n            color=\"#92aff0\"\r\n            size=\"25\"\r\n          ></uni-icons>\r\n          <uni-icons\r\n            v-else-if=\"item.creditType == 3\"\r\n            style=\"margin-right: 2vw\"\r\n            class=\"icons\"\r\n            type=\"chatboxes-filled\"\r\n            color=\"#f1e9e4\"\r\n            size=\"25\"\r\n          ></uni-icons>\r\n          <uni-icons\r\n            v-else-if=\"item.creditType == 4\"\r\n            style=\"margin-right: 2vw\"\r\n            class=\"icons\"\r\n            type=\"hand-up-filled\"\r\n            color=\"#c5daf0\"\r\n            size=\"25\"\r\n          ></uni-icons>\r\n          <uni-icons\r\n            v-else\r\n            style=\"margin-right: 2vw\"\r\n            class=\"icons\"\r\n            type=\"gift-filled\"\r\n            color=\"#f5c7c3\"\r\n            size=\"25\"\r\n          ></uni-icons>\r\n        </template>\r\n      </uni-list-item>\r\n    </uni-list>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive } from 'vue'\r\nimport { onLoad, onShow } from '@dcloudio/uni-app'\r\n\r\nimport { getCreidHistory } from '@/services/gift'\r\nconst getCreditH = async () => {\r\n  const res = await getCreidHistory()\r\n  console.log(res.rows)\r\n  history.value = res.rows\r\n}\r\nconst history = ref([])\r\nonLoad(() => {\r\n  if (!uni.getStorageSync('token')) {\r\n    uni.showToast({\r\n      title: '您未登录！',\r\n      icon: 'none',\r\n      duration: 1000,\r\n    })\r\n    return\r\n  }\r\n  getCreditH()\r\n})\r\nonShow(() => {\r\n  if (!uni.getStorageSync('token')) {\r\n    uni.showToast({\r\n      title: '您未登录！',\r\n      icon: 'none',\r\n      duration: 1000,\r\n    })\r\n    return\r\n  }\r\n})\r\nconst CType = (n) => {\r\n  if (n == 2) {\r\n    return '参加活动'\r\n  } else if (n == 3) {\r\n    return '意见反馈'\r\n  } else if (n == 4) {\r\n    return '推荐活动'\r\n  } else {\r\n    return '积分兑换'\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.noHistory {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  height: 100vh;\r\n  box-shadow: inset 2px 2px 4px rgb(0, 0, 0, 0.1);\r\n  background-color: rgba(0, 0, 0, 0.1);\r\n}\r\n.noH {\r\n  color: #000;\r\n  margin: auto;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/feidian/计算机设计大赛/xswc_cs/src/pages/my/components/history.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCreidHistory","ref","onLoad","uni","onShow"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAwDA,UAAM,aAAa,YAAY;AACvB,YAAA,MAAM,MAAMA,cAAAA;AACV,cAAA,IAAI,IAAI,IAAI;AACpB,cAAQ,QAAQ,IAAI;AAAA,IAAA;AAEhB,UAAA,UAAUC,kBAAI,CAAA,CAAE;AACtBC,kBAAAA,OAAO,MAAM;AACX,UAAI,CAACC,cAAA,MAAI,eAAe,OAAO,GAAG;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AACD;AAAA,MACF;AACW;IAAA,CACZ;AACDC,kBAAAA,OAAO,MAAM;AACX,UAAI,CAACD,cAAA,MAAI,eAAe,OAAO,GAAG;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AACD;AAAA,MACF;AAAA,IAAA,CACD;AACK,UAAA,QAAQ,CAAC,MAAM;AACnB,UAAI,KAAK,GAAG;AACH,eAAA;AAAA,MAAA,WACE,KAAK,GAAG;AACV,eAAA;AAAA,MAAA,WACE,KAAK,GAAG;AACV,eAAA;AAAA,MAAA,OACF;AACE,eAAA;AAAA,MACT;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3FF,GAAG,WAAW,eAAe;"}