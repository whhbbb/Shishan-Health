{"version":3,"file":"ActivitySignIn.js","sources":["../../../../../src/pages/activity/ActivitySignIn.vue","../../../../../uniPage:/cGFnZXMvYWN0aXZpdHkvQWN0aXZpdHlTaWduSW4udnVl"],"sourcesContent":["<template>\n  <div>\n    <image @click=\"scan()\" class=\"scan-img\" src=\"../../static/activity/scanimg.png\"></image>\n    <button style=\"box-shadow: 0 0 7px rgba(0, 0, 0, 0.1)\" type=\"primary\" @click=\"scan()\" id=\"scan\">\n      扫一扫\n    </button>\n\n    <!-- <button type=\"primary\" @click=\"qrsigncode()\" id=\"token\">签到码</button> -->\n    <!-- <button type=\"primary\" @click=\"qrapplycode()\" id=\"token\">报名码</button> -->\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onLoad } from '@dcloudio/uni-app'\n\n// 获取报名码函数\n// qrapplycode(){\n//   //获取appid和appsecret\n//   wx.request({\n//     method:'GET',\n//     url:'http://117.50.163.249:3166/system/app',\n//     header:{\n//       'Authorization':'Bearer eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6IjAwNjhiMzY4LTk2MTctNDhhMi05NGM3LWRhMDRlM2YxYTgzMyJ9.NRPuqh96eIsA11EgkRNVsnpZAGclIvE0EvdjCKhi3BOFVf94XOaEUFlw57jLQRyRpFkz_UALDIUNNtTRAlbumw'\n//     },\n//     success(res) {\n//       const appid=res.data.data.appid\n//       const appsecret=res.data.data.appsecret\n//       //获取access_token\n//        wx.request({\n//        method:'POST',\n//        url:'https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid='+appid+'&secret='+appsecret,\n//        success(res) {\n//          console.log(res.data.access_token)\n//          //获取报名码\n//   wx.request({\n//        url:'https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token='+res.data.access_token,\n//        method:'POST',\n//        data:{\n//          \"page\": \"pages/activity/ActivityDetails\",\n//           \"scene\": \"id=2210\",//activityid\n//           \"check_path\": false,\n//           \"env_version\": \"release\"\n//        },\n//        success(res){\n//          //将二进制的图片格式转换\n//         const base64 = wx.arrayBufferToBase64(res.data);\n//         const imgurl = 'data:image/jpeg;base64,' + base64;\n//        }\n//      })\n//        }\n//      })\n//     }\n//   })\n\n// },\n\nconst scan = () => {\n  uni.scanCode({\n    success: (res) => {\n      //判断当前手机系统\n      // wx.getSystemInfo({\n      //   success: (res22) => {\n      console.log(res)\n      console.log('res.path', res.path) //pages/me/me?scene=table_id%3D8%26shop_id%3D1\n      // const platform = res22.platform.toLowerCase()\n      var path = res.path\n      // 判断当前手机系统\n      // if (platform.includes('ios')) {\n      //   console.log('当前手机系统为 iOS')\n      //   path = decodeURIComponent(path)\n      //   console.log(path)\n      // }\n      const modifiedStr = path.replace('?scene=', '?id=')\n      console.log(modifiedStr)\n      uni.navigateTo({\n        url: '/' + modifiedStr,\n      })\n\n      // else if (platform.includes('windows')) {\n      //   console.log('当前手机系统为 Windows Phone');\n      // } else {\n      //   console.log('当前手机系统为其他');\n      // }\n      //   },\n      // })\n\n      //微信开发者工具 在开发者工具里出现乱码需要decodeURIComponent转义,真机不需要,可以直接使用\n    },\n  })\n}\nonLoad(() => {\n  if (!uni.getStorageSync('token')) {\n    uni.showToast({\n      title: '请先登录',\n      icon: 'none',\n      duration: 1000,\n      complete: (res) => {\n        setTimeout(() => {\n          uni.navigateTo({\n            url: '/pages/login/login',\n          })\n        }, 1000)\n      },\n    })\n  }\n})\n// 获取签到码\n//  qrsigncode(){\n//    wx.request({\n//      method:'GET',\n//      url:'http://117.50.163.249:3166/system/app',\n//      header:{\n//        'Authorization':`Bearer ${uni.getStorageSync('token')}`\n//      },\n//      success(res) {\n//    wx.request({\n//      method:'POST',\n//      url:'https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid='+appId+'&secret='+appsecret,\n//      success(res) {\n//        console.log(res)\n//        console.log(res.data.access_token)\n// wx.request({\n//      url:'https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token='+res.data.access_token,\n//      method:'POST',\n//      data:{\n//        \"page\": \"pages/activity/SignCheck\",\n//         \"scene\": \"id=2210\",\n//         \"check_path\": false,\n//         \"env_version\": \"release\"\n//      },\n//      success(res){\n//        console.log(res)\n//       const base64 = wx.arrayBufferToBase64(res.data);\n//       const imgurl = 'data:image/jpeg;base64,' + base64;\n\n//      }\n//    })\n//      }\n//    })\n//    }})\n//  },\n</script>\n<style scoped>\n.scan-img {\n  width: 70%;\n  height: 500rpx;\n\n  margin: 5vh 15%;\n  /* border: 1rpx solid #ccc; */\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n}\n\nbutton {\n  width: 80%;\n  margin: 1vh 10%;\n}\n\n#scan{\n  background-color: #0077b6;\n  color: #fff;\n}\n</style>\n","import MiniProgramPage from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/activity/ActivitySignIn.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","onLoad"],"mappings":";;;;;AAwDA,UAAM,OAAO,MAAM;AACjBA,oBAAAA,MAAI,SAAS;AAAA,QACX,SAAS,CAAC,QAAQ;AAIhB,kBAAQ,IAAI,GAAG;AACP,kBAAA,IAAI,YAAY,IAAI,IAAI;AAEhC,cAAI,OAAO,IAAI;AAOf,gBAAM,cAAc,KAAK,QAAQ,WAAW,MAAM;AAClD,kBAAQ,IAAI,WAAW;AACvBA,wBAAAA,MAAI,WAAW;AAAA,YACb,KAAK,MAAM;AAAA,UAAA,CACZ;AAAA,QAWH;AAAA,MAAA,CACD;AAAA,IAAA;AAEHC,kBAAAA,OAAO,MAAM;AACX,UAAI,CAACD,cAAA,MAAI,eAAe,OAAO,GAAG;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU,CAAC,QAAQ;AACjB,uBAAW,MAAM;AACfA,4BAAAA,MAAI,WAAW;AAAA,gBACb,KAAK;AAAA,cAAA,CACN;AAAA,eACA,GAAI;AAAA,UACT;AAAA,QAAA,CACD;AAAA,MACH;AAAA,IAAA,CACD;;;;;;;;;;ACxGD,GAAG,WAAW,eAAe;"}