{"version":3,"file":"orderList.js","sources":["../../../../../../src/pages/gift/components/orderList.vue","../../../../../../uniComponent:/RDovZmVpZGlhbi_orqHnrpfmnLrorr7orqHlpKfotZsveHN3Y19jcy9zcmMvcGFnZXMvZ2lmdC9jb21wb25lbnRzL29yZGVyTGlzdC52dWU"],"sourcesContent":["<template>\r\n  <view v-if=\"isLogin\" class=\"order-list\">\r\n    <view v-if=\"orders.length !== 0\" v-for=\"order in orders\" :key=\"order.id\" class=\"order-item\">\r\n      <image :src=\"order.coverPicture\" class=\"order-image\" />\r\n      <view class=\"order-details\">\r\n        <text class=\"order-name\">{{ order.name }}</text>\r\n        <text class=\"order-time\">兑换时间：{{ order.createTime }}</text>\r\n        <text class=\"order-time\">兑换个数：{{ order.nums }}</text>\r\n        <text v-if=\"order.state == 1\" class=\"order-status\">礼品状态:未领取</text>\r\n        <text v-else class=\"order-status\">礼品状态:已领取</text>\r\n        <text class=\"order-amount\">花费积分：{{ order.total }}</text>\r\n      </view>\r\n    </view>\r\n    <view class=\"noLogin\" v-else>\r\n      <uni-icons type=\"wallet\" size=\"90\"></uni-icons>\r\n      <view>兑换记录为空</view>\r\n    </view>\r\n  </view>\r\n  <view class=\"noLogin\" v-else>\r\n    <uni-icons type=\"person\" size=\"90\"></uni-icons>\r\n    <view @click=\"goLogin\">尚未登陆 , 点击登录</view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { getGiftHistory } from '@/services/gift'\r\nimport { onLoad, onShow } from '@dcloudio/uni-app'\r\nimport { ref } from 'vue'\r\nonLoad(() => {\r\n  console.log('onload??')\r\n  if (uni.getStorageSync('token')) {\r\n    getHistory()\r\n  } else {\r\n    isLogin.value = false\r\n  }\r\n})\r\nonShow(() => {\r\n  if (uni.getStorageSync('token')) {\r\n    getHistory()\r\n  }\r\n})\r\nconst isLogin = ref<boolean>(true)\r\nconst goLogin = () => {\r\n  uni.navigateTo({\r\n    url: '/pages/login/login',\r\n  })\r\n}\r\nconst getHistory = async () => {\r\n  const res = await getGiftHistory()\r\n  console.log(res)\r\n  orders.value = res.rows\r\n}\r\nconst orders = ref([])\r\n</script>\r\n\r\n<style>\r\n.order-list {\r\n  width: 100vw;\r\n  padding: 2.5vw;\r\n}\r\n\r\n.order-item {\r\n  width: 95vw;\r\n  min-height: 17vh;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10rpx;\r\n  margin-bottom: 2vh;\r\n}\r\n\r\n.order-image {\r\n  width: 200rpx;\r\n  height: 200rpx;\r\n  margin-right: 5%;\r\n}\r\n\r\n.order-details {\r\n  max-width: 65%;\r\n  height: 200rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  text-overflow: ellipsis;\r\n  word-break: break-all;\r\n}\r\n\r\n.order-name {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  width: 100%;\r\n  white-space: nowrap;\r\n  display: block;\r\n  line-height: 32rpx;\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.order-time {\r\n  color: gray;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.order-status {\r\n  font-size: 24rpx;\r\n}\r\n\r\n.order-amount {\r\n  font-weight: bold;\r\n  font-size: 24rpx;\r\n}\r\n.noLogin {\r\n  padding: 40px;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import Component from 'D:/feidian/计算机设计大赛/xswc_cs/src/pages/gift/components/orderList.vue'\nwx.createComponent(Component)"],"names":["onLoad","uni","onShow","ref","getGiftHistory"],"mappings":";;;;;;;;;;;;;;;;;AA4BAA,kBAAAA,OAAO,MAAM;AACX,cAAQ,IAAI,UAAU;AAClB,UAAAC,cAAA,MAAI,eAAe,OAAO,GAAG;AACpB;MAAA,OACN;AACL,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IAAA,CACD;AACDC,kBAAAA,OAAO,MAAM;AACP,UAAAD,cAAA,MAAI,eAAe,OAAO,GAAG;AACpB;MACb;AAAA,IAAA,CACD;AACK,UAAA,UAAUE,kBAAa,IAAI;AACjC,UAAM,UAAU,MAAM;AACpBF,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MAAA,CACN;AAAA,IAAA;AAEH,UAAM,aAAa,YAAY;AACvB,YAAA,MAAM,MAAMG,cAAAA;AAClB,cAAQ,IAAI,GAAG;AACf,aAAO,QAAQ,IAAI;AAAA,IAAA;AAEf,UAAA,SAASD,kBAAI,CAAA,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnDrB,GAAG,gBAAgB,SAAS;"}