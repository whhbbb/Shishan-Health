{"version":3,"file":"SignCheck.js","sources":["../../../../../src/pages/activity/SignCheck.vue","../../../../../uniPage:/cGFnZXMvYWN0aXZpdHkvU2lnbkNoZWNrLnZ1ZQ"],"sourcesContent":["<template>\n  <div class=\"tip-page\">\n    <div class=\"content\">\n      <uni-icons\n        class=\"icons\"\n        v-if=\"result === 1 || result === 2\"\n        type=\"info\"\n        color=\"#ffa500\"\n        size=\"100\"\n      ></uni-icons>\n      <uni-icons\n        class=\"icons\"\n        v-else-if=\"result === 3\"\n        type=\"checkbox-filled\"\n        color=\"green\"\n        size=\"100\"\n      ></uni-icons>\n      <uni-icons class=\"icons\" v-else type=\"clear\" color=\"red\" size=\"100\"></uni-icons>\n\n      <div class=\"message\">{{ message[result - 1] }}</div>\n\n      <view class=\"tag-view\">\n        <uni-tag type=\"warning\" v-if=\"result === 1\" @click=\"toapply\" text=\"未报名 点击报名\" />\n        <uni-tag type=\"error\" v-else-if=\"result === 4\" text=\"活动已结束\" />\n        <uni-tag type=\"error\" v-else-if=\"result === 5\" text=\"报名未开始\" />\n      </view>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref, reactive } from 'vue'\nimport { http } from '../../utils/http'\nimport { onLoad } from '@dcloudio/uni-app'\n\nconst result = ref<number>(1)\nconst props = defineProps<{\n  id: number\n}>()\nconsole.log(props.id)\nconst message = ref<string[]>(['签到失败', '请勿重复签到', '签到成功', '签到截止', '签到失败'])\n\nconst postFeedbackAPI = (data: any) => {\n  return http<any>({\n    url: '/system/useractivity/register',\n    method: 'PUT',\n    data: {\n      activityId: data,\n    },\n  })\n}\n\nconst postFeedback = async (AId: number) => {\n  const res = await postFeedbackAPI(AId)\n  console.log(res)\n  result.value = res.data\n}\n\nlet AId = props.id\n\nconst toapply = () => {\n  console.log('去报名！')\n  uni.redirectTo({\n    url: '/pages/index/index',\n  })\n  uni.navigateTo({\n    url: '/pages/activity/ActivityDetails?id=' + AId,\n  })\n}\nonLoad((options) => {\n  let obj = wx.getLaunchOptionsSync()\n  let query = null\n\n  if (options.scene || obj.query.scene) {\n    console.log('options.scene', options)\n    console.log('obj.query.scene', obj.query)\n    // 这里是用开发者工具模拟的时候要先用 encodeURIComponent 编译，模拟真实传递参数的效果，项目发布审核的时候这句话要注释掉\n    // query = options ? encodeURIComponent(options.scene) : encodeURIComponent(obj.query.scene);\n    query = options ? decodeURIComponent(options.scene) : decodeURIComponent(obj.query.scene)\n    console.log(query)\n    const aNo = query\n    console.log('aNo', aNo)\n    AId = Number(aNo)\n  }\n  // const scene = decodeURIComponent(options.scene)\n  // console.log(\"query\",scene)\n  // if(options.scene){\n  //   const aNo = scene.split('=')[1]\n  //   console.log(\"aNo\",aNo)\n  //   AId =Number(aNo)\n  // }\n  console.log('props', props)\n  if (uni.getStorageSync('token')) {\n    postFeedback(AId)\n  } else {\n    uni.showToast({\n      title: '您尚未登录，请先登录',\n      icon: 'none',\n      duration: 1000,\n      complete: () => {\n        setTimeout(() => {\n          uni.navigateTo({\n            url: '/pages/login/login',\n          })\n        }, 1000)\n      },\n    })\n  }\n})\n</script>\n\n<style>\n.tip-page {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n}\n\n.content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.icons {\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n  border-radius: 50%;\n}\n\n.message {\n  margin-top: 1vh;\n  font-size: 26px;\n  font-weight: bold;\n  color: #333;\n}\n</style>\n","import MiniProgramPage from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/activity/SignCheck.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","http","AId","uni","onLoad","wx"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAmCM,UAAA,SAASA,kBAAY,CAAC;AAIpB,YAAA,IAAI,MAAM,EAAE;AACd,UAAA,UAAUA,kBAAc,CAAC,QAAQ,UAAU,QAAQ,QAAQ,MAAM,CAAC;AAElE,UAAA,kBAAkB,CAAC,SAAc;AACrC,aAAOC,gBAAU;AAAA,QACf,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,MAAM;AAAA,UACJ,YAAY;AAAA,QACd;AAAA,MAAA,CACD;AAAA,IAAA;AAGG,UAAA,eAAe,OAAOC,SAAgB;AACpC,YAAA,MAAM,MAAM,gBAAgBA,IAAG;AACrC,cAAQ,IAAI,GAAG;AACf,aAAO,QAAQ,IAAI;AAAA,IAAA;AAGrB,QAAI,MAAM,MAAM;AAEhB,UAAM,UAAU,MAAM;AACpB,cAAQ,IAAI,MAAM;AAClBC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MAAA,CACN;AACDA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,wCAAwC;AAAA,MAAA,CAC9C;AAAA,IAAA;AAEHC,kBAAA,OAAO,CAAC,YAAY;AACd,UAAA,MAAMC,mBAAG;AACb,UAAI,QAAQ;AAEZ,UAAI,QAAQ,SAAS,IAAI,MAAM,OAAO;AAC5B,gBAAA,IAAI,iBAAiB,OAAO;AAC5B,gBAAA,IAAI,mBAAmB,IAAI,KAAK;AAGhC,gBAAA,UAAU,mBAAmB,QAAQ,KAAK,IAAI,mBAAmB,IAAI,MAAM,KAAK;AACxF,gBAAQ,IAAI,KAAK;AACjB,cAAM,MAAM;AACJ,gBAAA,IAAI,OAAO,GAAG;AACtB,cAAM,OAAO,GAAG;AAAA,MAClB;AAQQ,cAAA,IAAI,SAAS,KAAK;AACtB,UAAAF,cAAA,MAAI,eAAe,OAAO,GAAG;AAC/B,qBAAa,GAAG;AAAA,MAAA,OACX;AACLA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU,MAAM;AACd,uBAAW,MAAM;AACfA,4BAAAA,MAAI,WAAW;AAAA,gBACb,KAAK;AAAA,cAAA,CACN;AAAA,eACA,GAAI;AAAA,UACT;AAAA,QAAA,CACD;AAAA,MACH;AAAA,IAAA,CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3GD,GAAG,WAAW,eAAe;"}