{"version":3,"file":"SignCheck.js","sources":["../../../../../src/pages/activity/SignCheck.vue","../../../../../uniPage:/cGFnZXMvYWN0aXZpdHkvU2lnbkNoZWNrLnZ1ZQ"],"sourcesContent":["<template>\r\n  <div class=\"tip-page\">\r\n    <div class=\"content\">\r\n      <uni-icons\r\n        class=\"icons\"\r\n        v-if=\"result === 1 || result === 2\"\r\n        type=\"info\"\r\n        color=\"#ffa500\"\r\n        size=\"100\"\r\n      ></uni-icons>\r\n      <uni-icons\r\n        class=\"icons\"\r\n        v-else-if=\"result === 3\"\r\n        type=\"checkbox-filled\"\r\n        color=\"green\"\r\n        size=\"100\"\r\n      ></uni-icons>\r\n      <uni-icons class=\"icons\" v-else type=\"clear\" color=\"red\" size=\"100\"></uni-icons>\r\n\r\n      <div class=\"message\">{{ message[result - 1] }}</div>\r\n\r\n      <view class=\"tag-view\">\r\n        <uni-tag type=\"warning\" v-if=\"result === 1\" @click=\"toapply\" text=\"未报名 点击报名\" />\r\n        <uni-tag type=\"error\" v-else-if=\"result === 4\" text=\"活动已结束\" />\r\n        <uni-tag type=\"error\" v-else-if=\"result === 5\" text=\"报名未开始\" />\r\n      </view>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { http } from '../../utils/http'\r\nimport { onLoad } from '@dcloudio/uni-app'\r\n\r\nconst result = ref<number>(1)\r\nconst props = defineProps<{\r\n  id: number\r\n}>()\r\nconsole.log(props.id)\r\nconst message = ref<string[]>(['签到失败', '请勿重复签到', '签到成功', '签到截止', '签到失败'])\r\n\r\nconst postFeedbackAPI = (data: any) => {\r\n  return http<any>({\r\n    url: '/system/useractivity/register',\r\n    method: 'PUT',\r\n    data: {\r\n      activityId: data,\r\n    },\r\n  })\r\n}\r\n\r\nconst postFeedback = async (AId: number) => {\r\n  const res = await postFeedbackAPI(AId)\r\n  console.log(res)\r\n  result.value = res.data\r\n}\r\n\r\nlet AId = props.id\r\n\r\nconst toapply = () => {\r\n  console.log('去报名！')\r\n  uni.redirectTo({\r\n    url: '/pages/index/index',\r\n  })\r\n  uni.navigateTo({\r\n    url: '/pages/activity/ActivityDetails?id=' + AId,\r\n  })\r\n}\r\nonLoad((options) => {\r\n  let obj = wx.getLaunchOptionsSync()\r\n  let query = null\r\n\r\n  if (options.scene || obj.query.scene) {\r\n    console.log('options.scene', options)\r\n    console.log('obj.query.scene', obj.query)\r\n    // 这里是用开发者工具模拟的时候要先用 encodeURIComponent 编译，模拟真实传递参数的效果，项目发布审核的时候这句话要注释掉\r\n    // query = options ? encodeURIComponent(options.scene) : encodeURIComponent(obj.query.scene);\r\n    query = options ? decodeURIComponent(options.scene) : decodeURIComponent(obj.query.scene)\r\n    console.log(query)\r\n    const aNo = query\r\n    console.log('aNo', aNo)\r\n    AId = Number(aNo)\r\n  }\r\n  // const scene = decodeURIComponent(options.scene)\r\n  // console.log(\"query\",scene)\r\n  // if(options.scene){\r\n  //   const aNo = scene.split('=')[1]\r\n  //   console.log(\"aNo\",aNo)\r\n  //   AId =Number(aNo)\r\n  // }\r\n  console.log('props', props)\r\n  if (uni.getStorageSync('token')) {\r\n    postFeedback(AId)\r\n  } else {\r\n    uni.showToast({\r\n      title: '您尚未登录，请先登录',\r\n      icon: 'none',\r\n      duration: 1000,\r\n      complete: () => {\r\n        setTimeout(() => {\r\n          uni.navigateTo({\r\n            url: '/pages/login/login',\r\n          })\r\n        }, 1000)\r\n      },\r\n    })\r\n  }\r\n})\r\n</script>\r\n\r\n<style>\r\n.tip-page {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n}\r\n\r\n.content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.icons {\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\r\n  border-radius: 50%;\r\n}\r\n\r\n.message {\r\n  margin-top: 1vh;\r\n  font-size: 26px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/feidian/计算机设计大赛/xswc_cs/src/pages/activity/SignCheck.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","http","AId","uni","onLoad","wx"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAmCM,UAAA,SAASA,kBAAY,CAAC;AAIpB,YAAA,IAAI,MAAM,EAAE;AACd,UAAA,UAAUA,kBAAc,CAAC,QAAQ,UAAU,QAAQ,QAAQ,MAAM,CAAC;AAElE,UAAA,kBAAkB,CAAC,SAAc;AACrC,aAAOC,gBAAU;AAAA,QACf,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,MAAM;AAAA,UACJ,YAAY;AAAA,QACd;AAAA,MAAA,CACD;AAAA,IAAA;AAGG,UAAA,eAAe,OAAOC,SAAgB;AACpC,YAAA,MAAM,MAAM,gBAAgBA,IAAG;AACrC,cAAQ,IAAI,GAAG;AACf,aAAO,QAAQ,IAAI;AAAA,IAAA;AAGrB,QAAI,MAAM,MAAM;AAEhB,UAAM,UAAU,MAAM;AACpB,cAAQ,IAAI,MAAM;AAClBC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MAAA,CACN;AACDA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,wCAAwC;AAAA,MAAA,CAC9C;AAAA,IAAA;AAEHC,kBAAA,OAAO,CAAC,YAAY;AACd,UAAA,MAAMC,mBAAG;AACb,UAAI,QAAQ;AAEZ,UAAI,QAAQ,SAAS,IAAI,MAAM,OAAO;AAC5B,gBAAA,IAAI,iBAAiB,OAAO;AAC5B,gBAAA,IAAI,mBAAmB,IAAI,KAAK;AAGhC,gBAAA,UAAU,mBAAmB,QAAQ,KAAK,IAAI,mBAAmB,IAAI,MAAM,KAAK;AACxF,gBAAQ,IAAI,KAAK;AACjB,cAAM,MAAM;AACJ,gBAAA,IAAI,OAAO,GAAG;AACtB,cAAM,OAAO,GAAG;AAAA,MAClB;AAQQ,cAAA,IAAI,SAAS,KAAK;AACtB,UAAAF,cAAA,MAAI,eAAe,OAAO,GAAG;AAC/B,qBAAa,GAAG;AAAA,MAAA,OACX;AACLA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU,MAAM;AACd,uBAAW,MAAM;AACfA,4BAAAA,MAAI,WAAW;AAAA,gBACb,KAAK;AAAA,cAAA,CACN;AAAA,eACA,GAAI;AAAA,UACT;AAAA,QAAA,CACD;AAAA,MACH;AAAA,IAAA,CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3GD,GAAG,WAAW,eAAe;"}