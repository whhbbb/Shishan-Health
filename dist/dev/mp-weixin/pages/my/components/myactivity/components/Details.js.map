{"version":3,"file":"Details.js","sources":["../../../../../../../../src/pages/my/components/myactivity/components/Details.vue","../../../../../../../../uniComponent:/L1VzZXJzL3doaGJiYi9Eb2N1bWVudHMvUHJvamVjdC1zdG9yYWdlL3hzd2NfZ2FtZS9zcmMvcGFnZXMvbXkvY29tcG9uZW50cy9teWFjdGl2aXR5L2NvbXBvbmVudHMvRGV0YWlscy52dWU"],"sourcesContent":["<template>\r\n  <view v-if=\"isLogin&&hasActivity\" class=\"my-activity\">\r\n    <navigator\r\n      class=\"activity-details-item\"\r\n      v-for=\"item in activities\"\r\n      :key=\"item.id\"\r\n      :url=\"item.url\"\r\n    >\r\n      <view class=\"activity-details-item-title\">\r\n        <view class=\"title\">\r\n          <span class=\"title-content\">\r\n            {{ item.title }}\r\n          </span>\r\n          <view class=\"activity-class\">\r\n            <uni-tag v-if=\"item.sort == 1\" type=\"primary\" text=\"学术晚茶\" />\r\n            <uni-tag v-else type=\"success\" text=\"学术社区\" />\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view class=\"activity-details-item-contents\">\r\n        <view class=\"activity-details-item-content\">\r\n          <view class=\"sponsor\"> 发起学院：{{ item.sponsorCollege }} </view>\r\n          <view class=\"activity-details-item-content-time\">\r\n            <image class=\"img\" src=\"../../../static/activity/clock.png\" />{{ item.time }}\r\n          </view>\r\n          <view class=\"activity-details-item-content-address\">\r\n            <image class=\"img\" src=\"../../../static/activity/address.png\" />{{ item.address }}\r\n          </view>\r\n        </view>\r\n        <view class=\"activity-details-item-status\">\r\n          <view class=\"population\">\r\n            <image class=\"img\" src=\"../../../static/activity/User.png\"></image>\r\n            {{ item.population }} / {{ item.limitPopulation }}\r\n          </view>\r\n          <view class=\"status\">\r\n            {{ item.status }}\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </navigator>\r\n  </view>\r\n\r\n  <view class=\"no-activity\" v-else-if=\"isLogin&&!hasActivity\">\r\n    <view>暂无活动</view>\r\n  </view>\r\n\r\n  <view class=\"noLogin\" v-else>\r\n    <uni-icons type=\"person\" size=\"90\"></uni-icons>\r\n    <view @click=\"goLogin\">尚未登陆 , 点击登录</view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive } from 'vue'\r\nimport { onShow } from '@dcloudio/uni-app'\r\nimport { onMounted } from 'vue'\r\nimport { getMyActivityAPI,getMyAddActivityAPI } from '@/services/my'\r\ntype Activity = {\r\n  id: number\r\n  title: string\r\n  status: string\r\n  time: string\r\n  address: string\r\n  img?: string\r\n  // 报名人数和限制人数\r\n  population?: number\r\n  limitPopulation?: number\r\n  // 发起学院\r\n  sponsorCollege: string\r\n  url: string\r\n  sort: number\r\n}\r\nconst props=defineProps({\r\n  state:{\r\n    type:Number,\r\n    default:0\r\n  },\r\n  refresh:{\r\n    type:Boolean,\r\n    default:false\r\n  }\r\n})\r\nconst activities = ref<Activity[]>([])\r\n\r\nconst getMyActivity = async () => {\r\n  uni.showLoading({\r\n    title: '加载中',\r\n  })\r\n  let res;\r\n  if(props.state==0){\r\n    res = await getMyActivityAPI()\r\n  }else{\r\n    res = await getMyAddActivityAPI()\r\n  }\r\n  uni.hideLoading()\r\n  activities.value = []\r\n  if (res.data.length > 0) {\r\n    res.data.forEach((item: any) => {\r\n      activities.value.push({\r\n        id: item.id,\r\n        title: item.userImg2,\r\n        status: props.state==0?(item.status == 1 ? '进行中' : '已结束'):(item.state==1?'审核中': item.state==2?'审核通过':'待修改'),\r\n        time: item.lat,\r\n        address: item.address,\r\n        sponsorCollege: item.hbKeyword,\r\n        population: item.hbNum,\r\n        limitPopulation: item.hot,\r\n        url:props.state==0?(`/pages/activity/ActivityDetails?id=${item.activityId}`):(item.state==2?`/pages/activity/ActivityDetails?id=${item.id}`:`/pages/activity/ActivityEdit?id=${item.id}`),\r\n        sort: item.sort,\r\n      })\r\n    })\r\n    // console.log(activities.value)\r\n  } else {\r\n    // uni.showToast({\r\n    //   title: '暂无活动',\r\n    //   icon: 'none',\r\n    // })\r\n    hasActivity.value = false\r\n  }\r\n}\r\n// 是否登录\r\nconst isLogin = ref<boolean>(true)\r\n// 有无活动\r\nconst hasActivity = ref<boolean>(true)\r\nonMounted(() => {\r\n  console.log(props.state)\r\n  if (uni.getStorageSync('token')) {\r\n    getMyActivity()\r\n  } else {\r\n    isLogin.value = false\r\n  }\r\n})\r\nonShow(()=>{\r\n  if (uni.getStorageSync('token')) {\r\n    getMyActivity()\r\n  } else {\r\n    isLogin.value = false\r\n  }\r\n})\r\nconst goLogin = () => {\r\n  uni.navigateTo({\r\n    url: '/pages/login/login',\r\n  })\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.my-activity {\r\n  width: 90%;\r\n  margin: 0 auto;\r\n\r\n  .activity-details-item {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: flex-start;\r\n    width: 100%;\r\n    // height: 260rpx;\r\n    padding: 30rpx 0;\r\n    border-bottom: 1px solid #d6d6d6;\r\n\r\n    .activity-details-item-title {\r\n      font-size: 30rpx;\r\n      font-weight: bolder;\r\n      color: #333;\r\n      font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;\r\n      margin-bottom: 20rpx;\r\n      width: 100%;\r\n      .title {\r\n        width: 100%;\r\n        // display: flex;\r\n        .title-content {\r\n          // flex: 1;\r\n          float: left;\r\n          line-height: 50rpx;\r\n        }\r\n        .activity-class {\r\n          // display: inline;\r\n          // width: fit-content;\r\n          // margin-left: 10rpx;\r\n          float: right;\r\n          line-height: 50rpx;\r\n        }\r\n      }\r\n    }\r\n\r\n    .activity-details-item-contents {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      width: 100%;\r\n\r\n      .activity-details-item-content {\r\n        display: flex;\r\n        justify-content: center;\r\n        flex-direction: column;\r\n        flex: 1;\r\n\r\n        .sponsor {\r\n          margin-bottom: 10rpx;\r\n          font-size: 30rpx;\r\n          color: black;\r\n          margin-bottom: 20rpx;\r\n        }\r\n\r\n        .activity-details-item-content-time {\r\n          margin-bottom: 10rpx;\r\n          font-size: 26rpx;\r\n          color: #767575;\r\n\r\n          .img {\r\n            width: 30rpx;\r\n            height: 30rpx;\r\n            margin-right: 10rpx;\r\n          }\r\n        }\r\n\r\n        .activity-details-item-content-address {\r\n          font-size: 26rpx;\r\n          color: #767575;\r\n\r\n          .img {\r\n            width: 30rpx;\r\n            height: 30rpx;\r\n            margin-right: 10rpx;\r\n          }\r\n        }\r\n      }\r\n\r\n      .activity-details-item-status {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: flex-end;\r\n        justify-content: space-around;\r\n        width: 200rpx;\r\n\r\n        .population {\r\n          margin-bottom: 10rpx;\r\n          font-size: 26rpx;\r\n          color: #666;\r\n\r\n          .img {\r\n            width: 32rpx;\r\n            height: 32rpx;\r\n            margin-right: 10rpx;\r\n            // color: black;\r\n          }\r\n        }\r\n\r\n        .status {\r\n          font-size: 26rpx;\r\n          color: #666;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.no-activity{\r\n  padding: 40px;\r\n  text-align: center;\r\n}\r\n.noLogin {\r\n  padding: 40px;\r\n  text-align: center;\r\n}\r\n</style>","import Component from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/my/components/myactivity/components/Details.vue'\nwx.createComponent(Component)"],"names":["ref","uni","getMyActivityAPI","getMyAddActivityAPI","onMounted","onShow"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFM,UAAA,aAAaA,kBAAgB,CAAA,CAAE;AAErC,UAAM,gBAAgB,YAAY;AAChCC,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,MAAA,CACR;AACG,UAAA;AACD,UAAA,MAAM,SAAO,GAAE;AAChB,cAAM,MAAMC,YAAAA;MAAiB,OAC1B;AACH,cAAM,MAAMC,YAAAA;MACd;AACAF,oBAAA,MAAI,YAAY;AAChB,iBAAW,QAAQ;AACf,UAAA,IAAI,KAAK,SAAS,GAAG;AACnB,YAAA,KAAK,QAAQ,CAAC,SAAc;AAC9B,qBAAW,MAAM,KAAK;AAAA,YACpB,IAAI,KAAK;AAAA,YACT,OAAO,KAAK;AAAA,YACZ,QAAQ,MAAM,SAAO,IAAG,KAAK,UAAU,IAAI,QAAQ,QAAQ,KAAK,SAAO,IAAE,QAAO,KAAK,SAAO,IAAE,SAAO;AAAA,YACrG,MAAM,KAAK;AAAA,YACX,SAAS,KAAK;AAAA,YACd,gBAAgB,KAAK;AAAA,YACrB,YAAY,KAAK;AAAA,YACjB,iBAAiB,KAAK;AAAA,YACtB,KAAI,MAAM,SAAO,IAAG,sCAAsC,KAAK,UAAU,KAAK,KAAK,SAAO,IAAE,sCAAsC,KAAK,EAAE,KAAG,mCAAmC,KAAK,EAAE;AAAA,YACtL,MAAM,KAAK;AAAA,UAAA,CACZ;AAAA,QAAA,CACF;AAAA,MAAA,OAEI;AAKL,oBAAY,QAAQ;AAAA,MACtB;AAAA,IAAA;AAGI,UAAA,UAAUD,kBAAa,IAAI;AAE3B,UAAA,cAAcA,kBAAa,IAAI;AACrCI,kBAAAA,UAAU,MAAM;AACN,cAAA,IAAI,MAAM,KAAK;AACnB,UAAAH,cAAA,MAAI,eAAe,OAAO,GAAG;AACjB;MAAA,OACT;AACL,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IAAA,CACD;AACDI,kBAAAA,OAAO,MAAI;AACL,UAAAJ,cAAA,MAAI,eAAe,OAAO,GAAG;AACjB;MAAA,OACT;AACL,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IAAA,CACD;AACD,UAAM,UAAU,MAAM;AACpBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MAAA,CACN;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7IH,GAAG,gBAAgB,SAAS;"}