{"version":3,"file":"column.js","sources":["../../../../../src/pages/column/column.vue","../../../../../uniPage:/cGFnZXMvY29sdW1uL2NvbHVtbi52dWU"],"sourcesContent":["<template>\r\n  <view class=\"container\" v-if=\"isPastTargetDate\">\r\n    <scroll-view\r\n      scroll-x=\"true\"\r\n      class=\"nav\"\r\n      :scroll-left=\"navScrollLeft\"\r\n      scroll-with-animation=\"true\"\r\n    >\r\n      <view\r\n        v-for=\"(navItem, id) in navData\"\r\n        :key=\"id\"\r\n        class=\"nav-item\"\r\n        :class=\"{ active: currentTab === id }\"\r\n        @click=\"switchNav(id)\"\r\n      >\r\n        {{ navItem.text }}\r\n      </view>\r\n    </scroll-view>\r\n\r\n    <swiper :current=\"currentTab\" duration=\"300\" @change=\"switchTab\" class=\"main\">\r\n      <swiper-item v-for=\"(tabItem, id) in tabData\" :key=\"id\" class=\"content\">\r\n        <view v-if=\"id === 0\" class=\"Moments\">\r\n          <news-item :kind=\"1\"></news-item>\r\n        </view>\r\n\r\n        <view v-else-if=\"id === 1\" class=\"Times\">\r\n          <news-item :kind=\"2\"></news-item>\r\n        </view>\r\n      </swiper-item>\r\n    </swiper>\r\n  </view>\r\n</template>\r\n<script>\r\nimport newsItem from './components/newsItem.vue'\r\nimport { onLoad, onShow } from '@dcloudio/uni-app'\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { getAudit } from '@/services/Audit'\r\nexport default {\r\n  components: {\r\n    newsItem,\r\n  },\r\n  setup() {\r\n    const showMoments = ref(true)\r\n\r\n    // const isShowMoments = () => {\r\n    //   showMoments.value = true\r\n    //   console.log(showMoments.value)\r\n    // }\r\n\r\n    // const isShowTimes = () => {\r\n    //   showMoments.value = false\r\n    //   console.log(showMoments.value)\r\n    // }\r\n\r\n    const isPastTargetDate = ref(false)\r\n    const navScrollLeft = ref(0)\r\n    const screenW = ref()\r\n    const currentTab = ref(0)\r\n    const navData = ref([{ text: '精彩瞬间' }, { text: '科普时间' }])\r\n    const tabData = ref([0, 1])\r\n    const singleNavWidth = ref()\r\n\r\n    const switchNav = (idx) => {\r\n      console.log(idx)\r\n      singleNavWidth.value = screenW.value / 2\r\n      navScrollLeft.value = (idx - 2) * singleNavWidth.value\r\n      if (currentTab.value === idx) {\r\n        return false\r\n      } else {\r\n        currentTab.value = idx\r\n      }\r\n    }\r\n\r\n    const switchTab = (e) => {\r\n      const cur = e.detail.current\r\n      singleNavWidth.value = screenW.value / 2\r\n      currentTab.value = cur\r\n      console.log(currentTab.value)\r\n      navScrollLeft.value = (cur - 2) * singleNavWidth.value\r\n    }\r\n\r\n    const getA = async () => {\r\n      const res = await getAudit()\r\n      console.log(res)\r\n      isPastTargetDate.value = res.data\r\n    }\r\n    onShow(() => {\r\n      console.log('column!!!')\r\n      getA()\r\n      uni.switchTab({\r\n        url: '/pages/column/column',\r\n      })\r\n    })\r\n    onMounted(() => {\r\n      getA()\r\n      wx.getSystemInfo({\r\n        success(res) {\r\n          screenW.value = res.windowWidth\r\n          console.log(res.windowWidth) // 屏幕宽度\r\n          singleNavWidth.value = res.windowWidth / 2\r\n          navScrollLeft.value = (currentTab.value - 2) * singleNavWidth.value\r\n        },\r\n      })\r\n    })\r\n\r\n    return {\r\n      showMoments,\r\n      isPastTargetDate,\r\n      navScrollLeft,\r\n      screenW,\r\n      navData,\r\n      tabData,\r\n      singleNavWidth,\r\n      switchNav,\r\n      switchTab,\r\n      currentTab,\r\n    }\r\n  },\r\n}\r\n//\r\n</script>\r\n<style lang=\"scss\">\r\n.container {\r\n  width: 100%;\r\n  height: 100vh;\r\n  padding-top: 7vh;\r\n}\r\n.nav {\r\n  /* 设置tab-nav宽高度 */\r\n  height: 7vh;\r\n  width: 100%;\r\n\r\n  /* 假如您需要并排放置两个带边框的框，\r\n  可通过将 box-sizing 设置为 \"border-box\"。 */\r\n  box-sizing: border-box;\r\n\r\n  overflow: hidden;\r\n\r\n  /* 居中 */\r\n  line-height: 7vh;\r\n\r\n  background: #f7f7f7;\r\n\r\n  font-size: 32rpx;\r\n\r\n  /* 规定段落中的文本不进行换行： */\r\n  white-space: nowrap;\r\n\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 99;\r\n}\r\n\r\n.nav-item {\r\n  width: 50%;\r\n  display: inline-block;\r\n  text-align: center;\r\n}\r\n\r\n.nav-item.active {\r\n  color: #428ffb;\r\n}\r\n.content {\r\n  overflow-y: scroll;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/feidian/计算机设计大赛/xswc_cs/src/pages/column/column.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getAudit","onShow","uni","onMounted","wx"],"mappings":";;;;;;AAiCA,MAAO,WAAU,MAAW;AAI5B,MAAK,YAAU;AAAA,EACb,YAAY;AAAA,IACV;AAAA,EACD;AAAA,EACD,QAAQ;AACN,UAAM,cAAcA,cAAG,IAAC,IAAI;AAY5B,UAAM,mBAAmBA,cAAG,IAAC,KAAK;AAClC,UAAM,gBAAgBA,cAAG,IAAC,CAAC;AAC3B,UAAM,UAAUA,cAAAA,IAAI;AACpB,UAAM,aAAaA,cAAG,IAAC,CAAC;AACxB,UAAM,UAAUA,kBAAI,CAAC,EAAE,MAAM,UAAU,EAAE,MAAM,OAAK,CAAG,CAAC;AACxD,UAAM,UAAUA,cAAG,IAAC,CAAC,GAAG,CAAC,CAAC;AAC1B,UAAM,iBAAiBA,cAAAA,IAAI;AAE3B,UAAM,YAAY,CAAC,QAAQ;AACzB,cAAQ,IAAI,GAAG;AACf,qBAAe,QAAQ,QAAQ,QAAQ;AACvC,oBAAc,SAAS,MAAM,KAAK,eAAe;AACjD,UAAI,WAAW,UAAU,KAAK;AAC5B,eAAO;AAAA,aACF;AACL,mBAAW,QAAQ;AAAA,MACrB;AAAA,IACF;AAEA,UAAM,YAAY,CAAC,MAAM;AACvB,YAAM,MAAM,EAAE,OAAO;AACrB,qBAAe,QAAQ,QAAQ,QAAQ;AACvC,iBAAW,QAAQ;AACnB,cAAQ,IAAI,WAAW,KAAK;AAC5B,oBAAc,SAAS,MAAM,KAAK,eAAe;AAAA,IACnD;AAEA,UAAM,OAAO,YAAY;AACvB,YAAM,MAAM,MAAMC,wBAAS;AAC3B,cAAQ,IAAI,GAAG;AACf,uBAAiB,QAAQ,IAAI;AAAA,IAC/B;AACAC,kBAAAA,OAAO,MAAM;AACX,cAAQ,IAAI,WAAW;AACvB,WAAK;AACLC,oBAAAA,MAAI,UAAU;AAAA,QACZ,KAAK;AAAA,OACN;AAAA,KACF;AACDC,kBAAAA,UAAU,MAAM;AACd,WAAK;AACLC,oBAAAA,KAAG,cAAc;AAAA,QACf,QAAQ,KAAK;AACX,kBAAQ,QAAQ,IAAI;AACpB,kBAAQ,IAAI,IAAI,WAAW;AAC3B,yBAAe,QAAQ,IAAI,cAAc;AACzC,wBAAc,SAAS,WAAW,QAAQ,KAAK,eAAe;AAAA,QAC/D;AAAA,OACF;AAAA,KACF;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,EACD;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrHA,GAAG,WAAW,eAAe;"}