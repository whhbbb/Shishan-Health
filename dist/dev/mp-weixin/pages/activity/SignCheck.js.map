{"version":3,"file":"SignCheck.js","sources":["../../../../../src/pages/activity/SignCheck.vue","../../../../../uniPage:/cGFnZXMvYWN0aXZpdHkvU2lnbkNoZWNrLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"sign-in-wrapper\">\n    <view class=\"sign-in\">\n      <view class=\"content\">\n        <image\n          class=\"sign-in-img\"\n          v-if=\"result === 3\"\n          src=\"../../static/activity/success.png\"\n          mode=\"scaleToFill\"\n        />\n        <image\n          v-else\n          class=\"sign-in-img\"\n          src=\"../../static/activity/warn.png\"\n          mode=\"scaleToFill\"\n        />\n        <view class=\"content-detail\">\n          {{ message[result - 1].detail }}\n        </view>\n      </view>\n      <view class=\"nav\">\n        <button @tap=\"navTo\" class=\"nav-btn\">{{ message[result-1].btn }}</button>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref, reactive } from 'vue'\nimport { http } from '../../utils/http'\nimport { onLoad } from '@dcloudio/uni-app'\n\nconst result = ref<number>(1)\nconst props = defineProps<{\n  id: number\n}>()\nconsole.log(props.id)\nconst message = [\n  {\n    detail:'未报名',\n    btn:'点击报名'\n  },\n  {\n    detail:'请勿重复签到',\n    btn:'我知道了'\n  },\n  {\n    detail:'签到成功',\n    btn:'我知道了'\n  },\n  {\n    detail:'签到截止',\n    btn:'我知道了'\n  },\n  {\n    detail:'签到未开始',\n    btn:'我知道了'\n  }\n]\n\nconst postFeedbackAPI = (data: any) => {\n  return http<any>({\n    url: '/system/useractivity/register',\n    method: 'PUT',\n    data: {\n      activityId: data,\n    },\n  })\n}\n\nconst postFeedback = async (AId: number) => {\n  const res = await postFeedbackAPI(AId)\n  console.log(res)\n  result.value = 1\n}\n\nlet AId = props.id\n\nconst navTo = () => {\n  if(result.value === 1){\n    uni.navigateTo({\n      url: '/pages/activity/SignApply?id=' + AId,\n    })\n  }else{\n    uni.navigateBack()\n  }\n}\nonLoad((options) => {\n  let obj = wx.getLaunchOptionsSync()\n  let query = null\n\n  if (options.scene || obj.query.scene) {\n    console.log('options.scene', options)\n    console.log('obj.query.scene', obj.query)\n    // 这里是用开发者工具模拟的时候要先用 encodeURIComponent 编译，模拟真实传递参数的效果，项目发布审核的时候这句话要注释掉\n    // query = options ? encodeURIComponent(options.scene) : encodeURIComponent(obj.query.scene);\n    query = options ? decodeURIComponent(options.scene) : decodeURIComponent(obj.query.scene)\n    console.log(query)\n    const aNo = query\n    console.log('aNo', aNo)\n    AId = Number(aNo)\n  }\n  // const scene = decodeURIComponent(options.scene)\n  // console.log(\"query\",scene)\n  // if(options.scene){\n  //   const aNo = scene.split('=')[1]\n  //   console.log(\"aNo\",aNo)\n  //   AId =Number(aNo)\n  // }\n  console.log('props', props)\n  if (uni.getStorageSync('token')) {\n    postFeedback(AId)\n  } else {\n    uni.showToast({\n      title: '您尚未登录，请先登录',\n      icon: 'none',\n      duration: 1000,\n      complete: () => {\n        setTimeout(() => {\n          uni.navigateTo({\n            url: '/pages/login/login',\n          })\n        }, 1000)\n      },\n    })\n  }\n})\n</script>\n\n<style lang=\"scss\">\n.sign-in-wrapper {\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .sign-in {\n    width: 100%;\n    height: 80%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: center;\n    .content{\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      .sign-in-img {\n      width: 130rpx;\n      height: 130rpx;\n    }\n    .content-detail{\n      margin-top: 20rpx;\n      font-size: 38rpx;\n      font-weight: bold;\n      text-align: center;\n    }\n    }\n    .nav-btn{\n      width: 300rpx;\n      border-radius: 50rpx;\n      color: #0077B6;\n      font-weight: bold;\n      background-color: rgb(214, 243, 251);\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/activity/SignCheck.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","http","AId","uni","onLoad","wx"],"mappings":";;;;;;;;;;;;AAgCM,UAAA,SAASA,kBAAY,CAAC;AAIpB,YAAA,IAAI,MAAM,EAAE;AACpB,UAAM,UAAU;AAAA,MACd;AAAA,QACE,QAAO;AAAA,QACP,KAAI;AAAA,MACN;AAAA,MACA;AAAA,QACE,QAAO;AAAA,QACP,KAAI;AAAA,MACN;AAAA,MACA;AAAA,QACE,QAAO;AAAA,QACP,KAAI;AAAA,MACN;AAAA,MACA;AAAA,QACE,QAAO;AAAA,QACP,KAAI;AAAA,MACN;AAAA,MACA;AAAA,QACE,QAAO;AAAA,QACP,KAAI;AAAA,MACN;AAAA,IAAA;AAGI,UAAA,kBAAkB,CAAC,SAAc;AACrC,aAAOC,gBAAU;AAAA,QACf,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,MAAM;AAAA,UACJ,YAAY;AAAA,QACd;AAAA,MAAA,CACD;AAAA,IAAA;AAGG,UAAA,eAAe,OAAOC,SAAgB;AACpC,YAAA,MAAM,MAAM,gBAAgBA,IAAG;AACrC,cAAQ,IAAI,GAAG;AACf,aAAO,QAAQ;AAAA,IAAA;AAGjB,QAAI,MAAM,MAAM;AAEhB,UAAM,QAAQ,MAAM;AACf,UAAA,OAAO,UAAU,GAAE;AACpBC,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK,kCAAkC;AAAA,QAAA,CACxC;AAAA,MAAA,OACE;AACHA,sBAAA,MAAI,aAAa;AAAA,MACnB;AAAA,IAAA;AAEFC,kBAAA,OAAO,CAAC,YAAY;AACd,UAAA,MAAMC,mBAAG;AACb,UAAI,QAAQ;AAEZ,UAAI,QAAQ,SAAS,IAAI,MAAM,OAAO;AAC5B,gBAAA,IAAI,iBAAiB,OAAO;AAC5B,gBAAA,IAAI,mBAAmB,IAAI,KAAK;AAGhC,gBAAA,UAAU,mBAAmB,QAAQ,KAAK,IAAI,mBAAmB,IAAI,MAAM,KAAK;AACxF,gBAAQ,IAAI,KAAK;AACjB,cAAM,MAAM;AACJ,gBAAA,IAAI,OAAO,GAAG;AACtB,cAAM,OAAO,GAAG;AAAA,MAClB;AAQQ,cAAA,IAAI,SAAS,KAAK;AACtB,UAAAF,cAAA,MAAI,eAAe,OAAO,GAAG;AAC/B,qBAAa,GAAG;AAAA,MAAA,OACX;AACLA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU,MAAM;AACd,uBAAW,MAAM;AACfA,4BAAAA,MAAI,WAAW;AAAA,gBACb,KAAK;AAAA,cAAA,CACN;AAAA,eACA,GAAI;AAAA,UACT;AAAA,QAAA,CACD;AAAA,MACH;AAAA,IAAA,CACD;;;;;;;;;;;;;AC7HD,GAAG,WAAW,eAAe;"}