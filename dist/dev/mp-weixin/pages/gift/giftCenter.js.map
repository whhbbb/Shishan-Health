{"version":3,"file":"giftCenter.js","sources":["../../../../../src/pages/gift/giftCenter.vue","../../../../../uniPage:/cGFnZXMvZ2lmdC9naWZ0Q2VudGVyLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- tab导航栏 -->\n    <scroll-view\n      scroll-x=\"true\"\n      class=\"nav\"\n      :scroll-left=\"navScrollLeft\"\n      scroll-with-animation=\"true\"\n    >\n      <view\n        v-for=\"(navItem, idx) in navData\"\n        :key=\"idx\"\n        class=\"nav-item\"\n        :class=\"{ active: currentTab === idx }\"\n        @tap=\"switchNav(idx)\"\n      >\n        {{ navItem.text }}\n      </view>\n    </scroll-view>\n\n    <swiper :current=\"currentTab\" duration=\"300\" @change=\"switchTab\">\n      <swiper-item v-for=\"(tabItem, idx) in tabData\" :key=\"idx\" class=\"tab-content\">\n        <view v-if=\"idx === 0\">\n          <!-- 第一个页面的内容 -->\n          <view>\n            <view class=\"content\">\n              <view class=\"left\">\n                <template v-for=\"(item, index) in list\" :key=\"index\">\n                  <view @click=\"goToGoodsDetail(item.id)\" class=\"item\" v-if=\"index % 2 === 0\">\n                    <image class=\"item-img\" :src=\"item.coverPicture\" mode=\"widthFix\"></image>\n                    <view class=\"item-title-box\">\n                      <view class=\"item-title goodsname\">{{ item.name }}</view>\n                    </view>\n                    <view class=\"item-title-box\">\n                      <view class=\"item-title\">{{ item.introduce }}</view>\n                    </view>\n                    <view class=\"name\">\n                      <image class=\"item-ava\" src=\"../../static/gifts/R-C.jpg\"></image>\n                      <text class=\"name-title\">{{ item.price }}</text>\n                      <view class=\"heart\">\n                        <text></text>\n                      </view>\n                    </view>\n                  </view>\n                </template>\n              </view>\n              <view class=\"right\">\n                <template v-for=\"(item, index) in list\" :key=\"index\">\n                  <view @click=\"goToGoodsDetail(item.id)\" class=\"item\" v-if=\"index % 2 === 1\">\n                    <image class=\"item-img\" :src=\"item.coverPicture\" mode=\"widthFix\"></image>\n                    <view class=\"item-title-box\">\n                      <view class=\"item-title goodsname\">{{ item.name }}</view>\n                    </view>\n                    <view class=\"item-title-box\">\n                      <view class=\"item-title\">{{ item.introduce }}</view>\n                    </view>\n                    <view class=\"name\">\n                      <image class=\"item-ava\" src=\"../../static/gifts/R-C.jpg\"></image>\n                      <text class=\"name-title\">{{ item.price }}</text>\n                      <view class=\"heart\">\n                        <text></text>\n                      </view>\n                    </view>\n                  </view>\n                </template>\n              </view>\n            </view>\n          </view>\n        </view>\n\n        <view v-else-if=\"idx === 1\">\n          <!-- 第二个页面的内容 -->\n          <view><order-list></order-list></view>\n        </view>\n      </swiper-item>\n    </swiper>\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport orderList from './components/orderList.vue'\n\nimport { ref, reactive, computed } from 'vue'\nimport { getGiftList } from '@/services/gift'\nimport { onLoad, onShow } from '@dcloudio/uni-app'\n\n//过审\n// 获取当前时间点\n// const currentTime = ref(new Date())\n\n// 计算2023年11月17号的时间点\n// const targetDate = new Date('2023-11-23')\n\n// 判断当前时间是否已经过了2023年11月18号\n// import { getAudit } from '@/services/Audit'\n// const isPastTargetDate = ref<boolean>(true)\n// const getA = async () => {\n//   const res = await getAudit()\n//   console.log(res)\n//   isPastTargetDate.value = res.data\n//   if (!isPastTargetDate.value) {\n//     uni.showToast({\n//       title: '推荐礼品功能尚未实现，敬请期待~',\n//       icon: 'none',\n//       duration: 2000,\n//       complete: function () {\n//         setTimeout(function () {\n//           uni.switchTab({\n//             url: '/pages/index/index',\n//           })\n//         }, 2000) // 在弹窗关闭后，延迟2秒执行页面跳转\n//       },\n//     })\n//   } else {\n//     getGiftLists()\n//   }\n// }\nonLoad(() => {\n  // getA()\n  // 获取宽度\n  getGiftLists()\n  wx.getSystemInfo({\n    success(res) {\n      screenW.value = res.windowWidth\n      console.log(res.windowWidth) // 屏幕宽度\n      const singleNavWidth = res.windowWidth / 5\n      navScrollLeft.value = (currentTab.value - 2) * singleNavWidth\n    },\n  })\n})\nonShow(() => {\n  // getA()\n  getGiftLists()\n})\n//页面滑动切换\nconst screenW = ref<number>()\nconst navScrollLeft = ref(0)\nconst currentTab = ref(0)\nconst navData = ref([{ text: '积分商城' }, { text: '兑换记录' }])\nconst tabData = ref([0, 1]) // 两个页面的索引\n\nconst switchNav = (idx: number) => {\n  const singleNavWidth = screenW.value / 2\n  navScrollLeft.value = (idx - 2) * singleNavWidth\n  if (currentTab.value === idx) {\n    return false\n  } else {\n    currentTab.value = idx\n  }\n  // getA()\n  getGiftLists()\n}\nconst switchTab = (e: any) => {\n  const cur = e.detail.current\n  const singleNavWidth = screenW.value / 2\n  currentTab.value = cur\n  navScrollLeft.value = (cur - 2) * singleNavWidth\n  // getA()\n  getGiftLists()\n}\n\nconst getGiftLists = async () => {\n  const res = await getGiftList()\n  console.log(res.rows)\n  list.value = res.rows\n}\n\nconst list = ref([])\nconst goToGoodsDetail = (id) => {\n  // if (uni.getStorageSync('token')) {\n  //   console.log(id)\n  //   console.log('去商品详情页')\n  uni.navigateTo({\n    url: '/pages/gift/gift?id=' + id,\n  })\n  // } else {\n  //   uni.showToast({\n  //     title: '您尚未登录，请先登录',\n  //     icon: 'none',\n  //     duration: 1000,\n  //     complete: () => {\n  //       setTimeout(() => {\n  //         uni.navigateTo({\n  //           url: '/pages/login/login',\n  //         })\n  //       }, 1000)\n  //     },\n  //   })\n  // }\n}\n</script>\n\n<style scoped>\n/**index.wxss**/\npage {\n  width: 100%;\n  height: 100%;\n}\n\n.container {\n  width: 100%;\n  height: 100vh;\n  padding-top: 80rpx;\n}\n\n.nav {\n  /* 设置tab-nav宽高度 */\n  height: 80rpx;\n  width: 100%;\n\n  /* 假如您需要并排放置两个带边框的框，\n  可通过将 box-sizing 设置为 \"border-box\"。 */\n  box-sizing: border-box;\n\n  overflow: hidden;\n\n  /* 居中 */\n  line-height: 80rpx;\n\n  background: #f7f7f7;\n\n  font-size: 16px;\n\n  /* 规定段落中的文本不进行换行： */\n  white-space: nowrap;\n\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 99;\n}\n\n.nav-item {\n  width: 50%;\n  display: inline-block;\n  text-align: center;\n}\n\n.nav-item.active {\n  color: #428ffb;\n}\n\n.tab-box {\n  background: rgb(31, 201, 96);\n  /* 这里设置成nav的高度 */\n  padding-top: 80rpx;\n  height: 100%;\n  box-sizing: border-box;\n}\n\n.tab-content {\n  /* 裁剪 div 元素中内容的左/右边缘 - 如果溢出元素的内容区域的话： */\n  overflow-y: scroll;\n}\n\n/*\n.container {\n  padding: 10rpx;\n} */\n\n.content {\n  text-align: justify;\n}\n\n.item {\n  background-color: #fff;\n  margin: 10rpx 3%;\n  margin-bottom: 20rpx;\n  display: inline-block;\n  width: 96%;\n  border-radius: 20rpx;\n  overflow: hidden;\n}\n\n.item-ava {\n  width: 40rpx;\n  height: 40rpx;\n  border-radius: 20rpx;\n}\n\n.heart {\n  width: 30rpx;\n  height: 26rpx;\n  margin-right: 8rpx;\n}\n\n.heart {\n  display: flex;\n  align-items: center;\n}\n\n.item-img {\n  width: 100%;\n}\n\n.item-title {\n  font-size: 24rpx;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n  font-family: 'PingFang SC-Medium';\n  color: #1e1e1e;\n  margin: 15rpx;\n  line-height: 27rpx;\n}\n.goodsname {\n  font-size: 30rpx;\n  line-height: 35rpx;\n}\n.item .name {\n  display: flex;\n  padding: 0 15rpx;\n  margin-top: 20rpx;\n  padding-bottom: 10rpx;\n  align-items: center;\n  font-size: 22rpx;\n  color: #1e1e1e;\n  font-family: 'PingFang SC-Medium';\n}\n\n.name image {\n  flex: 0 0 auto;\n}\n\n.item-title-box {\n  display: flex;\n  position: relative;\n}\n\n.name-title {\n  flex: 1;\n  margin-left: 18rpx;\n  margin-right: 20rpx;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n\n.name text:last-child {\n  color: #c4c4c4;\n  text-decoration: underline;\n  line-height: 10rpx;\n}\n\n.left,\n.right {\n  display: inline-block;\n  vertical-align: top;\n  width: 49%;\n}\n</style>\n","import MiniProgramPage from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/gift/giftCenter.vue'\nwx.createPage(MiniProgramPage)"],"names":["onLoad","wx","onShow","ref","getGiftList","uni"],"mappings":";;;;;;;;;AAgFA,MAAA,YAAsB,MAAA;;;;AAqCtBA,kBAAAA,OAAO,MAAM;AAGE;AACbC,oBAAAA,KAAG,cAAc;AAAA,QACf,QAAQ,KAAK;AACX,kBAAQ,QAAQ,IAAI;AACZ,kBAAA,IAAI,IAAI,WAAW;AACrB,gBAAA,iBAAiB,IAAI,cAAc;AAC3B,wBAAA,SAAS,WAAW,QAAQ,KAAK;AAAA,QACjD;AAAA,MAAA,CACD;AAAA,IAAA,CACF;AACDC,kBAAAA,OAAO,MAAM;AAEE;IAAA,CACd;AAED,UAAM,UAAUC,cAAAA;AACV,UAAA,gBAAgBA,kBAAI,CAAC;AACrB,UAAA,aAAaA,kBAAI,CAAC;AAClB,UAAA,UAAUA,kBAAI,CAAC,EAAE,MAAM,OAAO,GAAG,EAAE,MAAM,OAAQ,CAAA,CAAC;AACxD,UAAM,UAAUA,cAAA,IAAI,CAAC,GAAG,CAAC,CAAC;AAEpB,UAAA,YAAY,CAAC,QAAgB;AAC3B,YAAA,iBAAiB,QAAQ,QAAQ;AACzB,oBAAA,SAAS,MAAM,KAAK;AAC9B,UAAA,WAAW,UAAU,KAAK;AACrB,eAAA;AAAA,MAAA,OACF;AACL,mBAAW,QAAQ;AAAA,MACrB;AAEa;IAAA;AAET,UAAA,YAAY,CAAC,MAAW;AACtB,YAAA,MAAM,EAAE,OAAO;AACf,YAAA,iBAAiB,QAAQ,QAAQ;AACvC,iBAAW,QAAQ;AACL,oBAAA,SAAS,MAAM,KAAK;AAErB;IAAA;AAGf,UAAM,eAAe,YAAY;AACzB,YAAA,MAAM,MAAMC,cAAAA;AACV,cAAA,IAAI,IAAI,IAAI;AACpB,WAAK,QAAQ,IAAI;AAAA,IAAA;AAGb,UAAA,OAAOD,kBAAI,CAAA,CAAE;AACb,UAAA,kBAAkB,CAAC,OAAO;AAI9BE,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,yBAAyB;AAAA,MAAA,CAC/B;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7KH,GAAG,WAAW,eAAe;"}