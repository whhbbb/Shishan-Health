{"version":3,"file":"my.js","sources":["../../../../../src/pages/my/my.vue","../../../../../uniPage:/cGFnZXMvbXkvbXkudnVl"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useMemberStore } from '@/stores'\nimport { ref, computed } from 'vue'\nimport { getPersonalInf } from '@/services/personalInf'\nimport { onLoad, onShow } from '@dcloudio/uni-app'\n//过审\n// 获取当前时间点\nconst currentTime = ref(new Date())\n\n// 计算2023年11月17号的时间点\nconst targetDate = new Date('2023-11-23')\n\n// 判断当前时间是否已经过了2023年11月17号\nimport { getAudit } from '@/services/Audit'\nconst isPastTargetDate = ref<boolean>(true)\nconst getA = async () => {\n  const res = await getAudit()\n  console.log(res)\n  isPastTargetDate.value = res.data\n}\n\ntype person = {\n  name: string\n  id: string\n  img: string\n  // 学院\n  college: string\n}\nconst islogin = ref(false)\nconst my = ref<person>({\n  name: '',\n  id: '',\n  img: '../../static/my/headpic.png',\n  college: '',\n})\n\nconst handleNavigate = () => {\n  // if (isPastTargetDate.value) {\n  if (uni.getStorageSync('token')) {\n    uni.navigateTo({\n      url: '/pages/my/components/editUser',\n    })\n  } else {\n    uni.navigateTo({\n      url: '/pages/login/login',\n    })\n  }\n  // }\n}\n\nconst getPersonal = async () => {\n  const res = await getPersonalInf()\n  console.log(res)\n  my.value.name = res.data.nickName\n  // my.value.img=res.data.img\n  my.value.college = res.data.dept.deptName\n  my.value.img = res.data.avatar === '' ? '../../static/my/headpic.png' : res.data.avatar\n}\nonLoad(() => {\n  // if (uni.getStorageSync('token')) {\n  getPersonal()\n  // } else {\n  //   wx.showToast({\n  //     title: '您尚未登录，请先登录',\n  //     icon: 'none',\n  //     duration: 1000,\n  //     complete: () => {\n  //       setTimeout(() => {\n  //         uni.navigateTo({\n  //           url: '/pages/login/login',\n  //         })\n  //       }, 1000)\n  //     },\n  //   })\n  // }\n})\n\nonShow(() => {\n  getA()\n  const token = uni.getStorageSync('token')\n  islogin.value = token ? true : false\n  if (token) {\n    getPersonal()\n  }\n})\n</script>\n\n<template>\n  <!-- 个人中心 -->\n  <view class=\"personal\">\n    <navigator class=\"personal-header\" @click=\"handleNavigate\">\n      <view v-if=\"islogin\" class=\"personal-header-left\">\n        <image class=\"personal-header-left-img\" :src=\"my.img\" />\n        <view class=\"personal-header-left-text\">\n          <view class=\"personal-header-left-text-name\">\n            <!-- {{ memberStore.memberInfo.name }} -->\n            {{ my.name }}\n          </view>\n          <view class=\"personal-header-left-text-college\">\n            <!-- 学号：{{ memberStore.memberInfo.id }} -->\n            {{ my.college }}\n          </view>\n        </view>\n      </view>\n      <view v-else class=\"personal-header-left\">\n        <image class=\"personal-header-left-img\" src=\"../../static/my/headpic.png\" />\n        <view class=\"personal-header-left-text\">\n          <view class=\"personal-header-left-text-name\"> 暂未登录 </view>\n          <view class=\"personal-header-left-text-college\"> 去登陆！ </view>\n        </view>\n      </view>\n      <view class=\"personal-header-right\">\n        <image class=\"personal-header-right-img\" src=\"../../static/my/arrow-right.png\" />\n      </view>\n    </navigator>\n    <view class=\"personal-content\">\n      <navigator class=\"personal-content-item\" url=\"/pages/my/components/myactivity/activity\">\n        <view class=\"personal-content-item-left\">\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/user-activity.png\" />\n          <view class=\"personal-content-item-left-text\"> 我的活动 </view>\n        </view>\n        <view class=\"personal-content-item-right\">\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\n        </view>\n      </navigator>\n      <navigator class=\"personal-content-item\" url=\"/pages/my/components/integral\">\n        <view class=\"personal-content-item-left\">\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/user-integral.png\" />\n          <view class=\"personal-content-item-left-text\"> 积分规则 </view>\n        </view>\n        <view class=\"personal-content-item-right\">\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\n        </view>\n      </navigator>\n      <navigator class=\"personal-content-item\" url=\"/pages/my/components/history\">\n        <view class=\"personal-content-item-left\">\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/set_admin.png\" />\n          <view class=\"personal-content-item-left-text\"> 积分记录 </view>\n        </view>\n        <view class=\"personal-content-item-right\">\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\n        </view>\n      </navigator>\n      <navigator class=\"personal-content-item\" url=\"/pages/my/components/contactUs\">\n        <view class=\"personal-content-item-left\">\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/user-call.png\" />\n          <view class=\"personal-content-item-left-text\"> 联系我们 </view>\n        </view>\n        <view class=\"personal-content-item-right\">\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\n        </view>\n      </navigator>\n      <navigator class=\"personal-content-item\" url=\"/pages/my/components/aboutUs\">\n        <view class=\"personal-content-item-left\">\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/user-us.png\" />\n          <view class=\"personal-content-item-left-text\"> 关于我们 </view>\n        </view>\n        <view class=\"personal-content-item-right\">\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\n        </view>\n      </navigator>\n      <navigator\n        v-if=\"isPastTargetDate\"\n        class=\"personal-content-item\"\n        url=\"/pages/my/components/feedBack\"\n      >\n        <view class=\"personal-content-item-left\">\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/user-email.png\" />\n          <view class=\"personal-content-item-left-text\"> 意见反馈 </view>\n        </view>\n        <view class=\"personal-content-item-right\">\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\n        </view>\n      </navigator>\n    </view>\n  </view>\n</template>\n\n<style lang=\"scss\">\n//\n// 个人中心\n//\n.personal {\n  width: 100%;\n  height: 100%;\n  background-color: #f5f5f5;\n\n  .personal-header {\n    width: 100%;\n    height: 200rpx;\n    background-color: #fff;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 30rpx;\n\n    .personal-header-left {\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-start;\n      align-items: center;\n\n      .personal-header-left-img {\n        width: 120rpx;\n        height: 120rpx;\n        border-radius: 50%;\n      }\n\n      .personal-header-left-text {\n        max-width: 70%;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: flex-start;\n        margin-left: 20rpx;\n\n        .personal-header-left-text-name {\n          margin-bottom: 10rpx;\n          font-size: 40rpx;\n          color: #333;\n        }\n\n        .personal-header-left-text-college {\n          font-size: 30rpx;\n          color: #999;\n        }\n      }\n    }\n\n    .personal-header-right {\n      .personal-header-right-img {\n        width: 40rpx;\n        height: 40rpx;\n      }\n    }\n  }\n\n  .personal-content {\n    width: 100%;\n    height: 400rpx;\n    background-color: #fff;\n    margin-top: 20rpx;\n\n    .personal-content-item {\n      width: 100%;\n      height: 120rpx;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 0 30rpx;\n      border-bottom: 2px solid #f5f5f5;\n\n      .personal-content-item-left {\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n\n        .personal-content-item-left-img {\n          width: 40rpx;\n          height: 40rpx;\n        }\n\n        .personal-content-item-left-text {\n          font-size: 30rpx;\n          color: #333;\n          margin-left: 20rpx;\n        }\n      }\n\n      .personal-content-item-right {\n        .personal-content-item-right-img {\n          width: 40rpx;\n          height: 40rpx;\n        }\n      }\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getAudit","uni","getPersonalInf","onLoad","onShow"],"mappings":";;;;;;;;;;AAOoBA,kBAAA,IAAQ,oBAAA,MAAM;AAO5B,UAAA,mBAAmBA,kBAAa,IAAI;AAC1C,UAAM,OAAO,YAAY;AACjB,YAAA,MAAM,MAAMC,eAAAA;AAClB,cAAQ,IAAI,GAAG;AACf,uBAAiB,QAAQ,IAAI;AAAA,IAAA;AAUzB,UAAA,UAAUD,kBAAI,KAAK;AACzB,UAAM,KAAKA,cAAAA,IAAY;AAAA,MACrB,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,KAAK;AAAA,MACL,SAAS;AAAA,IAAA,CACV;AAED,UAAM,iBAAiB,MAAM;AAEvB,UAAAE,cAAA,MAAI,eAAe,OAAO,GAAG;AAC/BA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK;AAAA,QAAA,CACN;AAAA,MAAA,OACI;AACLA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK;AAAA,QAAA,CACN;AAAA,MACH;AAAA,IAAA;AAIF,UAAM,cAAc,YAAY;AACxB,YAAA,MAAM,MAAMC,qBAAAA;AAClB,cAAQ,IAAI,GAAG;AACZ,SAAA,MAAM,OAAO,IAAI,KAAK;AAEzB,SAAG,MAAM,UAAU,IAAI,KAAK,KAAK;AAC9B,SAAA,MAAM,MAAM,IAAI,KAAK,WAAW,KAAK,gCAAgC,IAAI,KAAK;AAAA,IAAA;AAEnFC,kBAAAA,OAAO,MAAM;AAEC;IAAA,CAeb;AAEDC,kBAAAA,OAAO,MAAM;AACN;AACC,YAAA,QAAQH,cAAAA,MAAI,eAAe,OAAO;AAChC,cAAA,QAAQ,QAAQ,OAAO;AAC/B,UAAI,OAAO;AACG;MACd;AAAA,IAAA,CACD;;;;;;;;;;;;;;;;ACnFD,GAAG,WAAW,eAAe;"}