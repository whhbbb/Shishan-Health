{"version":3,"file":"my.js","sources":["../../../../../src/pages/my/my.vue","../../../../../uniPage:/cGFnZXMvbXkvbXkudnVl"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { useMemberStore } from '@/stores'\r\nimport { ref, computed } from 'vue'\r\nimport { getPersonalInf } from '@/services/personalInf'\r\nimport { onLoad, onShow } from '@dcloudio/uni-app'\r\n//过审\r\n// 获取当前时间点\r\nconst currentTime = ref(new Date())\r\n\r\n// 计算2023年11月17号的时间点\r\nconst targetDate = new Date('2023-11-23')\r\n\r\n// 判断当前时间是否已经过了2023年11月17号\r\nimport { getAudit } from '@/services/Audit'\r\nconst isPastTargetDate = ref<boolean>(true)\r\nconst getA = async () => {\r\n  const res = await getAudit()\r\n  console.log(res)\r\n  isPastTargetDate.value = res.data\r\n}\r\n\r\ntype person = {\r\n  name: string\r\n  id: string\r\n  img: string\r\n  // 学院\r\n  college: string\r\n}\r\nconst islogin = ref(false)\r\nconst my = ref<person>({\r\n  name: '',\r\n  id: '',\r\n  img: '../../static/my/headpic.png',\r\n  college: '',\r\n})\r\n\r\nconst handleNavigate = () => {\r\n  // if (isPastTargetDate.value) {\r\n  if (uni.getStorageSync('token')) {\r\n    uni.navigateTo({\r\n      url: '/pages/my/components/editUser',\r\n    })\r\n  } else {\r\n    uni.navigateTo({\r\n      url: '/pages/login/login',\r\n    })\r\n  }\r\n  // }\r\n}\r\n\r\nconst getPersonal = async () => {\r\n  const res = await getPersonalInf()\r\n  console.log(res)\r\n  my.value.name = res.data.nickName\r\n  // my.value.img=res.data.img\r\n  my.value.college = res.data.dept.deptName\r\n  my.value.img = res.data.avatar === '' ? '../../static/my/headpic.png' : res.data.avatar\r\n}\r\nonLoad(() => {\r\n  // if (uni.getStorageSync('token')) {\r\n  getPersonal()\r\n  // } else {\r\n  //   wx.showToast({\r\n  //     title: '您尚未登录，请先登录',\r\n  //     icon: 'none',\r\n  //     duration: 1000,\r\n  //     complete: () => {\r\n  //       setTimeout(() => {\r\n  //         uni.navigateTo({\r\n  //           url: '/pages/login/login',\r\n  //         })\r\n  //       }, 1000)\r\n  //     },\r\n  //   })\r\n  // }\r\n})\r\n\r\nonShow(() => {\r\n  getA()\r\n  const token = uni.getStorageSync('token')\r\n  islogin.value = token ? true : false\r\n  if (token) {\r\n    getPersonal()\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <!-- 个人中心 -->\r\n  <view class=\"personal\">\r\n    <navigator class=\"personal-header\" @click=\"handleNavigate\">\r\n      <view v-if=\"islogin\" class=\"personal-header-left\">\r\n        <image class=\"personal-header-left-img\" :src=\"my.img\" />\r\n        <view class=\"personal-header-left-text\">\r\n          <view class=\"personal-header-left-text-name\">\r\n            <!-- {{ memberStore.memberInfo.name }} -->\r\n            {{ my.name }}\r\n          </view>\r\n          <view class=\"personal-header-left-text-college\">\r\n            <!-- 学号：{{ memberStore.memberInfo.id }} -->\r\n            {{ my.college }}\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view v-else class=\"personal-header-left\">\r\n        <image class=\"personal-header-left-img\" src=\"../../static/my/headpic.png\" />\r\n        <view class=\"personal-header-left-text\">\r\n          <view class=\"personal-header-left-text-name\"> 暂未登录 </view>\r\n          <view class=\"personal-header-left-text-college\"> 去登陆！ </view>\r\n        </view>\r\n      </view>\r\n      <view class=\"personal-header-right\">\r\n        <image class=\"personal-header-right-img\" src=\"../../static/my/arrow-right.png\" />\r\n      </view>\r\n    </navigator>\r\n    <view class=\"personal-content\">\r\n      <navigator class=\"personal-content-item\" url=\"/pages/my/components/myactivity/activity\">\r\n        <view class=\"personal-content-item-left\">\r\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/user-activity.png\" />\r\n          <view class=\"personal-content-item-left-text\"> 我的活动 </view>\r\n        </view>\r\n        <view class=\"personal-content-item-right\">\r\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\r\n        </view>\r\n      </navigator>\r\n      <navigator class=\"personal-content-item\" url=\"/pages/my/components/integral\">\r\n        <view class=\"personal-content-item-left\">\r\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/user-integral.png\" />\r\n          <view class=\"personal-content-item-left-text\"> 积分规则 </view>\r\n        </view>\r\n        <view class=\"personal-content-item-right\">\r\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\r\n        </view>\r\n      </navigator>\r\n      <navigator class=\"personal-content-item\" url=\"/pages/my/components/history\">\r\n        <view class=\"personal-content-item-left\">\r\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/set_admin.png\" />\r\n          <view class=\"personal-content-item-left-text\"> 积分记录 </view>\r\n        </view>\r\n        <view class=\"personal-content-item-right\">\r\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\r\n        </view>\r\n      </navigator>\r\n      <navigator class=\"personal-content-item\" url=\"/pages/my/components/contactUs\">\r\n        <view class=\"personal-content-item-left\">\r\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/user-call.png\" />\r\n          <view class=\"personal-content-item-left-text\"> 联系我们 </view>\r\n        </view>\r\n        <view class=\"personal-content-item-right\">\r\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\r\n        </view>\r\n      </navigator>\r\n      <navigator class=\"personal-content-item\" url=\"/pages/my/components/aboutUs\">\r\n        <view class=\"personal-content-item-left\">\r\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/user-us.png\" />\r\n          <view class=\"personal-content-item-left-text\"> 关于我们 </view>\r\n        </view>\r\n        <view class=\"personal-content-item-right\">\r\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\r\n        </view>\r\n      </navigator>\r\n      <navigator\r\n        v-if=\"isPastTargetDate\"\r\n        class=\"personal-content-item\"\r\n        url=\"/pages/my/components/feedBack\"\r\n      >\r\n        <view class=\"personal-content-item-left\">\r\n          <image class=\"personal-content-item-left-img\" src=\"../../static/my/user-email.png\" />\r\n          <view class=\"personal-content-item-left-text\"> 意见反馈 </view>\r\n        </view>\r\n        <view class=\"personal-content-item-right\">\r\n          <image class=\"personal-content-item-right-img\" src=\"../../static/my/arrow-right.png\" />\r\n        </view>\r\n      </navigator>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n//\r\n// 个人中心\r\n//\r\n.personal {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #f5f5f5;\r\n\r\n  .personal-header {\r\n    width: 100%;\r\n    height: 200rpx;\r\n    background-color: #fff;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 30rpx;\r\n\r\n    .personal-header-left {\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: flex-start;\r\n      align-items: center;\r\n\r\n      .personal-header-left-img {\r\n        width: 120rpx;\r\n        height: 120rpx;\r\n        border-radius: 50%;\r\n      }\r\n\r\n      .personal-header-left-text {\r\n        max-width: 70%;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: flex-start;\r\n        margin-left: 20rpx;\r\n\r\n        .personal-header-left-text-name {\r\n          margin-bottom: 10rpx;\r\n          font-size: 40rpx;\r\n          color: #333;\r\n        }\r\n\r\n        .personal-header-left-text-college {\r\n          font-size: 30rpx;\r\n          color: #999;\r\n        }\r\n      }\r\n    }\r\n\r\n    .personal-header-right {\r\n      .personal-header-right-img {\r\n        width: 40rpx;\r\n        height: 40rpx;\r\n      }\r\n    }\r\n  }\r\n\r\n  .personal-content {\r\n    width: 100%;\r\n    height: 400rpx;\r\n    background-color: #fff;\r\n    margin-top: 20rpx;\r\n\r\n    .personal-content-item {\r\n      width: 100%;\r\n      height: 120rpx;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0 30rpx;\r\n      border-bottom: 2px solid #f5f5f5;\r\n\r\n      .personal-content-item-left {\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        align-items: center;\r\n\r\n        .personal-content-item-left-img {\r\n          width: 40rpx;\r\n          height: 40rpx;\r\n        }\r\n\r\n        .personal-content-item-left-text {\r\n          font-size: 30rpx;\r\n          color: #333;\r\n          margin-left: 20rpx;\r\n        }\r\n      }\r\n\r\n      .personal-content-item-right {\r\n        .personal-content-item-right-img {\r\n          width: 40rpx;\r\n          height: 40rpx;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/feidian/计算机设计大赛/xswc_cs/src/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getAudit","uni","getPersonalInf","onLoad","onShow"],"mappings":";;;;;;;;;;AAOoBA,kBAAA,IAAQ,oBAAA,MAAM;AAO5B,UAAA,mBAAmBA,kBAAa,IAAI;AAC1C,UAAM,OAAO,YAAY;AACjB,YAAA,MAAM,MAAMC,eAAAA;AAClB,cAAQ,IAAI,GAAG;AACf,uBAAiB,QAAQ,IAAI;AAAA,IAAA;AAUzB,UAAA,UAAUD,kBAAI,KAAK;AACzB,UAAM,KAAKA,cAAAA,IAAY;AAAA,MACrB,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,KAAK;AAAA,MACL,SAAS;AAAA,IAAA,CACV;AAED,UAAM,iBAAiB,MAAM;AAEvB,UAAAE,cAAA,MAAI,eAAe,OAAO,GAAG;AAC/BA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK;AAAA,QAAA,CACN;AAAA,MAAA,OACI;AACLA,sBAAAA,MAAI,WAAW;AAAA,UACb,KAAK;AAAA,QAAA,CACN;AAAA,MACH;AAAA,IAAA;AAIF,UAAM,cAAc,YAAY;AACxB,YAAA,MAAM,MAAMC,qBAAAA;AAClB,cAAQ,IAAI,GAAG;AACZ,SAAA,MAAM,OAAO,IAAI,KAAK;AAEzB,SAAG,MAAM,UAAU,IAAI,KAAK,KAAK;AAC9B,SAAA,MAAM,MAAM,IAAI,KAAK,WAAW,KAAK,gCAAgC,IAAI,KAAK;AAAA,IAAA;AAEnFC,kBAAAA,OAAO,MAAM;AAEC;IAAA,CAeb;AAEDC,kBAAAA,OAAO,MAAM;AACN;AACC,YAAA,QAAQH,cAAAA,MAAI,eAAe,OAAO;AAChC,cAAA,QAAQ,QAAQ,OAAO;AAC/B,UAAI,OAAO;AACG;MACd;AAAA,IAAA,CACD;;;;;;;;;;;;;;;;ACnFD,GAAG,WAAW,eAAe;"}