{"version":3,"file":"article.js","sources":["../../../../../../src/pages/column/components/article.vue","../../../../../../uniPage:/cGFnZXMvY29sdW1uL2NvbXBvbmVudHMvYXJ0aWNsZS52dWU"],"sourcesContent":["<template>\n  <view class=\"details\">\n    <view class=\"header\">\n      <view class=\"title\">{{ item.title }}</view>\n      <view class=\"time\">{{ item.createTime }}</view>\n    </view>\n    <view class=\"ql-editor\" id=\"content\" ref=\"contentRef\" v-html=\"item.content\"></view>\n    <view class=\"foot\">\n      <view class=\"foot-main\">\n        <image class=\"foot-img\" src=\"../../../static/log.png\" mode=\"heightFix\" />\n        <view class=\"foot-text\">学术晚茶</view>\n      </view>\n      <view class=\"foot-icons\">\n        <view class=\"icon-view\">\n          <image class=\"post-like-image\" src=\"../../../static/column/eyes.png\"></image>\n          <text class=\"post-like-font\">{{ item.viewsNums }}</text>\n        </view>\n        <view class=\"icon-view\">\n          <image v-if=\"!item.tblLike\" class=\"post-like-image\" @tap.stop=\"likeUp(item.id, item.tblLike)\"\n            src=\"../../../static/column/heart.png\"></image>\n          <image v-else class=\"post-like-image\" @tap.stop=\"likeUp(item.id, item.tblLike)\"\n            src=\"../../../static/column/heart-active.png\"></image>\n          <text class=\"post-like-font\">{{ item.likeCount }}</text>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup lang=\"ts\">\nimport '@/styles/quill.bubble.css'\nimport '@/styles/quill.snow.css'\nimport '@/styles/quill.core.css'\nimport { ref, reactive } from 'vue'\nimport { onLoad, onUnload } from '@dcloudio/uni-app'\nimport { getColumnsDetailAPI, likeUpAPI, likeDownAPI } from '@/services/column'\nconst contentRef = ref<HTMLElement | null>(null)\ntype details = {\n  title: string\n  createTime: string\n  content: string\n  viewsNums: number\n  likeCount: number\n  tblLike: object\n  id: number\n\n}\nconst props = defineProps<{\n  id: number\n  kind: number\n}>()\nconst item = ref<details>()\nconst getColumnsDetail = async (id: number, type: number = 2) => {\n  const res = await getColumnsDetailAPI(id, type)\n  console.log(res.data)\n  item.value = res.data\n  item.value.content = item.value.content.replace(\n    /\\<img/g,\n    '<img style=\"max-width:100%;height:auto;\" ',\n  )\n}\nonLoad(() => {\n  console.log(props.id)\n  console.log(props.kind)\n  getColumnsDetail(props.id)\n})\n\nconst likeUp = (id: number, tblLike: object) => {\n  // 判断是否有token\n  if (uni.getStorageSync('token')) {\n    if (tblLike) {\n      console.log('取消点赞')\n      likeDownAPI(id).then((res) => {\n        getColumnsDetail(id, 1)\n      })\n    } else {\n      console.log('点赞')\n      likeUpAPI(id).then((res) => {\n        getColumnsDetail(id, 1)\n      })\n    }\n  } else {\n    wx.showToast({\n      title: '您尚未登录，请先登录',\n      icon: 'none',\n      duration: 1000,\n      complete: () => {\n        setTimeout(() => {\n          uni.navigateTo({\n            url: '/pages/login/login',\n          })\n        }, 1000)\n      },\n    })\n  }\n}\n</script>\n<style scoped lang=\"scss\">\n.details {\n  width: 90%;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .header {\n    width: 91%;\n\n    .title {\n      font-size: 45rpx;\n      font-weight: bold;\n      margin-top: 10rpx;\n      margin-bottom: 15rpx;\n    }\n\n    .time {\n      font-size: 30rpx;\n      color: #999;\n    }\n  }\n\n  .foot {\n    border-top: 1px solid whitesmoke;\n    width: 90%;\n    margin: 0 auto;\n    margin-bottom: 5vh;\n    padding-top: 3vh;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    .foot-main {\n      display: flex;\n      align-items: center;\n\n      .foot-img {\n        height: 70rpx;\n        margin-right: 15rpx;\n        border-radius: 15%;\n      }\n\n      .foot-text {\n        line-height: 80rpx;\n        font-size: 30rpx;\n        color: #999;\n      }\n    }\n\n    .foot-icons {\n      display: flex;\n      width: 30vw;\n      justify-content: space-between;\n      flex-direction: row;\n      align-items: center;\n\n      .icon-view {\n        height: 80rpx;\n        line-height: 80rpx;\n\n        .post-like-font {\n          // vertical-align: middle;\n          font-size: 28rpx;\n        }\n      }\n\n      .post-like-image {\n        font-size: 15rpx;\n        width: 30rpx;\n        height: 30rpx;\n        margin-right: 10rpx;\n      }\n    }\n  }\n\n  .content {\n    width: 100%;\n  }\n}\n.ql-editor{\n  line-height: 1.5;\n}\n</style>\n","import MiniProgramPage from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/column/components/article.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getColumnsDetailAPI","onLoad","uni","likeDownAPI","likeUpAPI","wx"],"mappings":";;;;;;;;;;;;;;AAoCmBA,kBAAAA,IAAwB,IAAI;AAe/C,UAAM,OAAOA,cAAAA;AACb,UAAM,mBAAmB,OAAO,IAAY,OAAe,MAAM;AAC/D,YAAM,MAAM,MAAMC,gBAAAA,oBAAoB,IAAI,IAAI;AACtC,cAAA,IAAI,IAAI,IAAI;AACpB,WAAK,QAAQ,IAAI;AACjB,WAAK,MAAM,UAAU,KAAK,MAAM,QAAQ;AAAA,QACtC;AAAA,QACA;AAAA,MAAA;AAAA,IACF;AAEFC,kBAAAA,OAAO,MAAM;AACH,cAAA,IAAI,MAAM,EAAE;AACZ,cAAA,IAAI,MAAM,IAAI;AACtB,uBAAiB,MAAM,EAAE;AAAA,IAAA,CAC1B;AAEK,UAAA,SAAS,CAAC,IAAY,YAAoB;AAE1C,UAAAC,cAAA,MAAI,eAAe,OAAO,GAAG;AAC/B,YAAI,SAAS;AACX,kBAAQ,IAAI,MAAM;AAClBC,0BAAAA,YAAY,EAAE,EAAE,KAAK,CAAC,QAAQ;AAC5B,6BAAiB,IAAI,CAAC;AAAA,UAAA,CACvB;AAAA,QAAA,OACI;AACL,kBAAQ,IAAI,IAAI;AAChBC,0BAAAA,UAAU,EAAE,EAAE,KAAK,CAAC,QAAQ;AAC1B,6BAAiB,IAAI,CAAC;AAAA,UAAA,CACvB;AAAA,QACH;AAAA,MAAA,OACK;AACLC,sBAAAA,KAAG,UAAU;AAAA,UACX,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU,MAAM;AACd,uBAAW,MAAM;AACfH,4BAAAA,MAAI,WAAW;AAAA,gBACb,KAAK;AAAA,cAAA,CACN;AAAA,eACA,GAAI;AAAA,UACT;AAAA,QAAA,CACD;AAAA,MACH;AAAA,IAAA;;;;;;;;;;;;;;;;;;;AC7FF,GAAG,WAAW,eAAe;"}