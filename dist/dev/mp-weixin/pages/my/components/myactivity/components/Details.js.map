{"version":3,"file":"Details.js","sources":["../../../../../../../../src/pages/my/components/myactivity/components/Details.vue","../../../../../../../../uniComponent:/L1VzZXJzL3doaGJiYi9Eb2N1bWVudHMvUHJvamVjdC1zdG9yYWdlL3hzd2NfZ2FtZS9zcmMvcGFnZXMvbXkvY29tcG9uZW50cy9teWFjdGl2aXR5L2NvbXBvbmVudHMvRGV0YWlscy52dWU"],"sourcesContent":["<template>\r\n  <view v-if=\"isLogin && hasActivity\" class=\"my-activity\">\r\n    <navigator class=\"activity-details-item\" v-for=\"item in activities\" :key=\"item.id\" :url=\"item.url\">\r\n      <view class=\"img-view\">\r\n        <image :src=\"item.img\" mode=\"scaleToFill\" />\r\n      </view>\r\n\r\n      <view class=\"info-view\">\r\n\r\n        <view class=\"title\">\r\n          <span class=\"title-content\">\r\n            {{ item.title }}\r\n          </span>\r\n        </view>\r\n\r\n        <view class=\"detail-info\">\r\n\r\n          <!-- <view class=\"sponsor\"> 发起学院：{{ item.sponsorCollege }} </view> -->\r\n\r\n          <view class=\"activity-details-item-content-time\">\r\n            <view>\r\n              <image class=\"img\" src=\"../../../static/bottomBar/sign-in-black.png\" />\r\n            </view>\r\n            <view>{{ item.time }}</view>\r\n          </view>\r\n\r\n          <view class=\"activity-details-item-content-address\">\r\n            <image class=\"img\" src=\"../../../static/activity/loco.png\" />{{ item.address }}\r\n          </view>\r\n          <view v-if=\"item.status=='审核中'||item.status=='待修改'\" class=\"status warn\">\r\n            {{ item.status }}\r\n          </view>\r\n          <view v-else-if=\"item.status=='审核通过'\" class=\"status success\">\r\n            {{ item.status }}\r\n          </view>\r\n          <view v-else-if=\"item.status=='进行中'\" class=\"status success\">\r\n            {{ item.status }}\r\n          </view>\r\n          <view v-else class=\"status warn\">\r\n            {{ item.status }}\r\n          </view>\r\n\r\n          <!-- <view class=\"population\">\r\n                <image class=\"img\" src=\"../../../static/activity/User.png\"></image\r\n                >{{ item.population }} / {{ item.limitPopulation }}\r\n              </view>\r\n\r\n              <view class=\"activity-class\">\r\n                <uni-tag v-if=\"item.sort == 1\" type=\"primary\" text=\"学术晚茶\" />\r\n                <uni-tag v-else type=\"success\" text=\"学术社区\" />\r\n              </view> -->\r\n        </view>\r\n      </view>\r\n\r\n    </navigator>\r\n  </view>\r\n\r\n  <view class=\"no-activity\" v-else-if=\"isLogin && !hasActivity\">\r\n    <view>暂无活动</view>\r\n  </view>\r\n\r\n  <view class=\"noLogin\" @click=\"goLogin\" v-else>\r\n    <uni-icons type=\"person\" size=\"90\"></uni-icons>\r\n    <view>尚未登陆 , 点击登录</view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive } from 'vue'\r\nimport { onShow } from '@dcloudio/uni-app'\r\nimport { onMounted } from 'vue'\r\nimport { getMyActivityAPI, getMyAddActivityAPI } from '@/services/my'\r\ntype Activity = {\r\n  id: number\r\n  title: string\r\n  status: string\r\n  time: string\r\n  address: string\r\n  img?: string\r\n  // 报名人数和限制人数\r\n  population?: number\r\n  limitPopulation?: number\r\n  // 发起学院\r\n  sponsorCollege: string\r\n  url: string\r\n  sort: number\r\n}\r\nconst props = defineProps({\r\n  state: {\r\n    type: Number,\r\n    default: 0\r\n  },\r\n  refresh: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\nconst activities = ref<Activity[]>([])\r\n\r\nconst getMyActivity = async () => {\r\n  uni.showLoading({\r\n    title: '加载中',\r\n  })\r\n  let res;\r\n  if (props.state == 0) {\r\n    res = await getMyActivityAPI()\r\n  } else {\r\n    res = await getMyAddActivityAPI()\r\n  }\r\n  uni.hideLoading()\r\n  activities.value = []\r\n  if (res.data.length > 0) {\r\n    res.data.forEach((item: any) => {\r\n      activities.value.push({\r\n        id: item.id,\r\n        title: item.userImg2,\r\n        status: props.state == 0 ? (item.status == 1 ? '进行中' : '已结束') : (item.state == 1 ? '审核中' : item.state == 2 ? '审核通过' : '待修改'),\r\n        time: item.lat,\r\n        address: item.address,\r\n        sponsorCollege: item.hbKeyword,\r\n        population: item.hbNum,\r\n        limitPopulation: item.hot,\r\n        url: props.state == 0 ? (`/pages/activity/ActivityDetails?id=${item.activityId}`) : (item.state == 2 ? `/pages/activity/ActivityDetails?id=${item.id}` : `/pages/activity/ActivityEdit?id=${item.id}`),\r\n        sort: item.sort,\r\n        img: item.lng\r\n      })\r\n    })\r\n  } else {\r\n    // uni.showToast({\r\n    //   title: '暂无活动',\r\n    //   icon: 'none',\r\n    // })\r\n    hasActivity.value = false\r\n  }\r\n}\r\n// 是否登录\r\nconst isLogin = ref<boolean>(true)\r\n// 有无活动\r\nconst hasActivity = ref<boolean>(true)\r\nonMounted(() => {\r\n  if (uni.getStorageSync('token')) {\r\n    getMyActivity()\r\n  } else {\r\n    isLogin.value = false\r\n  }\r\n})\r\nonShow(() => {\r\n  if (uni.getStorageSync('token')) {\r\n    getMyActivity()\r\n  } else {\r\n    isLogin.value = false\r\n  }\r\n})\r\nconst goLogin = () => {\r\n  uni.navigateTo({\r\n    url: '/pages/login/login',\r\n  })\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.my-activity {\r\n  width: 82%;\r\n  margin: 20rpx auto;\r\n\r\n  .activity-details-item {\r\n    background-color: #fff;\r\n    box-shadow: 0 0 20px #e5e4e4;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: center;\r\n    align-items: flex-start;\r\n    width: 100%;\r\n    padding: 30rpx;\r\n    border-radius: 20rpx;\r\n    margin-bottom: 30rpx;\r\n\r\n    .img-view {\r\n      margin: auto 0;\r\n      width: 40%;\r\n      height: 320rpx;\r\n      margin-right: 32rpx;\r\n\r\n      image {\r\n        border-radius: 8rpx;\r\n      }\r\n    }\r\n\r\n    .info-view {\r\n\r\n      flex: 1;\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n\r\n      .title {\r\n        font-size: 30rpx;\r\n        color: #000000;\r\n        margin-bottom: 30rpx;\r\n        text-overflow: ellipsis;\r\n        -webkit-line-clamp: 3;\r\n        display: -webkit-box;\r\n        -webkit-box-orient: vertical;\r\n      }\r\n\r\n      .detail-info {\r\n        flex: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n        position: relative;\r\n\r\n        .sponsor {\r\n          margin-bottom: 10rpx;\r\n          font-size: 30rpx;\r\n          margin-bottom: 20rpx;\r\n        }\r\n\r\n        .activity-details-item-content-time {\r\n          position: relative;\r\n          font-size: 25rpx;\r\n          width: 200rpx;\r\n          color: #666666;\r\n          overflow: hidden;\r\n          margin-bottom: 20rpx;\r\n          display: flex;\r\n          flex-direction: row;\r\n\r\n          .img {\r\n            position: relative;\r\n            top: 0;\r\n            width: 30rpx;\r\n            height: 30rpx;\r\n            margin-right: 10rpx;\r\n          }\r\n        }\r\n\r\n        .activity-details-item-content-address {\r\n          font-size: 25rpx;\r\n          color: #666666;\r\n\r\n          .img {\r\n            width: 30rpx;\r\n            height: 30rpx;\r\n            margin-right: 10rpx;\r\n          }\r\n        }\r\n\r\n        .status{\r\n          margin-top: 10rpx;\r\n          flex: 1;\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          align-items: flex-end;\r\n          color: #666666;\r\n          font-size: 28rpx;\r\n          font-weight: bold;\r\n        }\r\n        .warn{\r\n          color: #f4cb34;\r\n        }\r\n        .success{\r\n          color: #0077b6;\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\n\r\n.no-activity {\r\n  padding: 40px;\r\n  text-align: center;\r\n}\r\n\r\n.noLogin {\r\n  padding: 40px;\r\n  text-align: center;\r\n}\r\n</style>","import Component from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/my/components/myactivity/components/Details.vue'\nwx.createComponent(Component)"],"names":["ref","uni","getMyActivityAPI","getMyAddActivityAPI","onMounted","onShow"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGM,UAAA,aAAaA,kBAAgB,CAAA,CAAE;AAErC,UAAM,gBAAgB,YAAY;AAChCC,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,MAAA,CACR;AACG,UAAA;AACA,UAAA,MAAM,SAAS,GAAG;AACpB,cAAM,MAAMC,YAAAA;MAAiB,OACxB;AACL,cAAM,MAAMC,YAAAA;MACd;AACAF,oBAAA,MAAI,YAAY;AAChB,iBAAW,QAAQ;AACf,UAAA,IAAI,KAAK,SAAS,GAAG;AACnB,YAAA,KAAK,QAAQ,CAAC,SAAc;AAC9B,qBAAW,MAAM,KAAK;AAAA,YACpB,IAAI,KAAK;AAAA,YACT,OAAO,KAAK;AAAA,YACZ,QAAQ,MAAM,SAAS,IAAK,KAAK,UAAU,IAAI,QAAQ,QAAU,KAAK,SAAS,IAAI,QAAQ,KAAK,SAAS,IAAI,SAAS;AAAA,YACtH,MAAM,KAAK;AAAA,YACX,SAAS,KAAK;AAAA,YACd,gBAAgB,KAAK;AAAA,YACrB,YAAY,KAAK;AAAA,YACjB,iBAAiB,KAAK;AAAA,YACtB,KAAK,MAAM,SAAS,IAAK,sCAAsC,KAAK,UAAU,KAAO,KAAK,SAAS,IAAI,sCAAsC,KAAK,EAAE,KAAK,mCAAmC,KAAK,EAAE;AAAA,YACnM,MAAM,KAAK;AAAA,YACX,KAAK,KAAK;AAAA,UAAA,CACX;AAAA,QAAA,CACF;AAAA,MAAA,OACI;AAKL,oBAAY,QAAQ;AAAA,MACtB;AAAA,IAAA;AAGI,UAAA,UAAUD,kBAAa,IAAI;AAE3B,UAAA,cAAcA,kBAAa,IAAI;AACrCI,kBAAAA,UAAU,MAAM;AACV,UAAAH,cAAA,MAAI,eAAe,OAAO,GAAG;AACjB;MAAA,OACT;AACL,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IAAA,CACD;AACDI,kBAAAA,OAAO,MAAM;AACP,UAAAJ,cAAA,MAAI,eAAe,OAAO,GAAG;AACjB;MAAA,OACT;AACL,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IAAA,CACD;AACD,UAAM,UAAU,MAAM;AACpBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MAAA,CACN;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3JH,GAAG,gBAAgB,SAAS;"}