{"version":3,"file":"article.js","sources":["../../../../../../src/pages/column/components/article.vue","../../../../../../uniPage:/cGFnZXMvY29sdW1uL2NvbXBvbmVudHMvYXJ0aWNsZS52dWU"],"sourcesContent":["<template>\r\n  <view class=\"details\">\r\n    <view class=\"header\">\r\n      <view class=\"title\">{{ item.title }}</view>\r\n      <view class=\"time\">{{ item.createTime }}</view>\r\n    </view>\r\n    <view class=\"ql-editor\" id=\"content\" ref=\"contentRef\" v-html=\"item.content\"></view>\r\n    <view class=\"foot\">\r\n      <view class=\"foot-main\">\r\n        <image class=\"foot-img\" src=\"../../../static/log.png\" mode=\"scaleToFill\" />\r\n        <view class=\"foot-text\">学术晚茶</view>\r\n      </view>\r\n      <view class=\"foot-icons\">\r\n        <view class=\"icon-view\">\r\n          <uni-icons type=\"eye-filled\" size=\"20\"></uni-icons>\r\n          <text class=\"post-like-font\">{{ item.viewsNums }}</text>\r\n        </view>\r\n        <view class=\"icon-view\">\r\n          <uni-icons\r\n            v-if=\"!item.tblLike\"\r\n            @tap.stop=\"likeUp(item.id, item.tblLike)\"\r\n            type=\"heart\"\r\n            size=\"20\"\r\n          ></uni-icons>\r\n          <uni-icons\r\n            v-else\r\n            type=\"heart-filled\"\r\n            size=\"20\"\r\n            @tap.stop=\"likeUp(item.id, item.tblLike)\"\r\n            color=\"red\"\r\n          ></uni-icons>\r\n          <text class=\"post-like-font\">{{ item.likeCount }}</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport '@/styles/quill.bubble.css'\r\nimport '@/styles/quill.snow.css'\r\nimport '@/styles/quill.core.css'\r\nimport { ref, reactive } from 'vue'\r\nimport { onLoad, onUnload } from '@dcloudio/uni-app'\r\nimport { getColumnsDetailAPI, likeUpAPI, likeDownAPI } from '@/services/column'\r\nconst contentRef = ref<HTMLElement | null>(null)\r\ntype details = {\r\n  title: string\r\n  createTime: string\r\n  content: string\r\n}\r\nconst props = defineProps<{\r\n  id: number\r\n  kind: number\r\n}>()\r\nconst item = ref<details>({\r\n  title: '',\r\n  createTime: '',\r\n  content: '',\r\n})\r\nconst getColumnsDetail = async (id: number, type: number = 2) => {\r\n  const res = await getColumnsDetailAPI(id, type)\r\n  console.log(res.data)\r\n  item.value = res.data\r\n  item.value.content = item.value.content.replace(\r\n    /\\<img/g,\r\n    '<img style=\"max-width:100%;height:auto\" ',\r\n  )\r\n}\r\nonLoad(() => {\r\n  console.log(props.id)\r\n  console.log(props.kind)\r\n  getColumnsDetail(props.id)\r\n})\r\n\r\nconst likeUp = (id: number, tblLike: object) => {\r\n  // 判断是否有token\r\n  if (uni.getStorageSync('token')) {\r\n    if (tblLike) {\r\n      console.log('取消点赞')\r\n      likeDownAPI(id).then((res) => {\r\n        getColumnsDetail(id, 1)\r\n      })\r\n    } else {\r\n      console.log('点赞')\r\n      likeUpAPI(id).then((res) => {\r\n        getColumnsDetail(id, 1)\r\n      })\r\n    }\r\n  } else {\r\n    wx.showToast({\r\n      title: '您尚未登录，请先登录',\r\n      icon: 'none',\r\n      duration: 1000,\r\n      complete: () => {\r\n        setTimeout(() => {\r\n          uni.navigateTo({\r\n            url: '/pages/login/login',\r\n          })\r\n        }, 1000)\r\n      },\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.details {\r\n  width: 100%;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  .header {\r\n    width: 90%;\r\n    margin: 0 auto;\r\n    .title {\r\n      font-size: 45rpx;\r\n      font-weight: bold;\r\n      margin-top: 10rpx;\r\n      margin-bottom: 15rpx;\r\n    }\r\n\r\n    .time {\r\n      font-size: 30rpx;\r\n      color: #999;\r\n      margin-bottom: 20rpx;\r\n      padding-left: 15rpx;\r\n    }\r\n  }\r\n  .foot {\r\n    border-top: 1px solid whitesmoke;\r\n    width: 90%;\r\n    margin: 0 auto;\r\n    margin-bottom: 5vh;\r\n    padding-top: 3vh;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .foot-main {\r\n      display: flex;\r\n      flex-direction: row;\r\n      .foot-img {\r\n        height: 80rpx;\r\n        width: 80rpx;\r\n        margin-right: 15rpx;\r\n        border-radius: 15%;\r\n      }\r\n      .foot-text {\r\n        line-height: 80rpx;\r\n        font-size: 30rpx;\r\n        color: #999;\r\n      }\r\n    }\r\n    .foot-icons {\r\n      display: flex;\r\n      width: 35vw;\r\n      justify-content: space-between;\r\n      flex-direction: row;\r\n      .icon-view {\r\n        height: 80rpx;\r\n        line-height: 80rpx;\r\n        .post-like-font {\r\n          vertical-align: middle;\r\n          font-size: 30rpx;\r\n          margin-left: 10rpx;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .content {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/feidian/计算机设计大赛/xswc_cs/src/pages/column/components/article.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getColumnsDetailAPI","onLoad","uni","likeDownAPI","likeUpAPI","wx"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AA6CmBA,kBAAAA,IAAwB,IAAI;AAU/C,UAAM,OAAOA,cAAAA,IAAa;AAAA,MACxB,OAAO;AAAA,MACP,YAAY;AAAA,MACZ,SAAS;AAAA,IAAA,CACV;AACD,UAAM,mBAAmB,OAAO,IAAY,OAAe,MAAM;AAC/D,YAAM,MAAM,MAAMC,gBAAAA,oBAAoB,IAAI,IAAI;AACtC,cAAA,IAAI,IAAI,IAAI;AACpB,WAAK,QAAQ,IAAI;AACjB,WAAK,MAAM,UAAU,KAAK,MAAM,QAAQ;AAAA,QACtC;AAAA,QACA;AAAA,MAAA;AAAA,IACF;AAEFC,kBAAAA,OAAO,MAAM;AACH,cAAA,IAAI,MAAM,EAAE;AACZ,cAAA,IAAI,MAAM,IAAI;AACtB,uBAAiB,MAAM,EAAE;AAAA,IAAA,CAC1B;AAEK,UAAA,SAAS,CAAC,IAAY,YAAoB;AAE1C,UAAAC,cAAA,MAAI,eAAe,OAAO,GAAG;AAC/B,YAAI,SAAS;AACX,kBAAQ,IAAI,MAAM;AAClBC,0BAAAA,YAAY,EAAE,EAAE,KAAK,CAAC,QAAQ;AAC5B,6BAAiB,IAAI,CAAC;AAAA,UAAA,CACvB;AAAA,QAAA,OACI;AACL,kBAAQ,IAAI,IAAI;AAChBC,0BAAAA,UAAU,EAAE,EAAE,KAAK,CAAC,QAAQ;AAC1B,6BAAiB,IAAI,CAAC;AAAA,UAAA,CACvB;AAAA,QACH;AAAA,MAAA,OACK;AACLC,sBAAAA,KAAG,UAAU;AAAA,UACX,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU,MAAM;AACd,uBAAW,MAAM;AACfH,4BAAAA,MAAI,WAAW;AAAA,gBACb,KAAK;AAAA,cAAA,CACN;AAAA,eACA,GAAI;AAAA,UACT;AAAA,QAAA,CACD;AAAA,MACH;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrGF,GAAG,WAAW,eAAe;"}