{"version":3,"file":"makeRecd.js","sources":["../../../../../src/pages/recommend/makeRecd.vue","../../../../../uniPage:/cGFnZXMvcmVjb21tZW5kL21ha2VSZWNkLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view v-if=\"isPastTargetDate\" class=\"container\">\r\n    <view class=\"text-view\">请输入活动主题</view>\r\n    <textarea\r\n      auto-focus=\"true\"\r\n      auto-height=\"true\"\r\n      class=\"title\"\r\n      placeholder=\"活动主题\"\r\n      @input=\"getTInput\"\r\n    />\r\n    <view class=\"text-view\">请输入活动主讲人</view>\r\n\r\n    <textarea auto-height=\"true\" class=\"person\" placeholder=\"活动主讲人\" @input=\"getPInput\" />\r\n    <view class=\"text-view\">请输入推荐内容</view>\r\n\r\n    <textarea\r\n      maxlength=\"-1\"\r\n      auto-height=\"true\"\r\n      class=\"desc\"\r\n      placeholder=\"推荐内容\"\r\n      @input=\"getInput\"\r\n    />\r\n    <view class=\"b-view\" :style=\"{ bottom: safeAreaInsets?.bottom!+ 30 + 'px' }\">\r\n      <button type=\"primary\" @click=\"publish\">发布推荐</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed } from 'vue'\r\nimport { newRecommend } from '@/services/recommed'\r\nimport { onLoad, onShow } from '@dcloudio/uni-app'\r\n//过审\r\n// 获取当前时间点\r\nconst currentTime = ref(new Date())\r\n\r\n// 计算2023年11月17号的时间点\r\nconst targetDate = new Date('2023-11-25')\r\n\r\n// 判断当前时间是否已经过了2023年11月18号\r\nimport { getAudit } from '@/services/Audit'\r\nconst isPastTargetDate = ref<boolean>(false)\r\nconst getA = async () => {\r\n  const res = await getAudit()\r\n  console.log(res)\r\n  isPastTargetDate.value = res.data\r\n}\r\nonLoad(() => {\r\n  getA()\r\n})\r\n// 获取屏幕边界到安全区域距离\r\nconst { safeAreaInsets } = uni.getSystemInfoSync()\r\n\r\nconst title = ref('')\r\nconst person = ref('')\r\nconst desc = ref('')\r\n\r\nconst getTInput = (e) => {\r\n  title.value = e.detail.value\r\n}\r\nconst getPInput = (e) => {\r\n  person.value = e.detail.value\r\n}\r\nconst getInput = (e) => {\r\n  desc.value = e.detail.value\r\n}\r\nconst sendC = async () => {\r\n  console.log({\r\n    id: null,\r\n    content: desc.value,\r\n    lecturerName: person.value,\r\n    theme: title.value,\r\n  })\r\n  const res = await newRecommend({\r\n    id: null,\r\n    content: desc.value,\r\n    lecturerName: person.value,\r\n    theme: title.value,\r\n  })\r\n  console.log(res)\r\n  if (res.code == 200) {\r\n    uni.showToast({\r\n      title: '提交成功',\r\n      icon: 'success',\r\n      duration: 1000,\r\n      complete: () => {\r\n        setTimeout(() => {\r\n          uni.reLaunch({ url: '/pages/recommend/recommend' })\r\n          title.value = ''\r\n          person.value = ''\r\n          desc.value = ''\r\n        }, 1000)\r\n      },\r\n    })\r\n  } else {\r\n    console.log('提交失败！')\r\n    uni.showToast({\r\n      title: '提交失败！',\r\n      icon: 'error',\r\n      duration: 1000,\r\n    })\r\n  }\r\n}\r\nconst publish = () => {\r\n  if (title.value === '') {\r\n    uni.showToast({\r\n      title: '请填写活动主题！',\r\n      icon: 'none',\r\n    })\r\n    return\r\n  } else if (person.value === '') {\r\n    uni.showToast({\r\n      title: '请填写活动发起人姓名',\r\n      icon: 'none',\r\n    })\r\n  } else if (getInput.value === '') {\r\n    uni.showToast({\r\n      title: '请填写推荐理由',\r\n      icon: 'none',\r\n    })\r\n  } else {\r\n    sendC()\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.container {\r\n  padding-top: 20rpx;\r\n  padding-bottom: 40%;\r\n}\r\ntextarea {\r\n  margin: 30rpx auto;\r\n  width: 85vw;\r\n  border: 1px solid #d6d6d6;\r\n  border-radius: 10rpx;\r\n  padding: 10rpx;\r\n}\r\n.title {\r\n  height: 90rpx !important;\r\n}\r\n.person {\r\n  height: 90rpx !important;\r\n}\r\n.desc {\r\n  min-height: 300rpx;\r\n}\r\n.text-view {\r\n  font-size: 30rpx;\r\n  color: #666;\r\n  margin-left: 30rpx;\r\n}\r\n.b-view {\r\n  z-index: 99;\r\n  width: 90%;\r\n  position: fixed;\r\n  bottom: 30rpx;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/feidian/计算机设计大赛/xswc_cs/src/pages/recommend/makeRecd.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getAudit","onLoad","uni","newRecommend"],"mappings":";;;;;;;;;;AAkCoBA,kBAAA,IAAQ,oBAAA,MAAM;AAO5B,UAAA,mBAAmBA,kBAAa,KAAK;AAC3C,UAAM,OAAO,YAAY;AACjB,YAAA,MAAM,MAAMC,eAAAA;AAClB,cAAQ,IAAI,GAAG;AACf,uBAAiB,QAAQ,IAAI;AAAA,IAAA;AAE/BC,kBAAAA,OAAO,MAAM;AACN;IAAA,CACN;AAED,UAAM,EAAE,eAAA,IAAmBC,cAAA,MAAI,kBAAkB;AAE3C,UAAA,QAAQH,kBAAI,EAAE;AACd,UAAA,SAASA,kBAAI,EAAE;AACf,UAAA,OAAOA,kBAAI,EAAE;AAEb,UAAA,YAAY,CAAC,MAAM;AACjB,YAAA,QAAQ,EAAE,OAAO;AAAA,IAAA;AAEnB,UAAA,YAAY,CAAC,MAAM;AAChB,aAAA,QAAQ,EAAE,OAAO;AAAA,IAAA;AAEpB,UAAA,WAAW,CAAC,MAAM;AACjB,WAAA,QAAQ,EAAE,OAAO;AAAA,IAAA;AAExB,UAAM,QAAQ,YAAY;AACxB,cAAQ,IAAI;AAAA,QACV,IAAI;AAAA,QACJ,SAAS,KAAK;AAAA,QACd,cAAc,OAAO;AAAA,QACrB,OAAO,MAAM;AAAA,MAAA,CACd;AACK,YAAA,MAAM,MAAMI,+BAAa;AAAA,QAC7B,IAAI;AAAA,QACJ,SAAS,KAAK;AAAA,QACd,cAAc,OAAO;AAAA,QACrB,OAAO,MAAM;AAAA,MAAA,CACd;AACD,cAAQ,IAAI,GAAG;AACX,UAAA,IAAI,QAAQ,KAAK;AACnBD,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,UAAU,MAAM;AACd,uBAAW,MAAM;AACfA,4BAAAA,MAAI,SAAS,EAAE,KAAK,6BAA8B,CAAA;AAClD,oBAAM,QAAQ;AACd,qBAAO,QAAQ;AACf,mBAAK,QAAQ;AAAA,eACZ,GAAI;AAAA,UACT;AAAA,QAAA,CACD;AAAA,MAAA,OACI;AACL,gBAAQ,IAAI,OAAO;AACnBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AAAA,MACH;AAAA,IAAA;AAEF,UAAM,UAAU,MAAM;AAChB,UAAA,MAAM,UAAU,IAAI;AACtBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MAAA,WACS,OAAO,UAAU,IAAI;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AAAA,MAAA,WACQ,SAAS,UAAU,IAAI;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AAAA,MAAA,OACI;AACC;MACR;AAAA,IAAA;;;;;;;;;;;;;;;;ACzHF,GAAG,WAAW,eAAe;"}