{"version":3,"file":"editPassword.js","sources":["../../../../../../src/pages/my/components/editPassword.vue","../../../../../../uniPage:/cGFnZXMvbXkvY29tcG9uZW50cy9lZGl0UGFzc3dvcmQudnVl"],"sourcesContent":["<template>\r\n  <view class=\"viewport\">\r\n    <view class=\"logo\">\r\n      <image src=\"../../static/log.png\"></image>\r\n    </view>\r\n    <view class=\"login-content\">\r\n      <uni-easyinput class=\"input\" v-model=\"usedPassword\" type=\"password\" placeholder=\"旧密码\" />\r\n      <uni-easyinput class=\"input\" v-model=\"newPassword\" type=\"password\" placeholder=\"新密码\" />\r\n    </view>\r\n    <view class=\"login\">\r\n      <button class=\"button phone\" @tap=\"edit\">\r\n        <text class=\"icon icon-phone\"></text>\r\n        修改\r\n      </button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive } from 'vue'\r\nimport { changePassword } from '@/services/personalInf'\r\n\r\nconst usedPassword = ref('')\r\nconst newPassword = ref('')\r\n\r\nconst editPassword = async () => {\r\n  const res = await changePassword({\r\n    oldpassword: usedPassword.value,\r\n    password: newPassword.value,\r\n  })\r\n  if (res.code === 200 && res.msg !== '密码错误') {\r\n    uni.showToast({\r\n      title: '修改成功',\r\n      icon: 'success',\r\n      duration: 1000,\r\n    })\r\n    setTimeout(() => {\r\n      uni.switchTab({\r\n        url: '/pages/index/index',\r\n      })\r\n    }, 1000)\r\n    wx.removeStorage({key:'userPass_password'})\r\n  } else if (res.msg === '密码错误') {\r\n    uni.showToast({\r\n      title: '原密码错误',\r\n      icon: 'error',\r\n      duration: 1000,\r\n    })\r\n  } else {\r\n    uni.showToast({\r\n      title: '修改失败',\r\n      icon: 'error',\r\n      duration: 1000,\r\n    })\r\n  }\r\n}\r\n\r\nconst edit = () => {\r\n  if (usedPassword.value === '') {\r\n    uni.showToast({\r\n      title: '请输入旧密码',\r\n      icon: 'error',\r\n    })\r\n    return\r\n  } else if (newPassword.value === '') {\r\n    uni.showToast({\r\n      title: '请输入新密码',\r\n      icon: 'error',\r\n    })\r\n    return\r\n  } else if (newPassword.value === usedPassword.value) {\r\n    uni.showToast({\r\n      title: '新旧密码相同',\r\n      icon: 'error',\r\n    })\r\n    return\r\n  } else {\r\n    editPassword()\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\npage {\r\n  height: 100%;\r\n}\r\n\r\n.viewport {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  padding: 20rpx 40rpx;\r\n\r\n  .login-content {\r\n    width: 80%;\r\n    height: 300rpx;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    margin-top: 20rpx;\r\n\r\n    .input {\r\n      width: 100%;\r\n    }\r\n  }\r\n}\r\n\r\n.logo {\r\n  flex: 1;\r\n  text-align: center;\r\n  margin-bottom: 60rpx;\r\n\r\n  image {\r\n    width: 220rpx;\r\n    height: 220rpx;\r\n    margin-top: 10vh;\r\n  }\r\n}\r\n\r\n.login {\r\n  width: 90%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 60vh;\r\n  padding: 40rpx 20rpx 20rpx;\r\n\r\n  .button {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 100%;\r\n    height: 80rpx;\r\n    font-size: 28rpx;\r\n    border-radius: 72rpx;\r\n    color: #fff;\r\n\r\n    .icon {\r\n      font-size: 40rpx;\r\n      margin-right: 6rpx;\r\n    }\r\n  }\r\n\r\n  .phone {\r\n    background-color: #06afe3;\r\n  }\r\n\r\n  .wechat {\r\n    background-color: #06c05f;\r\n\r\n    .options {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      margin-top: 70rpx;\r\n\r\n      button {\r\n        padding: 0;\r\n        background-color: transparent;\r\n      }\r\n    }\r\n\r\n    .icon {\r\n      font-size: 24rpx;\r\n      color: #444;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n\r\n      &::before {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        width: 80rpx;\r\n        height: 80rpx;\r\n        margin-bottom: 6rpx;\r\n        font-size: 40rpx;\r\n        border: 1rpx solid #444;\r\n        border-radius: 50%;\r\n      }\r\n    }\r\n\r\n    .icon-weixin::before {\r\n      border-color: #06c05f;\r\n      color: #06c05f;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/feidian/计算机设计大赛/xswc_cs/src/pages/my/components/editPassword.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","changePassword","uni","wx"],"mappings":";;;;;;;;;;;;;;;;;AAsBM,UAAA,eAAeA,kBAAI,EAAE;AACrB,UAAA,cAAcA,kBAAI,EAAE;AAE1B,UAAM,eAAe,YAAY;AACzB,YAAA,MAAM,MAAMC,oCAAe;AAAA,QAC/B,aAAa,aAAa;AAAA,QAC1B,UAAU,YAAY;AAAA,MAAA,CACvB;AACD,UAAI,IAAI,SAAS,OAAO,IAAI,QAAQ,QAAQ;AAC1CC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AACD,mBAAW,MAAM;AACfA,wBAAAA,MAAI,UAAU;AAAA,YACZ,KAAK;AAAA,UAAA,CACN;AAAA,WACA,GAAI;AACPC,sBAAAA,KAAG,cAAc,EAAC,KAAI,oBAAoB,CAAA;AAAA,MAAA,WACjC,IAAI,QAAQ,QAAQ;AAC7BD,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AAAA,MAAA,OACI;AACLA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AAAA,MACH;AAAA,IAAA;AAGF,UAAM,OAAO,MAAM;AACb,UAAA,aAAa,UAAU,IAAI;AAC7BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MAAA,WACS,YAAY,UAAU,IAAI;AACnCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MACS,WAAA,YAAY,UAAU,aAAa,OAAO;AACnDA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MAAA,OACK;AACQ;MACf;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;AC7EF,GAAG,WAAW,eAAe;"}