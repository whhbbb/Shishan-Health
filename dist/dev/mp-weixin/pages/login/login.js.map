{"version":3,"file":"login.js","sources":["../../../../../src/pages/login/login.vue","../../../../../uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<script setup lang=\"ts\">\n//\nimport { Base64 } from 'js-base64'\nimport randomWord from '@/utils/random'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { ref } from 'vue'\nimport { logInAPI } from '@/services/logIn'\n\ntype logInInfo = {\n  username: string\n  password: string\n}\n\nconst logInInfo = ref<logInInfo>({\n  username: '',\n  password: '',\n})\n\n// 暂时登录\nconst logIn = () => {\n  console.log(remPassword.value)\n  console.log(logInInfo.value)\n  if (logInInfo.value.username == '') {\n    uni.showToast({\n      title: '用户名不能为空！',\n      icon: 'none',\n      duration: 1000,\n    })\n    return\n  }\n  if (logInInfo.value.password == '') {\n    uni.showToast({\n      title: '密码不能为空！',\n      icon: 'none',\n      duration: 1000,\n    })\n    return\n  } else {\n    logInAPI({\n      username: logInInfo.value.username,\n      password: logInInfo.value.password,\n    }).then((res) => {\n      console.log(logInInfo.value)\n      console.log(res)\n      if (res.code === 200) {\n        uni.showToast({\n          title: '登录成功',\n          icon: 'success',\n          duration: 1000,\n        })\n        setTimeout(() => {\n          uni.reLaunch({\n            url: '/pages/index/index',\n          })\n        }, 2000)\n        // 存储token\n        uni.setStorageSync('token', res.token)\n        //存密码\n        if (remPassword.value) {\n          wx.setStorage({\n            key: 'userPass_username',\n            data: logInInfo.value.username,\n          })\n          wx.setStorage({\n            key: 'userPass_password',\n            data: randomWord(99) + Base64.encode(logInInfo.value.password),\n          })\n          console.log(randomWord(99) + Base64.encode(logInInfo.value.password))\n        }\n      } else {\n        uni.showToast({\n          title: '密码错误',\n          icon: 'error',\n          duration: 1000,\n        })\n      }\n    })\n  }\n  // uni.showToast({\n  //   title: '登录成功',\n  //   icon: 'success',\n  //   duration: 1000\n  // })\n  // setTimeout(() => {\n  //   uni.switchTab({\n  //     url: '/pages/index/index'\n  //   })\n  // }, 2000)\n}\n\n// 获取code登陆凭证\nlet code = ''\nonLoad(async () => {\n  wx.getStorage({\n    key: 'userPass_password',\n    success: function (res) {\n      console.log(res.data)\n      console.log(Base64.decode(res.data.slice(99)))\n      logInInfo.value.password = Base64.decode(res.data.slice(99))\n    },\n    fail: function () {\n      logInInfo.value.password = ''\n    },\n  })\n  const res = await wx.login()\n  console.log(res)\n  code = res.code\n  wx.getStorage({\n    key: 'userPass_username',\n    success: function (res) {\n      console.log(res.data)\n      logInInfo.value.username = res.data\n      remPassword.value = true\n    },\n    fail: function () {\n      logInInfo.value.username = ''\n    },\n  });\n\n})\n\n// 获取用户手机号码\nconst onGetphonenumber = (ev: any) => {\n  console.log(ev)\n}\n//记住密码\nconst remPassword = ref(false)\nconst remPasswordChange = () => {\n  remPassword.value = !remPassword.value\n}\n\n</script>\n\n<template>\n  <view class=\"viewport\">\n    <view class=\"logo\">\n      <image src=\"../../static/LOGO.png\"></image>\n      <view class=\"title\">学术晚茶</view>\n    </view>\n    <view class=\"lowwer\">\n      <view class=\"login-content\">\n        <view class=\"input\">\n          <uni-easyinput type=\"text\" v-model=\"logInInfo.username\" placeholder=\"用户名\" />\n        </view>\n        <view class=\"input\">\n          <uni-easyinput type=\"password\" v-model=\"logInInfo.password\" placeholder=\"密码\" />\n        </view>\n      </view>\n      <view class=\"login\">\n        <button class=\"button phone\" @tap=\"logIn\">\n          <text class=\"icon icon-phone\"></text>\n          登录\n        </button>\n        <label class=\"rempass\">\n          <checkbox value=\"remPassword\" :checked=\"remPassword\" @click=\"remPasswordChange\" color=\"#06afe3\" style=\"\n                transform: scale(0.55);\n              \" />记住密码\n        </label>\n      </view>\n    </view>\n  </view>\n</template>\n\n<style lang=\"scss\">\npage {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.viewport {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  height: 95%;\n\n  .logo {\n    margin-bottom: 60rpx;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    .title {\n      font-size: 60rpx;\n      color: #0077b6;\n      margin-top: 20rpx;\n    }\n\n    image {\n      width: 220rpx;\n      height: 220rpx;\n      margin-top: 10vh;\n    }\n  }\n\n  .lowwer {\n    margin-top: 150rpx;\n    width: 80%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    .login-content {\n      width: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      margin-top: 20rpx;\n\n      .input {\n        width: 100%;\n        margin-bottom: 30rpx;\n      }\n    }\n\n    .login {\n      width: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n\n      .button {\n        width: 100%;\n        border-radius: 200rpx;\n        background-color: rgb(214, 243, 251);\n        color: #0077b6;\n        margin-bottom: 10rpx;\n      }\n\n      .rempass {\n        font-size: 20rpx;\n        display: flex;\n        align-items: center;\n      }\n    }\n  }\n}\n\n:deep(.is-input-border) {\n  border-radius: 200rpx !important;\n  border: 1px solid rgb(13, 152, 232) !important;\n}\n\n:deep(.uni-easyinput__content-input) {\n  padding-left: 40rpx !important;\n  height: 90rpx !important;\n  font-size: 30rpx !important;\n}\n\n//勾选协议 抖动动画\n// .animation-shake {\n//   animation-delay: 0s;\n//   animation-duration: 0.1s;\n//   animation-iteration-count: infinite;\n//   animation-name: shake;\n//   animation-play-state: running;\n//   animation-timing-function: ease-in-out;\n// }\n\n// @keyframes shake {\n//   0% {\n//     transform: translate(0, 0) rotate(0deg);\n//   }\n\n//   2% {\n//     transform: translate(-4px, 0) rotate(0deg);\n//   }\n\n//   4% {\n//     transform: translate(2px, 0) rotate(0deg);\n//   }\n\n//   6% {\n//     transform: translate(-3px, 0) rotate(0deg);\n//   }\n\n//   8% {\n//     transform: translate(9px, 0) rotate(0deg);\n//   }\n\n//   10% {\n//     transform: translate(2px, 0) rotate(0deg);\n//   }\n\n//   12% {\n//     transform: translate(-6px, 0) rotate(0deg);\n//   }\n\n//   14% {\n//     transform: translate(-7px, 0) rotate(0deg);\n//   }\n\n//   16% {\n//     transform: translate(2px, 0) rotate(0deg);\n//   }\n\n//   18% {\n//     transform: translate(7px, 0) rotate(0deg);\n//   }\n\n//   20% {\n//     transform: translate(-1px, 0) rotate(0deg);\n//   }\n\n//   22% {\n//     transform: translate(-10px, 0) rotate(0deg);\n//   }\n\n//   24% {\n//     transform: translate(-10px, 0) rotate(0deg);\n//   }\n\n//   26% {\n//     transform: translate(3px, 0) rotate(0deg);\n//   }\n\n//   28% {\n//     transform: translate(-5px, 0) rotate(0deg);\n//   }\n\n//   30% {\n//     transform: translate(4px, 0) rotate(0deg);\n//   }\n\n//   32% {\n//     transform: translate(-6px, 0) rotate(0deg);\n//   }\n\n//   34% {\n//     transform: translate(-2px, 0) rotate(0deg);\n//   }\n\n//   36% {\n//     transform: translate(-6px, 0) rotate(0deg);\n//   }\n\n//   38% {\n//     transform: translate(-2px, 0) rotate(0deg);\n//   }\n\n//   40% {\n//     transform: translate(4px, 0) rotate(0deg);\n//   }\n\n//   42% {\n//     transform: translate(8px, 0) rotate(0deg);\n//   }\n\n//   44% {\n//     transform: translate(-3px, 0) rotate(0deg);\n//   }\n\n//   46% {\n//     transform: translate(-10px, 0) rotate(0deg);\n//   }\n\n//   48% {\n//     transform: translate(4px, 0) rotate(0deg);\n//   }\n\n//   50% {\n//     transform: translate(-6px, 0) rotate(0deg);\n//   }\n\n//   52% {\n//     transform: translate(6px, 0) rotate(0deg);\n//   }\n\n//   54% {\n//     transform: translate(-8px, 0) rotate(0deg);\n//   }\n\n//   56% {\n//     transform: translate(5px, 0) rotate(0deg);\n//   }\n\n//   58% {\n//     transform: translate(9px, 0) rotate(0deg);\n//   }\n\n//   60% {\n//     transform: translate(7px, 0) rotate(0deg);\n//   }\n\n//   62% {\n//     transform: translate(1px, 0) rotate(0deg);\n//   }\n\n//   64% {\n//     transform: translate(2px, 0) rotate(0deg);\n//   }\n\n//   66% {\n//     transform: translate(-2px, 0) rotate(0deg);\n//   }\n\n//   68% {\n//     transform: translate(-7px, 0) rotate(0deg);\n//   }\n\n//   70% {\n//     transform: translate(-1px, 0) rotate(0deg);\n//   }\n\n//   72% {\n//     transform: translate(-6px, 0) rotate(0deg);\n//   }\n\n//   74% {\n//     transform: translate(5px, 0) rotate(0deg);\n//   }\n\n//   76% {\n//     transform: translate(0, 0) rotate(0deg);\n//   }\n\n//   78% {\n//     transform: translate(9px, 0) rotate(0deg);\n//   }\n\n//   80% {\n//     transform: translate(-3px, 0) rotate(0deg);\n//   }\n\n//   82% {\n//     transform: translate(8px, 0) rotate(0deg);\n//   }\n\n//   84% {\n//     transform: translate(-2px, 0) rotate(0deg);\n//   }\n\n//   86% {\n//     transform: translate(-1px, 0) rotate(0deg);\n//   }\n\n//   88% {\n//     transform: translate(-3px, 0) rotate(0deg);\n//   }\n\n//   90% {\n//     transform: translate(4px, 0) rotate(0deg);\n//   }\n\n//   92% {\n//     transform: translate(0, 0) rotate(0deg);\n//   }\n\n//   94% {\n//     transform: translate(4px, 0) rotate(0deg);\n//   }\n\n//   96% {\n//     transform: translate(2px, 0) rotate(0deg);\n//   }\n\n//   98% {\n//     transform: translate(-2px, 0) rotate(0deg);\n//   }\n// }\n// </style>\n","import MiniProgramPage from '/Users/whhbbb/Documents/Project-storage/xswc_game/src/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","logInAPI","wx","randomWord","Base64","onLoad","res"],"mappings":";;;;;;;;;;;;;;;;;;AAaA,UAAM,YAAYA,cAAAA,IAAe;AAAA,MAC/B,UAAU;AAAA,MACV,UAAU;AAAA,IAAA,CACX;AAGD,UAAM,QAAQ,MAAM;AACV,cAAA,IAAI,YAAY,KAAK;AACrB,cAAA,IAAI,UAAU,KAAK;AACvB,UAAA,UAAU,MAAM,YAAY,IAAI;AAClCC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AACD;AAAA,MACF;AACI,UAAA,UAAU,MAAM,YAAY,IAAI;AAClCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAAA,CACX;AACD;AAAA,MAAA,OACK;AACIC,gCAAA;AAAA,UACP,UAAU,UAAU,MAAM;AAAA,UAC1B,UAAU,UAAU,MAAM;AAAA,QAAA,CAC3B,EAAE,KAAK,CAAC,QAAQ;AACP,kBAAA,IAAI,UAAU,KAAK;AAC3B,kBAAQ,IAAI,GAAG;AACX,cAAA,IAAI,SAAS,KAAK;AACpBD,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,YAAA,CACX;AACD,uBAAW,MAAM;AACfA,4BAAAA,MAAI,SAAS;AAAA,gBACX,KAAK;AAAA,cAAA,CACN;AAAA,eACA,GAAI;AAEHA,0BAAAA,MAAA,eAAe,SAAS,IAAI,KAAK;AAErC,gBAAI,YAAY,OAAO;AACrBE,4BAAAA,KAAG,WAAW;AAAA,gBACZ,KAAK;AAAA,gBACL,MAAM,UAAU,MAAM;AAAA,cAAA,CACvB;AACDA,4BAAAA,KAAG,WAAW;AAAA,gBACZ,KAAK;AAAA,gBACL,MAAMC,aAAAA,WAAW,EAAE,IAAIC,cAAAA,QAAO,OAAO,UAAU,MAAM,QAAQ;AAAA,cAAA,CAC9D;AACO,sBAAA,IAAID,wBAAW,EAAE,IAAIC,cAAAA,QAAO,OAAO,UAAU,MAAM,QAAQ,CAAC;AAAA,YACtE;AAAA,UAAA,OACK;AACLJ,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,YAAA,CACX;AAAA,UACH;AAAA,QAAA,CACD;AAAA,MACH;AAAA,IAAA;AAeFK,kBAAAA,OAAO,YAAY;AACjBH,oBAAAA,KAAG,WAAW;AAAA,QACZ,KAAK;AAAA,QACL,SAAS,SAAUI,MAAK;AACd,kBAAA,IAAIA,KAAI,IAAI;AACZ,kBAAA,IAAIF,sBAAO,OAAOE,KAAI,KAAK,MAAM,EAAE,CAAC,CAAC;AACnC,oBAAA,MAAM,WAAWF,sBAAO,OAAOE,KAAI,KAAK,MAAM,EAAE,CAAC;AAAA,QAC7D;AAAA,QACA,MAAM,WAAY;AAChB,oBAAU,MAAM,WAAW;AAAA,QAC7B;AAAA,MAAA,CACD;AACK,YAAA,MAAM,MAAMJ,mBAAG;AACrB,cAAQ,IAAI,GAAG;AACR,UAAI;AACXA,oBAAAA,KAAG,WAAW;AAAA,QACZ,KAAK;AAAA,QACL,SAAS,SAAUI,MAAK;AACd,kBAAA,IAAIA,KAAI,IAAI;AACV,oBAAA,MAAM,WAAWA,KAAI;AAC/B,sBAAY,QAAQ;AAAA,QACtB;AAAA,QACA,MAAM,WAAY;AAChB,oBAAU,MAAM,WAAW;AAAA,QAC7B;AAAA,MAAA,CACD;AAAA,IAAA,CAEF;AAOK,UAAA,cAAcP,kBAAI,KAAK;AAC7B,UAAM,oBAAoB,MAAM;AAClB,kBAAA,QAAQ,CAAC,YAAY;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;AC/HnC,GAAG,WAAW,eAAe;"}