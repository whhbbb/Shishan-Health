{"version":3,"file":"giftCenter.js","sources":["../../../../../src/pages/gift/giftCenter.vue","../../../../../uniPage:/cGFnZXMvZ2lmdC9naWZ0Q2VudGVyLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <!-- tab导航栏 -->\r\n    <scroll-view\r\n      scroll-x=\"true\"\r\n      class=\"nav\"\r\n      :scroll-left=\"navScrollLeft\"\r\n      scroll-with-animation=\"true\"\r\n    >\r\n      <view\r\n        v-for=\"(navItem, idx) in navData\"\r\n        :key=\"idx\"\r\n        class=\"nav-item\"\r\n        :class=\"{ active: currentTab === idx }\"\r\n        @tap=\"switchNav(idx)\"\r\n      >\r\n        {{ navItem.text }}\r\n      </view>\r\n    </scroll-view>\r\n\r\n    <swiper :current=\"currentTab\" duration=\"300\" @change=\"switchTab\">\r\n      <swiper-item v-for=\"(tabItem, idx) in tabData\" :key=\"idx\" class=\"tab-content\">\r\n        <view v-if=\"idx === 0\">\r\n          <!-- 第一个页面的内容 -->\r\n          <view>\r\n            <view class=\"content\">\r\n              <view class=\"left\">\r\n                <template v-for=\"(item, index) in list\" :key=\"index\">\r\n                  <view @click=\"goToGoodsDetail(item.id)\" class=\"item\" v-if=\"index % 2 === 0\">\r\n                    <image class=\"item-img\" :src=\"item.coverPicture\" mode=\"widthFix\"></image>\r\n                    <view class=\"item-title-box\">\r\n                      <view class=\"item-title goodsname\">{{ item.name }}</view>\r\n                    </view>\r\n                    <view class=\"item-title-box\">\r\n                      <view class=\"item-title\">{{ item.introduce }}</view>\r\n                    </view>\r\n                    <view class=\"name\">\r\n                      <image class=\"item-ava\" src=\"../../static/gifts/R-C.jpg\"></image>\r\n                      <text class=\"name-title\">{{ item.price }}</text>\r\n                      <view class=\"heart\">\r\n                        <text></text>\r\n                      </view>\r\n                    </view>\r\n                  </view>\r\n                </template>\r\n              </view>\r\n              <view class=\"right\">\r\n                <template v-for=\"(item, index) in list\" :key=\"index\">\r\n                  <view @click=\"goToGoodsDetail(item.id)\" class=\"item\" v-if=\"index % 2 === 1\">\r\n                    <image class=\"item-img\" :src=\"item.coverPicture\" mode=\"widthFix\"></image>\r\n                    <view class=\"item-title-box\">\r\n                      <view class=\"item-title goodsname\">{{ item.name }}</view>\r\n                    </view>\r\n                    <view class=\"item-title-box\">\r\n                      <view class=\"item-title\">{{ item.introduce }}</view>\r\n                    </view>\r\n                    <view class=\"name\">\r\n                      <image class=\"item-ava\" src=\"../../static/gifts/R-C.jpg\"></image>\r\n                      <text class=\"name-title\">{{ item.price }}</text>\r\n                      <view class=\"heart\">\r\n                        <text></text>\r\n                      </view>\r\n                    </view>\r\n                  </view>\r\n                </template>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n\r\n        <view v-else-if=\"idx === 1\">\r\n          <!-- 第二个页面的内容 -->\r\n          <view><order-list></order-list></view>\r\n        </view>\r\n      </swiper-item>\r\n    </swiper>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport orderList from './components/orderList.vue'\r\n\r\nimport { ref, reactive, computed } from 'vue'\r\nimport { getGiftList } from '@/services/gift'\r\nimport { onLoad, onShow } from '@dcloudio/uni-app'\r\n\r\n//过审\r\n// 获取当前时间点\r\n// const currentTime = ref(new Date())\r\n\r\n// 计算2023年11月17号的时间点\r\n// const targetDate = new Date('2023-11-23')\r\n\r\n// 判断当前时间是否已经过了2023年11月18号\r\n// import { getAudit } from '@/services/Audit'\r\n// const isPastTargetDate = ref<boolean>(true)\r\n// const getA = async () => {\r\n//   const res = await getAudit()\r\n//   console.log(res)\r\n//   isPastTargetDate.value = res.data\r\n//   if (!isPastTargetDate.value) {\r\n//     uni.showToast({\r\n//       title: '推荐礼品功能尚未实现，敬请期待~',\r\n//       icon: 'none',\r\n//       duration: 2000,\r\n//       complete: function () {\r\n//         setTimeout(function () {\r\n//           uni.switchTab({\r\n//             url: '/pages/index/index',\r\n//           })\r\n//         }, 2000) // 在弹窗关闭后，延迟2秒执行页面跳转\r\n//       },\r\n//     })\r\n//   } else {\r\n//     getGiftLists()\r\n//   }\r\n// }\r\nonLoad(() => {\r\n  // getA()\r\n  // 获取宽度\r\n  getGiftLists()\r\n  wx.getSystemInfo({\r\n    success(res) {\r\n      screenW.value = res.windowWidth\r\n      console.log(res.windowWidth) // 屏幕宽度\r\n      const singleNavWidth = res.windowWidth / 5\r\n      navScrollLeft.value = (currentTab.value - 2) * singleNavWidth\r\n    },\r\n  })\r\n})\r\nonShow(() => {\r\n  // getA()\r\n  getGiftLists()\r\n})\r\n//页面滑动切换\r\nconst screenW = ref<number>()\r\nconst navScrollLeft = ref(0)\r\nconst currentTab = ref(0)\r\nconst navData = ref([{ text: '积分商城' }, { text: '兑换记录' }])\r\nconst tabData = ref([0, 1]) // 两个页面的索引\r\n\r\nconst switchNav = (idx: number) => {\r\n  const singleNavWidth = screenW.value / 2\r\n  navScrollLeft.value = (idx - 2) * singleNavWidth\r\n  if (currentTab.value === idx) {\r\n    return false\r\n  } else {\r\n    currentTab.value = idx\r\n  }\r\n  // getA()\r\n  getGiftLists()\r\n}\r\nconst switchTab = (e: any) => {\r\n  const cur = e.detail.current\r\n  const singleNavWidth = screenW.value / 2\r\n  currentTab.value = cur\r\n  navScrollLeft.value = (cur - 2) * singleNavWidth\r\n  // getA()\r\n  getGiftLists()\r\n}\r\n\r\nconst getGiftLists = async () => {\r\n  const res = await getGiftList()\r\n  console.log(res.rows)\r\n  list.value = res.rows\r\n}\r\n\r\nconst list = ref([])\r\nconst goToGoodsDetail = (id) => {\r\n  // if (uni.getStorageSync('token')) {\r\n  //   console.log(id)\r\n  //   console.log('去商品详情页')\r\n  uni.navigateTo({\r\n    url: '/pages/gift/gift?id=' + id,\r\n  })\r\n  // } else {\r\n  //   uni.showToast({\r\n  //     title: '您尚未登录，请先登录',\r\n  //     icon: 'none',\r\n  //     duration: 1000,\r\n  //     complete: () => {\r\n  //       setTimeout(() => {\r\n  //         uni.navigateTo({\r\n  //           url: '/pages/login/login',\r\n  //         })\r\n  //       }, 1000)\r\n  //     },\r\n  //   })\r\n  // }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/**index.wxss**/\r\npage {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.container {\r\n  width: 100%;\r\n  height: 100vh;\r\n  padding-top: 80rpx;\r\n}\r\n\r\n.nav {\r\n  /* 设置tab-nav宽高度 */\r\n  height: 80rpx;\r\n  width: 100%;\r\n\r\n  /* 假如您需要并排放置两个带边框的框，\r\n  可通过将 box-sizing 设置为 \"border-box\"。 */\r\n  box-sizing: border-box;\r\n\r\n  overflow: hidden;\r\n\r\n  /* 居中 */\r\n  line-height: 80rpx;\r\n\r\n  background: #f7f7f7;\r\n\r\n  font-size: 16px;\r\n\r\n  /* 规定段落中的文本不进行换行： */\r\n  white-space: nowrap;\r\n\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 99;\r\n}\r\n\r\n.nav-item {\r\n  width: 50%;\r\n  display: inline-block;\r\n  text-align: center;\r\n}\r\n\r\n.nav-item.active {\r\n  color: #428ffb;\r\n}\r\n\r\n.tab-box {\r\n  background: rgb(31, 201, 96);\r\n  /* 这里设置成nav的高度 */\r\n  padding-top: 80rpx;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.tab-content {\r\n  /* 裁剪 div 元素中内容的左/右边缘 - 如果溢出元素的内容区域的话： */\r\n  overflow-y: scroll;\r\n}\r\n\r\n/*\r\n.container {\r\n  padding: 10rpx;\r\n} */\r\n\r\n.content {\r\n  text-align: justify;\r\n}\r\n\r\n.item {\r\n  background-color: #fff;\r\n  margin: 10rpx 3%;\r\n  margin-bottom: 20rpx;\r\n  display: inline-block;\r\n  width: 96%;\r\n  border-radius: 20rpx;\r\n  overflow: hidden;\r\n}\r\n\r\n.item-ava {\r\n  width: 40rpx;\r\n  height: 40rpx;\r\n  border-radius: 20rpx;\r\n}\r\n\r\n.heart {\r\n  width: 30rpx;\r\n  height: 26rpx;\r\n  margin-right: 8rpx;\r\n}\r\n\r\n.heart {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.item-img {\r\n  width: 100%;\r\n}\r\n\r\n.item-title {\r\n  font-size: 24rpx;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 1;\r\n  overflow: hidden;\r\n  font-family: 'PingFang SC-Medium';\r\n  color: #1e1e1e;\r\n  margin: 15rpx;\r\n  line-height: 27rpx;\r\n}\r\n.goodsname {\r\n  font-size: 30rpx;\r\n  line-height: 35rpx;\r\n}\r\n.item .name {\r\n  display: flex;\r\n  padding: 0 15rpx;\r\n  margin-top: 20rpx;\r\n  padding-bottom: 10rpx;\r\n  align-items: center;\r\n  font-size: 22rpx;\r\n  color: #1e1e1e;\r\n  font-family: 'PingFang SC-Medium';\r\n}\r\n\r\n.name image {\r\n  flex: 0 0 auto;\r\n}\r\n\r\n.item-title-box {\r\n  display: flex;\r\n  position: relative;\r\n}\r\n\r\n.name-title {\r\n  flex: 1;\r\n  margin-left: 18rpx;\r\n  margin-right: 20rpx;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n.name text:last-child {\r\n  color: #c4c4c4;\r\n  text-decoration: underline;\r\n  line-height: 10rpx;\r\n}\r\n\r\n.left,\r\n.right {\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  width: 49%;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/feidian/计算机设计大赛/xswc_cs/src/pages/gift/giftCenter.vue'\nwx.createPage(MiniProgramPage)"],"names":["onLoad","wx","onShow","ref","getGiftList","uni"],"mappings":";;;;;;;;;AAgFA,MAAA,YAAsB,MAAA;;;;AAqCtBA,kBAAAA,OAAO,MAAM;AAGE;AACbC,oBAAAA,KAAG,cAAc;AAAA,QACf,QAAQ,KAAK;AACX,kBAAQ,QAAQ,IAAI;AACZ,kBAAA,IAAI,IAAI,WAAW;AACrB,gBAAA,iBAAiB,IAAI,cAAc;AAC3B,wBAAA,SAAS,WAAW,QAAQ,KAAK;AAAA,QACjD;AAAA,MAAA,CACD;AAAA,IAAA,CACF;AACDC,kBAAAA,OAAO,MAAM;AAEE;IAAA,CACd;AAED,UAAM,UAAUC,cAAAA;AACV,UAAA,gBAAgBA,kBAAI,CAAC;AACrB,UAAA,aAAaA,kBAAI,CAAC;AAClB,UAAA,UAAUA,kBAAI,CAAC,EAAE,MAAM,OAAO,GAAG,EAAE,MAAM,OAAQ,CAAA,CAAC;AACxD,UAAM,UAAUA,cAAA,IAAI,CAAC,GAAG,CAAC,CAAC;AAEpB,UAAA,YAAY,CAAC,QAAgB;AAC3B,YAAA,iBAAiB,QAAQ,QAAQ;AACzB,oBAAA,SAAS,MAAM,KAAK;AAC9B,UAAA,WAAW,UAAU,KAAK;AACrB,eAAA;AAAA,MAAA,OACF;AACL,mBAAW,QAAQ;AAAA,MACrB;AAEa;IAAA;AAET,UAAA,YAAY,CAAC,MAAW;AACtB,YAAA,MAAM,EAAE,OAAO;AACf,YAAA,iBAAiB,QAAQ,QAAQ;AACvC,iBAAW,QAAQ;AACL,oBAAA,SAAS,MAAM,KAAK;AAErB;IAAA;AAGf,UAAM,eAAe,YAAY;AACzB,YAAA,MAAM,MAAMC,cAAAA;AACV,cAAA,IAAI,IAAI,IAAI;AACpB,WAAK,QAAQ,IAAI;AAAA,IAAA;AAGb,UAAA,OAAOD,kBAAI,CAAA,CAAE;AACb,UAAA,kBAAkB,CAAC,OAAO;AAI9BE,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,yBAAyB;AAAA,MAAA,CAC/B;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7KH,GAAG,WAAW,eAAe;"}